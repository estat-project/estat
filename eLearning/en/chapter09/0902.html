<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <title>Chapter 9</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="../../css/ie10-viewport-bug-workaround.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../../css/dashboard.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <style type="text/css">code{white-space: pre;}</style>
       <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
       <script src="../../js/prism.js"></script>
       <link rel="stylesheet" href="../../css/prism.css">
       <script src="../../js/jquery.min.js"></script>    
       <script type="text/javascript" id="MathJax-script" async
	       src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
       </script>
       <script>
	 $(document).ready(function() {
  	     toc = $("#sidebar > ul > li > ul");
  	     sections = toc.children();   // <li>
  	     for(var i=0; i<sections.length; i++) {
  		 if ($(sections[i]).children().length == 1) { continue; }
  		 var first = sections[i].firstElementChild;  // <a>
  		 var last = sections[i].lastElementChild;
  		 var li = $("<li>");
  		 var details = $("<details>");
  		 var summary = $("<summary>");
  		 $(summary).append(first)
  		 $(details).append(summary);
  		 $(details).append(last);
  		 $(li).append(details);	
  		 $(sections[i]).replaceWith(li);
  	     }
	 });
	 </script>
       <link rel="stylesheet" href="../../css/pandoc.css">
       <script src="../../js/eBook.js"></script>
       <script src="../../../eStat/js/language.js" ></script>   
       <script src="../../../eStat/lib/d3/d3.v4.min.js"></script>   
       <script src="../../../eStat/lib/DistributionsUtil.js" ></script>
       <script src="../../../eStat/js/eStatU.js"></script>
       <script src="../../../eStat/lib/FileSaver.min.js" ></script>
       <script src="../../../eStat/lib/convertSVG.js"></script>
</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <ul class="nav navbar-nav">
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Chapter<span class="caret"></span></a>
      <ul class="dropdown-menu"> 
        <li><a href="../index.html">HOME</a></li>
        <li><a href="../chapter01/index.html">Chapter 1</a></li>
        <li><a href="../chapter02/index.html">Chapter 2</a></li>
        <li><a href="../chapter03/index.html">Chapter 3</a></li>
        <li><a href="../chapter04/index.html">Chapter 4</a></li>
        <li><a href="../chapter05/index.html">Chapter 5</a></li>
        <li><a href="../chapter06/index.html">Chapter 6</a></li>
        <li><a href="../chapter07/index.html">Chapter 7</a></li>
        <li><a href="../chapter08/index.html">Chapter 8</a></li>
        <li><a href="../chapter09/index.html">Chapter 9</a></li>
        <li><a href="../chapter10/index.html">Chapter 10</a></li>
        <li><a href="../chapter11/index.html">Chapter 11</a></li>
        <li><a href="../chapter12/index.html">Chapter 12</a></li>
        <li><a href="../chapter13/index.html">Chapter 13</a></li>
      </ul>
    </li>
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Section<span class="caret"></span></a>
	  <ul class="dropdown-menu"> 
                <li><a href="../chapter09/0901.html">9.1 Analysis of Variance for Experiments of Single Factor</a></li>
                <li><a href="../chapter09/090101.html">&nbsp;&nbsp;9.1.1 Multiple Comparison</a></li>
                <li><a href="../chapter09/090101.html">&nbsp;&nbsp;9.1.2 Residual Analysis</a></li>
                <li><a href="../chapter09/0902.html">9.2 Design of Experiments for Sampling</a></li>
                <li><a href="../chapter09/0902.html">&nbsp;&nbsp;9.2.1 Completely Randomized Design</a></li>
                <li><a href="../chapter09/0902.html">&nbsp;&nbsp;9.2.2 Randomized Block Design</a></li>
                <li><a href="../chapter09/0903.html">9.3 Analysis of Variance for Experiments of Two Factors</a></li>
                <li><a href="../chapter09/0904.html">9.4 Exercise</a></li>
	  </ul>
    </li>
    <li><a class="navbar-brand" href="http://estat.me" target="_blank">eStat</a></li>
    <li><a class="navbar-brand" href="http://www.estat.me/estat/eStatU/index.html" target="_blank">eStatU</a></li>
    <li><a class="navbar-brand" href="/estat/eLearning/Distribution/index.html" target="_blank">Distribution</a></li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <div id="sidebar" class="col-sm-3 col-md2 sidebar">
      <ul>
	<li><a href=""></a>
	  <ul>
            <li><a href="../index.html">HOME</a></li>
	    <li><a href="../chapter01/index.html">Chapter 1</a>
	      <ul>
                <li><a href="../chapter01/0101.html">1.1 Statistics and Data Science</a></li>
                <li><a href="../chapter01/0102.html">1.2 Population and Sample</a></li>
                <li><a href="../chapter01/0103.html">1.3 Variables and Data</a></li>
                <li><a href="../chapter01/0104.html">1.4 Softwares for Statistical Analysis</a></li>
                <li><a href="../chapter01/0105.html">1.5 Exercies</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter02/index.html">Chapter 2</a>
	      <ul>
                <li><a href="../chapter02/0201.html">2.1 Visualization of Qualitative Data</a></li>
                <li><a href="../chapter02/0202.html">2.2 Visualization of Summary Data</a></li>
                <li><a href="../chapter02/0202.html">&nbsp;&nbsp;2.2.1 Summary Data of Categorical Variable</a></li>
                <li><a href="../chapter02/0202.html">&nbsp;&nbsp;2.2.2 Summary Data of Categorical Variable with Group</a></li>
                <li><a href="../chapter02/0203.html">2.3 Visualization of Raw Data</a></li>
                <li><a href="../chapter02/0203.html">&nbsp;&nbsp;2.3.1 Raw Data of Categorical Variable</a></li>
                <li><a href="../chapter02/0203.html">&nbsp;&nbsp;2.3.2 Raw Data of Categorical Variable with Group</a></li>
                <li><a href="../chapter02/0204.html">2.4 Word Cloud</a></li>
                <li><a href="../chapter02/0205.html">2.5 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter03/index.html">Chapter 3</a>
	      <ul>
                <li><a href="../chapter03/0301.html">3.1 Visualization of Quantitative Data</a></li> 
                <li><a href="../chapter03/0302.html">3.2 Visualization of Single Quantitative Variable</a></li>
                <li><a href="../chapter03/0302.html">&nbsp;&nbsp;3.2.1 Visualization of Quantitative Data without Group</a></li>
                <li><a href="../chapter03/0302.html">&nbsp;&nbsp;3.2.2 Visualization of Quantitative Data with Group</a></li>
                <li><a href="../chapter03/0303.html">3.3 Visualization of Two Quantitative Variables</a></li>
                <li><a href="../chapter03/0304.html">3.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter04/index.html">Chapter 4</a>
	      <ul>
                <li><a href="../chapter04/0401.html">4.1 Frequency Table for Single Variable</a></li>
                <li><a href="../chapter04/0401.html">&nbsp;&nbsp;4.1.1 Frequency Table for Categorical Variable</a></li>
                <li><a href="../chapter04/0401.html">&nbsp;&nbsp;4.1.2 Frequency Table for Quantitative Variable</a></li>
                <li><a href="../chapter04/0402.html">4.2 Contingency Table for Two Variables</a></li>
                <li><a href="../chapter04/0402.html">&nbsp;&nbsp;4.2.1 Contingency Table for Two Categorical Variables</a></li>
                <li><a href="../chapter04/0402.html">&nbsp;&nbsp;4.2.2 Contingency Table for Two Quantitative Variables</a></li>
                <li><a href="../chapter04/040301.html">4.3 Summary Measures for Quantitative Variable</a></li>
                <li><a href="../chapter04/040301.html">&nbsp;&nbsp;4.3.1 Measures of Central Tendency</a></li>
                <li><a href="../chapter04/040302.html">&nbsp;&nbsp;4.3.2 Measures of Dispersion</a></li>
                <li><a href="../chapter04/0404.html">4.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter05/index.html">Chapter 5</a>
	      <ul>
                <li><a href="../chapter05/0501.html">5.1 Definition of Probability</a></li>
                <li><a href="../chapter05/0502.html">5.2 Calculation of Probability</a></li>
                <li><a href="../chapter05/0503.html">5.3 Discrete Random Variable</a></li>
		<li><a href="../chapter05/050301.html">&nbsp;&nbsp;5.3.1 Binomial Distribution</a></li>
		<li><a href="../chapter05/050302.html">&nbsp;&nbsp;5.3.2 Poissson Distribution</a></li>
		<li><a href="../chapter05/050303.html">&nbsp;&nbsp;5.3.3 Geometric Distribution</a></li>
		<li><a href="../chapter05/050304.html">&nbsp;&nbsp;5.3.4 Hypergeometric Distribution</a></li>
                <li><a href="../chapter05/0504.html">5.4 Continuous Random Variable</a></li>
		<li><a href="../chapter05/050401.html">&nbsp;&nbsp;5.4.1 Normal Distribution</a></li>
		<li><a href="../chapter05/050402.html">&nbsp;&nbsp;5.4.2 Exponential Distribution</a></li>
                <li><a href="../chapter05/0505.html">5.5 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter06/index.html">Chapter 6</a>
	      <ul>
                <li><a href="../chapter06/0601.html">6.1 Simple Random Sampling</a></li>
                <li><a href="../chapter06/060201.html">6.2 Sampling Distribution of Sample Means and Estimation of the Population Mean</a></li>
                <li><a href="../chapter06/060201.html">&nbsp;&nbsp;6.2.1 Sampling Distribution of Sample Means</a></li>
                <li><a href="../chapter06/060202.html">&nbsp;&nbsp;6.2.2 Estimation of the Population Mean</a></li>
                <li><a href="../chapter06/060301.html">6.3 Sampling Distribution of Sample Variances and Estimation of the Population Variance</a></li>
                <li><a href="../chapter06/060301.html">&nbsp;&nbsp;6.3.1 Sampling Distribution of Sample Variances</a></li>
                <li><a href="../chapter06/060302.html">&nbsp;&nbsp;6.3.2 Estimation of the Population Variance</a></li>
                <li><a href="../chapter06/060401.html">6.4 Sampling Distribution of Sample Proportions and Estimation of the Population Proportion</a></li>
                <li><a href="../chapter06/060401.html">&nbsp;&nbsp;6.4.1 Sampling Distribution of Sample Proportions</a></li>
                <li><a href="../chapter06/060402.html">&nbsp;&nbsp;6.4.2 Estimation of the Population Proportion</a></li>
                <li><a href="../chapter06/0605.html">6.5 Determination of the Sample Size  </a></li>
                <li><a href="../chapter06/0605.html">&nbsp;&nbsp;6.5.1 Determination of the Sample Size to Estimate the Population Mean </a></li>
                <li><a href="../chapter06/0605.html">&nbsp;&nbsp;6.5.2 Determination of the Sample Size to Estimate the Population Proportion</a></li> 
                <li><a href="../chapter06/0606.html">6.6 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter07/index.html">Chapter 7</a>
	      <ul>
                <li><a href="../chapter07/0701.html">7.1 Testing Hypothesis for a Population Mean</a></li>
                <li><a href="../chapter07/0702.html">7.2 Testing Hypothesis for a Population Variance</a></li>
                <li><a href="../chapter07/0703.html">7.3 Testing Hypothesis for a Population Proportion</a></li>
                <li><a href="../chapter07/0704.html">7.4 Testing Hypothesis with α and β simultaneously</a></li>
                <li><a href="../chapter07/0704.html">&nbsp;&nbsp;7.4.1 Type 2 Error and Power of a Test</a></li>
                <li><a href="../chapter07/0704.html">&nbsp;&nbsp;7.4.2 Testing Hypothesis with α and β</a></li>
                <li><a href="../chapter07/0705.html">7.5 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter08/index.html">Chapter 8</a>
	      <ul>
                <li><a href="../chapter08/080101.html">8.1 Testing Hypothesis for Two Population Means</a></li>
                <li><a href="../chapter08/080101.html">&nbsp;&nbsp;8.1.1 Two Independent Samples</a></li>
                <li><a href="../chapter08/080102.html">&nbsp;&nbsp;8.1.2 Paired Sample</a></li>
                <li><a href="../chapter08/0802.html">8.2 Testing Hypothesis for Two Population Variances</a></li>
                <li><a href="../chapter08/0803.html">8.3 Testing Hypothesis for Two Population Proportions</a></li>
                <li><a href="../chapter08/0804.html">8.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter09/index.html">Chapter 9</a>
	      <ul>
                <li><a href="../chapter09/0901.html">9.1 Analysis of Variance for Experiments of Single Factor</a></li>
                <li><a href="../chapter09/090101.html">&nbsp;&nbsp;9.1.1 Multiple Comparison</a></li>
                <li><a href="../chapter09/090101.html">&nbsp;&nbsp;9.1.2 Residual Analysis</a></li>
                <li><a href="../chapter09/0902.html">9.2 Design of Experiments for Sampling</a></li>
                <li><a href="../chapter09/0902.html">&nbsp;&nbsp;9.2.1 Completely Randomized Design</a></li>
                <li><a href="../chapter09/0902.html">&nbsp;&nbsp;9.2.2 Randomized Block Design</a></li>
                <li><a href="../chapter09/0903.html">9.3 Analysis of Variance for Experiments of Two Factors</a></li>
                <li><a href="../chapter09/0904.html">9.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter10/index.html">Chapter 10</a>
	      <ul>
                <li><a href="../chapter10/1001.html">10.1 Nonparametric Test for the Location Parameter of Single Population  </a></li>
                <li><a href="../chapter10/1001.html">&nbsp;&nbsp;10.1.1 Sign Test</a></li>
                <li><a href="../chapter10/100102.html">&nbsp;&nbsp;10.1.2 Wilcoxon Signed Rank Sum Test</a></li>
                <li><a href="../chapter10/1002.html">10.2 Nonparametric Test for Location Parameters of Two Populations</a></li>
                <li><a href="../chapter10/1002.html">&nbsp;&nbsp;10.2.1 Independent Samples: Wilcoxon Rank Sum Test</a></li>
                <li><a href="../chapter10/100202.html">&nbsp;&nbsp;10.2.2 Paired Samples: Wilcoxon Signed Rank Sum Test</a></li>
                <li><a href="../chapter10/1003.html">10.3 Nonparametric Test for Location Parameters of Several Populations</a></li>
                <li><a href="../chapter10/1003.html">&nbsp;&nbsp;10.3.1 Completely Randomized Design: Kruskal-Wallis Test</a></li>
                <li><a href="../chapter10/100302.html">&nbsp;&nbsp;10.3.2 Randomized Block Design: Friedman Test</a></li>
                <li><a href="../chapter10/1004.html">10.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter11/index.html">Chapter 11</a>
	      <ul>
                <li><a href="../chapter11/1101.html">11.1 Goodness of Fit Test</a></li>
                <li><a href="../chapter11/1101.html">&nbsp;&nbsp;11.1.1 Goodness of Fit Test for Categorical Distribution</a></li>
                <li><a href="../chapter11/110102.html">&nbsp;&nbsp;11.1.2 Goodness of Fit Test for Continuous Distribution</a></li>
                <li><a href="../chapter11/1102.html">11.2 Testing Hypothesis for Contingency Table</a></li>
                <li><a href="../chapter11/1102.html">&nbsp;&nbsp;11.2.1 Independence Test</a></li>
                <li><a href="../chapter11/110202.html">&nbsp;&nbsp;11.2.2 Homogeneity Test</a></li>
                <li><a href="../chapter11/1103.html">11.3 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter12/index.html">Chapter 12</a>
	      <ul>
                <li><a href="../chapter12/1201.html">12.1 Correlation Analysis</a></li>
                <li><a href="../chapter12/1202.html">12.2 Simple Linear Regression Analysis</a></li>
                <li><a href="../chapter12/1203.html">12.3 Multiple Linear Regression Analysis</a></li>
                <li><a href="../chapter12/1204.html">12.4 Exercise</a></li>
	      </ul>
	    </li>
	    <li><a href="../chapter13/index.html">Chapter 13</a>
	      <ul>
                <li><a href="../chapter13/1301.html">13.1 What is Time Series Analysis?</a></li>
                <li><a href="../chapter13/1302.html">13.2 Smoothing of Time Series</a></li>
                <li><a href="../chapter13/1303.html">13.3 Transformation of Time Series</a></li>
                <li><a href="../chapter13/1304.html">13.4 Regression Model and Forecasting</a></li>
                <li><a href="../chapter13/1305.html">13.5 Exponential Smoothing Model and Forecasting</a></li>
                <li><a href="../chapter13/1306.html">13.6 Seasonal Model and Forecasting</a></li>
                <li><a href="../chapter13/1307.html">13.7 Exercise</a></li>
	      </ul>
	    </li>

	  </ul>
	</li>
      </ul>
    </div>
  </div>
</div>

<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

  <!--***********************************************************************-->
  <h2>Chapter 9. Testing Hypothesis for Several Population Means</h2> 
  <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(92)">&#10094; &nbsp;&nbsp;<b>Previous</b></button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(96)"><b>Next</b>&nbsp;&nbsp; &#10095;</button>
  <p>
  <h3>9.2 Design of Experiments for Sampling</h3>
  <p>
  <h6>
      <a href="0902.pdf" target="_blank"><u>[presentation]</u></a>&nbsp;&nbsp;&nbsp;
      <a href="https://youtu.be/wj_uwiO1JVg" target="_blank"><u>[video]</u></a>
  </h6>
  <p>

    <div class="mainTable">
       Data such as English scores by the grade in [Example 9.1.1] are not so difficult to collect samples from each of 
       the grade population. However, obtaining samples through experiments such as engineering, medicine, or 
       agriculture are often difficult to collect a large number of samples due to the influence of many other external 
       factors, and should be very cautious about sampling. This section discusses how to design experiments for 
       collecting small number of data from experiments. 
    <div class="mainTable">
       
  <h4>9.2.1 Completely Randomized Design</h4> 
    <p>
    <div class="mainTable">
      In order to identify the differences accurately that may exist among each level of a factor, you should design 
      experiments such as little influence from other factors. One method to do this is to make the whole experiments 
      random. For example, consider experiments to compare a fuel mileage per one liter of gasoline for three types of cars A, B and C. 
      We want to measure the fuel mileage for five different cars of each type. One driver may try to drive all 15 
      cars. However, if only five cars can be measured per day, the measurement will take place over a total of three 
      days. In this case, changes in daily weather, wind speed and wind direction can influence the fuel mileage which 
      makes it a question of which car should be measured for fuel mileage on each day. 
      <p>
      If five drivers (1, 2, 3, 4, 5) plan to drive the car to measure the fuel mileage of all cars a day, the fuel 
      mileage of the car may be affected by the driver. One solution would be to allocate 15 cars randomly to five 
      drivers and then to randomize the sequence of experiments as well. For example, each car is numbered from 1 to 15 
      and then, the experiment of the fuel mileage is conducted in the order of numbers that come out using drawing a 
      random number. Such an experiment would reduce the likelihood of differences caused by external factors such as 
      the driver, daily wind speed and wind direction, because randomized experiments make all external factors equally 
      affecting the all observed measurement values. This method of experiments is called a <b>completely randomized 
      design</b> of experiments. Table 9.2.1 shows an example allocation of experiments by this method. Symbols A, B and C 
      represent the three types of cars.
      <p>
        <div class="textLeft"> Table 9.2.1 Example of completely randomized design of experiments</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:100px">Driver</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th>
         </tr>
         <tr> <td class="tdCenter">Car Type     </td>  <td class="tdCenter">B</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">A</td> </tr>
         <tr> <td class="tdCenter">             </td>  <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">A</td> <td class="tdCenter">A</td> <td class="tdCenter">C</td> </tr>
         <tr> <td class="tdCenter">             </td>  <td class="tdCenter">C</td> <td class="tdCenter">B</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> </tr>
      </table>
      <p>
      In general, in order to achieve the purpose of the analysis of variance, it is necessary to plan experiments 
      thoroughly in advance for obtaining data properly. The completely randomized design method explained as above is 
      studied in detail at the Design of Experiments area in Statistics. From the standpoint of the experimental 
      design, the one-way analysis of variance technique is called an analysis of the single factor design.
    </div>
    <p>

 
  <h4>9.2.2 Randomized Block Design</h4>
    <p>
    <div class="mainTable">
      In the experiments of completely randomized design for measuring the fuel mileage explained in the previous 
      section, 15 cars were randomly allocated to five drivers. However, one example allocation as inTable 9.2.1 shows 
      a problem of this completely randomized design. For example, Driver 1 will only experiment with B and C types of 
      cars and Driver 3 will only experiment A and B types of cars so that the variable between drivers will not be 
      averaged in the test. Thus, if there is a significant variation between drivers for measuring the fuel mileage, 
      the error term of the analysis of variance may not be a simple experimental error. In order to eliminate this 
      problem, each driver may be required to experiment with each type of the car at least once which is known as a 
      <b>randomized block design</b>. Table 9.2.2 shows an example of possible allocation in this case. In this table, the 
      values in parentheses are the values of the observed fuel mileage.
      <p>
       <div class="textLeft"> Table 9.2.2  Example of randomized block design</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:130px">Driver</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th>
         </tr>
         <tr> <td class="tdCenter">Car Type     </td>  <td class="tdCenter">A(22.4)</td> <td class="tdCenter">B(12.6)</td> <td class="tdCenter">C(18.7)</td> <td class="tdCenter">A(21.1)</td> <td class="tdCenter">A(24.5)</td> </tr>
         <tr> <td class="tdCenter">(gas mileage)</td>  <td class="tdCenter">C(20.2)</td> <td class="tdCenter">C(15.2)</td> <td class="tdCenter">A(19.7)</td> <td class="tdCenter">B(17.8)</td> <td class="tdCenter">C(23.8)</td> </tr>
         <tr> <td class="tdCenter">             </td>  <td class="tdCenter">B(16.3)</td> <td class="tdCenter">A(16.1)</td> <td class="tdCenter">B(15.9)</td> <td class="tdCenter">C(18.9)</td> <td class="tdCenter">B(21.0)</td> </tr>
      </table>
      <p>
      Table 9.2.2 shows that the total observed values are divided into five groups by driver, called <b>blocks</b> so that 
      they have the same characteristics. The variable representing blocks, such as the driver, is referred to as a 
      block variable. A block variable is considered generally if experimental results are influenced significantly by 
      this variable which is different from the factor. For example, when examining the yield resulting from rice 
      variety, if the fields of the rice paddy used in the experiment do not have the same fertility, divide the fields 
      into several blocks which have the same fertility and then all varieties of rice are planted in each block of the 
      rice paddy. This would eliminate the influence of the rice paddy which have different fertility and would allow 
      for a more accurate examination of the differences in yield between rice varieties.
      <p>
      Statistical model of the randomized block design with \(b\) blocks can be represented as follows:
      $$
        Y_{ij} = \mu + \alpha_i + B_j + \epsilon_{ij}, \quad i=1,2, ... ,k, \; j=1,2, ... ,b
      $$
      In this equation, \(B_j\) is the effect of \(j^{th}\) level of the block variable to the response variable. In the randomized 
      block design, the variation resulting from the difference between levels of the block variable can be separated 
      from the error term of the variation of the factor independently. In the randomized block design, the total 
      variation is divided into as follows:
      $$
        Y_{ij} - {\overline Y}_{\cdot \cdot} = (Y_{ij} - {\overline Y}_{i \cdot} - {\overline Y}_{\cdot j} + {\overline Y}_{\cdot \cdot}) + ({\overline Y}_{i \cdot} - {\overline Y}_{\cdot \cdot}) +({\overline Y}_{\cdot j} - {\overline Y}_{\cdot \cdot})
      $$    
      If you square both sides of the equation above and then combine for all \(i\) and \(j\), you can obtain 
      several sums of squares as in the one-way analysis of variance as follows: 
      <p>
      <b>Total sum of squares</b> : <br>
      <b>SST</b> = \(\sum_{i=1}^{k} \sum_{j=1}^{b} ( Y_{ij} - {\overline Y}_{\cdot \cdot} )^2 \) , 
         &nbsp;&nbsp; degrees of freedom ; \(bk - 1\) 
      <p>
      <b>Error sum of squares</b> : <br>
      <b>SSE</b> = \(\sum_{i=1}^{k} \sum_{j=1}^{b} ( {Y}_{ij} - {\overline Y}_{i \cdot} - {\overline Y}_{\cdot j} + {\overline Y}_{\cdot \cdot})^2 \) , 
         &nbsp;&nbsp; degrees of freedom ; \((b-1)(k-1)\) 
      <p>
      <b>Treatment sum of squares</b> : <br>
      <b>SSTr</b> = \(\sum_{i=1}^{k} \sum_{j=1}^{b} ( {\overline Y}_{i \cdot} - {\overline Y}_{\cdot \cdot} )^2 \)
         = \(b\sum_{i=1}^{k} ( {\overline Y}_{i \cdot} - {\overline Y}_{\cdot \cdot} )^2 \) ,
         &nbsp;&nbsp; degrees of freedom ; \(k - 1\) 
      <p>
      <b>Block sum of squares</b> : <br>
      <b>SSB</b> = \(\sum_{i=1}^{k} \sum_{j=1}^{b} ( {\overline Y}_{\cdot j} - {\overline Y}_{\cdot \cdot} )^2 \) 
         = \(k \sum_{j=1}^{b} ( {\overline Y}_{\cdot j} - {\overline Y}_{\cdot \cdot} )^2 \),
         &nbsp;&nbsp; degrees of freedom ; \(b - 1\) 
      <p> 
      The following facts are always established in the randomized block design.
    </div>      

    <p>
    <div class="mainTableYellow">
      <b>Division of the sum of squares and degrees of freedom
        <p>
         Sum of squares :    SST  = SSE + SSTr + SSB <br>  
         Degrees of freedom : \(bk -1 = (b-1)(k-1) + (k-1) + (b-1) \)
      </b>
    </div>
      
    <p>  
    <div class="mainTable">
      Table 9.2.3 shows the ANOVA table of the randomized block design. In this ANOVA table, if you combine the sum of 
      squares and degrees of freedom of the block variable and the error variation, it becomes the sum of squares and 
      degrees of freedom of the error term in the one-way ANOVA table 9.1.3.
           <p>
             <div class="textLeft">Table 9.2.3  Analysis of Variance Table of the randomized block design</div>
           <p>
             <table style="width:600px"> 
                <tr> 
                  <th>Variation</th>
                  <th>Sum of Squares</th>
                  <th>Degree of freedom</th>
                  <th>Mean Squares</th>
                  <th>F value</th>
                </tr>
                <tr> 
                  <td class="tdCenter">Treatment</td>
                  <td class="tdCenter">SSTr</td>
                  <td class="tdCenter">\(k-1\)</td>
                  <td class="tdCenter">MSTr=\(\frac{SSTr}{k-1}\)</td>
                  <td class="tdCenter">\(F_0 = \frac{MSTr}{MSE}\)</td>
                </tr>
                <tr> 
                  <td class="tdCenter">Block</td>
                  <td class="tdCenter">SSB</td>
                  <td class="tdCenter">\(b-1\)</td>
                  <td class="tdCenter">MSB=\(\frac{SSB}{b-1}\)</td>
                  <td class="tdCenter"></td>
                </tr>
                <tr> 
                  <td class="tdCenter">Error</td>
                  <td class="tdCenter">SSE</td>
                  <td class="tdCenter">\((b-1)(k-1)\)</td>
                  <td class="tdCenter">MSE=\(\frac{SSE}{(b-1)(k-1)}\)</td>
                  <td class="tdCenter"></td>
                </tr>
                <tr> 
                  <td class="tdCenter">Total</td>
                  <td class="tdCenter">SST</td>
                  <td class="tdCenter">\(bk-1\)</td>
                  <td class="tdCenter"></td>
                  <td class="tdCenter"></td>
                </tr>
             </table>
           <p>
      In the randomized block design, the entire experiments are not randomized unlike the completely randomized 
      design, but only the experiments in each block are randomized. 
      <p>
      Another important thing to note in the randomized block design is that, although the variation of the block 
      variable was separated from the error variation, the main objective is to test the difference between levels of a 
      factor as in the one-way analysis of variance. The test for differences between the levels of the block variable 
      is not important, because the block variable is used to reduce the error variation and to make the test for 
      differences between the levels of the factor more accurate. 
      <p>
      In addition, the error mean square (MSE) does not always decrease, because  although the block variation is 
      separated from the error variation of the one-way analysis of variance, the degrees of freedom are also reduced.
    </div>
       
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p>
      <b>Example 9.2.1</b>
      Table 9.2.4 is the rearrangement of the fuel mileage data in Table 9.2.2 measured by five drivers and car types.
      <p>
        <div class="textLeft">Table 9.2.4  Fuel mileage data by five drivers and three car types</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:100px">Driver</th> <th>1</th> <th>2</th> <th>3</th> <th>4</th> <th>5</th> <th>Average(\(\overline y_{i \cdot}\))</th>
         </tr>
         <tr> <td class="tdCenter">Car Type A</td>  <td class="tdCenter">22.4</td> <td class="tdCenter">16.1</td> <td class="tdCenter">19.7</td> <td class="tdCenter">21.1</td> <td class="tdCenter">24.5</td> <td class="tdCenter">20.76</td> </tr>
         <tr> <td class="tdCenter">Car Type B</td>  <td class="tdCenter">16.3</td> <td class="tdCenter">12.6</td> <td class="tdCenter">15.9</td> <td class="tdCenter">17.8</td> <td class="tdCenter">21.0</td> <td class="tdCenter">16.72</td> </tr>
         <tr> <td class="tdCenter">Car Type C</td>  <td class="tdCenter">20.2</td> <td class="tdCenter">15.2</td> <td class="tdCenter">18.7</td> <td class="tdCenter">18.9</td> <td class="tdCenter">23.8</td> <td class="tdCenter">19.36</td> </tr>
         <tr> <td class="tdCenter">Average(\(\overline y_{\cdot j}\))</td>  <td class="tdCenter">19.63</td> <td class="tdCenter">14.63</td> <td class="tdCenter">18.10</td> <td class="tdCenter">19.27</td> <td class="tdCenter">23.10</td> <td class="tdCenter">18.947</td> </tr>
      </table>
        <div class="figText">[Ex] ⇨ eBook ⇨ EX090201_GasMilage.csv</div>
      <p>
      <div class="textL20M20">
        1) Assuming that this data have been measured by the completely randomized design, use 『eStat』 to do the 
           analysis of variance whether the three car types have the same fuel mileage.
      </div>
      <div class="textL20M20">      
        2) Assuming that this data have been measured by the randomized block design, use 『eStat』 to do the analysis of 
           variance whether the three car types have the same fuel mileage.
      </div>
      <p>
      <b>Answer</b>
      <p>
      <div class="textL20M20">      
        1) In 『eStat』, enter data as shown in &lt;Figure 9.2.1&gt; and click the icon of analysis of variance . Select 
           'Analysis Var' as Miles and 'By Group' as Car in the variable selection box, then the confidence interval graph 
           for each type of cars will appear such as &lt;Figure 9.2.2&gt;.
        <p>
        <table class="width:650px">
          <tr>
            <td>
              <input class="qrBtn" type="image" src="../../QR/EX090201.svg" onclick="window.open(addrStr[28])">
            </td>
            <td>
              <img class="imgFig600400" src="../Figure/Fig090201.png">
              <div class="figText">&lt;Figure 9.2.1&gt; Data input for randomized block design for 『eStat』 ANOVA</div>
            </td>
          </tr>
        </table>
        <p>
          <img class="imgFig600400" src="../Figure/Fig090202.svg">
          <div class="figText">&lt;Figure 9.2.2&gt; Dot graph and 95% confidence interval for population mean of each car type</div>
        <p>
      </div>
      <div class="textL20">      
        Click the [ANOVA F-test] button in the option below the graph to reveal the ANOVA graph as in &lt;Figure 
        9.2.3&gt; and the ANOVA table as in &lt;Figure 9.2.4&gt;. The result of the ANOVA is that there is no difference 
        in fuel mileage between the cars of each company. The same is true for the multiple comparison tests in 
        &lt;Figure 9.2.5&gt;.
        <p>
          <img class="imgFig600400" src="../Figure/Fig090203.svg">
          <div class="figText">&lt;Figure 9.2.3&gt; ANOVA of gas milage</div>
        <p>
          <img class="imgFig600400" src="../Figure/Fig090204.png">
          <div class="figText">&lt;Figure 9.2.4&gt; ANOVA table of gas milage</div>
        <p>
          <img class="imgFig600400" src="../Figure/Fig090205.png">
          <div class="figText">&lt;Figure 9.2.5&gt; Multiple comparisons by car</div>
      </div>
      <p>
      <div class="textL20M20">      
        2) If this data have been extracted using the randomized block design, the block sum of squares will be separated 
           from the error sum of squares. Adding Driver variable to 'by Group' in the variable selection box of 『eStat』 will 
           give you a scatter plot of driver-specific fuel mileage for each car type as shown in &lt;Figure 9.2.6&gt;. This 
           scatter plot shows a significant difference in fuel mileage per driver.     
        <p>
          <img class="imgFig600400" src="../Figure/Fig090206.svg">
          <div class="figText">&lt;Figure 9.2.6&gt; Fuel mileages for each driver</div>
        <p>
      </div>      
      <div class="textL20">    
        Click the [ANOVA F-Test] button in the options window below the graph to reveal the two-way mean table 
        shown in &lt;Figure 9.2.7&gt; and the ANOVA table shown in &lt;Figure 9.2.8&gt;. This ANOVA table 
        clearly shows a decrease in error sum of squares and reduces significantly the mean squares of errors. 
        This is due to the large variation between drivers being separated from the error variation. 
        Factor B (driver) represents the block sum of squares separated from error term. The \(p\)-value shows 
        that, the block (driver) effect is statistically significant. The \(\small F\) value for the hypothesis
        \(\small H_0 : \alpha_1 = \alpha_2 = \alpha_3 = 0\)  of fuel mileage by Factor A (car type) is 43.447 
        and is greater than \(\small F_{2,8,0.05}\) = 4.46, so you can reject the \(\small H_0\) at the significance 
        level of 0.05. Consequently, significant differences in fuel mileages between car types can be found 
        by removing the variation of the block in the error term.
        <p>
          <img class="imgFig600400" src="../Figure/Fig090207.png">
          <div class="figText">&lt;Figure 9.2.7&gt; Two-way mean table by car and driver<br>
             (There is no standard deviation of single data and denoted as NaN)
          </div>
        <p>
          <img class="imgFig600400" src="../Figure/Fig090208.png">
          <div class="figText">&lt;Figure 9.2.8&gt; ANOVA table for randomized block design</div>
        <p>
        In average, car type A has the best fuel mileage than other car types. In order to examine more about the 
        differences between car types, the multiple comparison test in the previous section can be applied. 
        In this example, you can use one HSD value for all mean comparisons, because the number of repetitions
        at each level is the same. 
        <p>
         \(\quad \small  HSD = q_{3,8; 0.05} \sqrt {\frac{MSE}{r}} = (4.041) \sqrt{\frac{0.484}{5}} \) = 1.257
        <p>
        Therefore, there is a significant difference in fuel mileage between all three types of cars, since the 
        differences between the mean values (4.04, 1.40, 2.64) are all greater than the critical value of 1.257. 
        <p>
        The same analysis of randomized design can be done using 『eStatU』 by following data input and clicking [Execute] button..
      </div>
      <p>
      <!---   ************ html for ANOVA - RBD ************  ---->
      <p>
      <b>[<span data-msgid="Testing Hypothesis ANOVA"></span> - <span data-msgid="RBD"></span>]</b>
      <p>
         <input class="qrBtn" type="image" src="../../QR/eStatU900_TestANOVA_RBD.svg" onclick="window.open(addrStr[172])">
      <p>
      <button type="button" id="erase" style="width:100px;"><b>New Data</b></button>
      <p>
      <table style="width:700px;">
        <tr>
	    <td><b><span data-msgid="Hypothesis">Hypothesis</span></b></td>
            <td colspan="4"><span class="fontmath">H<sub>o</sub> : &nbsp; &mu;<sub>1</sub> = &mu;<sub>2</sub> = ... = &mu;<sub>k</sub></span>
            </td>
        </tr>
        <tr>
            <td></td>
	    <td colspan="4"><span class="fontmath">
                H<sub>1</sub> : 
                <span data-msgid="At least one pair">At least one pair of population means is not equal</span>
              </span> 
            </td>
        </tr>
        <tr>
            <td><b><span data-msgid="Test Type">Test Type</span></b></td>
            <td colspan="4"><span class="fontmath" data-msgid="F-test">F-test</span> (ANOVA)</td>
        </tr>
        <tr>
            <td><b><span data-msgid="Sample Data">Sample Data</span></b></td>
            <td colspan="4"><span class="fontguide" >(<span data-msgid="Treatment">Treatment </span> 3 ≤ k ≤ 8)</span> </td>
        </tr>
        <tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 1</td>
	  <td><input type="text" size=60 id="data1"></td>
	  <td>&nbsp; x&#772;<sub>1⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar1"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 2</td>
	  <td><input type="text" size=60 id="data2"></td>
	  <td>&nbsp; x&#772;<sub>2⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar2"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 3</td>
	  <td><input type="text" size=60 id="data3"></td>
	  <td>&nbsp; x&#772;<sub>3⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar3"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 4</td>
	  <td><input type="text" size=60 id="data4"></td>
	  <td>&nbsp; x&#772;<sub>4⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar4"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 5</td>
	  <td><input type="text" size=60 id="data5"></td>
	  <td>&nbsp; x&#772;<sub>5⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar5"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 6</td>
	  <td><input type="text" size=60 id="data6"></td>
	  <td>&nbsp; x&#772;<sub>6⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar6"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 7</td>
	  <td><input type="text" size=60 id="data7"></td>
	  <td>&nbsp; x&#772;<sub>7⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar7"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 8</td>
	  <td><input type="text" size=60 id="data8"></td>
	  <td>&nbsp; x&#772;<sub>8⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar8"></td>
	</tr>
	<tr>
	  <td style="text-align:right;"><span data-msgid="Block">Block</span> 9</td>
	  <td><input type="text" size=60 id="data9"></td>
	  <td>&nbsp; x&#772;<sub>9⋅</sub></td>
	  <td><input type="text" class="textarea" size=6 id="rowbar9"></td>
	</tr>
      </table>
      <table style="width:700px;">
	<tr>  
          <td>Treatment mean</td>
	  <td>&nbsp; x&#772;<sub>⋅1</sub> <input type="text" class="textarea" size=5 id="colbar1"></td>
	  <td>&nbsp; x&#772;<sub>⋅2</sub> <input type="text" class="textarea" size=5 id="colbar2"></td>
	  <td>&nbsp; x&#772;<sub>⋅3</sub> <input type="text" class="textarea" size=5 id="colbar3"></td>
	  <td>&nbsp; x&#772;<sub>⋅4</sub> <input type="text" class="textarea" size=5 id="colbar4"></td>
	</tr>
	<tr>  
          <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
	  <td>&nbsp; x&#772;<sub>⋅5</sub> <input type="text" class="textarea" size=5 id="colbar5"></td>
	  <td>&nbsp; x&#772;<sub>⋅6</sub> <input type="text" class="textarea" size=5 id="colbar6"></td>
	  <td>&nbsp; x&#772;<sub>⋅7</sub> <input type="text" class="textarea" size=5 id="colbar7"></td>
	  <td>&nbsp; x&#772;<sub>⋅8</sub> <input type="text" class="textarea" size=5 id="colbar8"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅</sub> <input type="text" class="textarea" size=5 id="totbar"></td>
	</tr>
      </table>
      <p>
          <div class="figText">&lt;Figure 9.2.7&gt; Data input of Randomized Block Design - Fuel mileages for each driver</div>
      <p>
      <button type="button" id="execute" >
        <span data-msgid="Execute">Execute</span>
      </button> 
      <p>
      <svg id="chart" width="600" height="400" style="border-style:solid;"> </svg>
      <p>
      <button type="button" id="saveGraphU" >
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      &nbsp;
      <button type="button" id="saveTable"><span class="tooltiptext" data-msgid="Table Save">Table Save</span></button>
      <p>
      <div> 
        <div id="screenTable">
          <div id="loc">
          </div>
        </div>
      </div>
      <p>
    </div>
    <p>
    <!---   ************ script for ANOVA - RBD ************  ---->
<script>
      setLanguage('en');
      var chart = d3.select("#chart");
      var svgWidth    = 600;
      var svgHeight   = 400;
      var margin      = {top: 80, bottom: 60, left: 80, right: 80};
      var graphWidth  = svgWidth - margin.left - margin.right;
      var graphHeight = svgHeight - margin.top - margin.bottom;
      var i, j, dft, dfb, dfw, dfe, info, alpha, pvalue;
      var ntot, sst, ssb, ssw, sse, msb, msw, temp; 
      var dmax, dmin;
      var maxk     = 8;
      var maxblock = 9;
      var nblock, nkk;
      var totbar;
      var y      = new Array(maxblock);
      var kobs   = new Array(maxblock+1);
      var rowbar = new Array(maxblock);
      var colbar = new Array(maxk);
      var treat  = new Array(maxk);
      var block  = new Array(maxblock);
      for (j=0; j<maxk; j++)     treat[j] = svgStr[102][langNum]  + " " + (j+1).toString(); // Treatment
      for (i=0; i<maxblock; i++) block[i] = svgStrU[134][langNum] + " " + (i+1).toString(); // block

      document.getElementById("rowbar1").disabled = true;  
      document.getElementById("rowbar2").disabled = true;  
      document.getElementById("rowbar3").disabled = true;  
      document.getElementById("rowbar4").disabled = true;  
      document.getElementById("rowbar5").disabled = true;  
      document.getElementById("rowbar6").disabled = true;  
      document.getElementById("rowbar7").disabled = true;  
      document.getElementById("rowbar8").disabled = true;  
      document.getElementById("rowbar9").disabled = true;  
      document.getElementById("colbar1").disabled = true;  
      document.getElementById("colbar2").disabled = true;  
      document.getElementById("colbar3").disabled = true;  
      document.getElementById("colbar4").disabled = true;  
      document.getElementById("colbar5").disabled = true;  
      document.getElementById("colbar6").disabled = true;  
      document.getElementById("colbar7").disabled = true;  
      document.getElementById("colbar8").disabled = true;  
      document.getElementById("totbar").disabled  = true;  

      // input data control ===================================================
      d3.select("#data1").on("input", function() {
        stat = simplestat("#data1");  
        y[0] = data;
        if (document.getElementById("data1").value == "") kobs[1] = 0;
        else kobs[1] = y[0].length;
      });
      d3.select("#data2").on("input", function() {
        stat = simplestat("#data2");  
        y[1] = data; 
        if (document.getElementById("data2").value == "") kobs[2] = 0;
        else kobs[2] = y[1].length;
      });
      d3.select("#data3").on("input", function() {
        stat = simplestat("#data3");  
        y[2] = data;
        if (document.getElementById("data3").value == "") kobs[3] = 0;
        else kobs[3] = y[2].length;
      });
      d3.select("#data4").on("input", function() {
        stat = simplestat("#data4");  
        y[3] = data;
        if (document.getElementById("data4").value == "") kobs[4] = 0;
        else kobs[4] = y[3].length;
      });
      d3.select("#data5").on("input", function() {
        stat = simplestat("#data5");  
        y[4] = data;
        if (document.getElementById("data5").value == "") kobs[5] = 0;
        else kobs[5] = y[4].length;
      });
      d3.select("#data6").on("input", function() {
        stat = simplestat("#data6");  
        y[5] = data;
        if (document.getElementById("data6").value == "") kobs[5] = 0;
        else kobs[6] = y[5].length;
      });
      d3.select("#data7").on("input", function() {
        stat = simplestat("#data7");  
        y[6] = data;
        if (document.getElementById("data7").value == "") kobs[5] = 0;
        else kobs[7] = y[6].length;
      });
      d3.select("#data8").on("input", function() {
        stat = simplestat("#data8");  
        y[7] = data;
        if (document.getElementById("data8").value == "") kobs[5] = 0;
        else kobs[8] = y[7].length;
      });
      d3.select("#data9").on("input", function() {
        stat = simplestat("#data9");  
        y[8] = data;
        if (document.getElementById("data9").value == "") kobs[5] = 0;
        else kobs[9] = y[8].length;
      });

      // init example
      document.getElementById("data1").value = "22.4, 16.3, 20.2";
        stat = simplestat("#data1");  
        y[0] = data;
        kobs[1] = y[0].length;
      document.getElementById("data2").value = "16.1, 12.6, 15.2";
        stat = simplestat("#data2");  
        y[1] = data;
        kobs[2] = y[1].length;
      document.getElementById("data3").value = "19.7, 15.9, 18.7";
        stat = simplestat("#data3");  
        y[2] = data;
        kobs[3] = y[2].length;
      document.getElementById("data4").value = "21.1 , 17.8, 18.9";
        stat = simplestat("#data4");  
        y[3] = data;
        kobs[4] = y[3].length;
      document.getElementById("data5").value = "24.5, 21.0, 23.8";
        stat = simplestat("#data5");  
        y[4] = data;
        kobs[5] = y[4].length;

      // erase Data and Graph
      d3.select("#erase").on("click",function() {
        chart.selectAll("*").remove();
        document.getElementById("data1").value  = "";
        document.getElementById("data2").value  = "";
        document.getElementById("data3").value  = "";
        document.getElementById("data4").value  = "";
        document.getElementById("data5").value  = "";
        document.getElementById("data6").value  = "";
        document.getElementById("data7").value  = "";
        document.getElementById("data8").value  = "";
        document.getElementById("data9").value  = "";
        document.getElementById("rowbar1").value  = "";  
        document.getElementById("rowbar2").value  = "";  
        document.getElementById("rowbar3").value  = "";  
        document.getElementById("rowbar4").value  = "";  
        document.getElementById("rowbar5").value  = "";  
        document.getElementById("rowbar6").value  = "";  
        document.getElementById("rowbar7").value  = "";  
        document.getElementById("rowbar8").value  = "";  
        document.getElementById("rowbar9").value  = "";  
        document.getElementById("colbar1").value  = "";  
        document.getElementById("colbar2").value  = "";  
        document.getElementById("colbar3").value  = "";  
        document.getElementById("colbar4").value  = "";  
        document.getElementById("colbar5").value  = "";  
        document.getElementById("colbar6").value  = "";  
        document.getElementById("colbar7").value  = "";  
        document.getElementById("colbar8").value  = "";  
        document.getElementById("totbar").disabled  = true;  
      })

      // Testing Hypothesis ===========================================================
      d3.select("#execute").on("click",function() {
        // check data, nblock and nkk (treatment)
        nblock = 0;
        for (i=1; i<=5; i++) {
          if(kobs[i] > 0) nblock++;
        }
        for (i=2; i<=nblock; i++) if (kobs[i] != kobs[i-1]) {alert("number of data in each block should be equal"); return;}
        nkk = kobs[1];
        if (nkk < 3 || nkk > 8) {  // wrong input k
          chart.append("text").attr("class","mean").attr("x", 150).attr("y", 100)
             .text("No input or wrong input of data!!   Try again.").style("stroke","red");
          return;
        }
        // RBD
        testingRBD();
        drawGraphRBD(nkk, nblock);
        // 1원분산분석표 그리기
        AnovaTableRBD();
      })

      // svg Graph Save
      d3.select("#saveGraphU").on("click", function() {
        var svg = d3.select("#chart");
        var width = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(svg.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

      // save Table
      d3.select("#saveTable").on("click", function() {
        head = '<html><head><meta charset="UTF-8"></head><body>';
        tail = '</body></html>';
        saveAs(new Blob([head + d3.select("#screenTable").html() + tail]), "eStatULog.html");
      });

// ANOVA RBD
function testingRBD() {
          // test statistics
          ntot = nkk * nblock;
          dft  = ntot - 1;
          dfb  = nkk - 1;
          dfw  = nblock - 1;
          dfe  = dfb * dfw;
          // total row, col mean
          dmax   = -99999999;
          dmin   =  99999999;
          totbar = 0;
          for (j=0; j<nkk; j++) colbar[j] = 0;
          for (i=0; i<nblock; i++) {
            rowbar[i] = 0;
            for (j=0; j<nkk; j++) {
              rowbar[i] += y[i][j];
              colbar[j] += y[i][j];
              if (y[i][j] > dmax) dmax = y[i][j];
              if (y[i][j] < dmin) dmin = y[i][j];
            }
            totbar += rowbar[i];
          }
         for (j=0; j<nkk; j++) {
            colbar[j] /= nblock;
            str = "colbar"+(j+1);
            document.getElementById(str).value = f3(colbar[j]);
          }
          for (i=0; i<nblock; i++) {
            rowbar[i] /= nkk;
            str = "rowbar"+(i+1);
            document.getElementById(str).value = f3(rowbar[i]);
          }
          totbar = totbar / ntot;
          document.getElementById("totbar").value = f3(totbar);
          // total sum of squares
          sst = 0;
          for (i=0; i<nblock; i++) {
            for (j=0; j<nkk; j++) {
              temp = y[i][j] - totbar
              sst += temp*temp;
            }
          }
          // between & block sum of squares
          ssb = 0;
          for (j=0; j<nkk; j++) {
            temp = colbar[j]-totbar;
            ssb += nblock*temp*temp;
          }
          ssw = 0;
          for (i=0; i<nblock; i++) {
            temp = rowbar[i]-totbar;
            ssw += nkk*temp*temp;
          }
          sse = sst - ssb - ssw;
          // mean squares       
          msb  = ssb / dfb;
          msw  = ssw / dfw;
          mse  = sse / dfe;
          // pvalue
          fobs = msb / mse;
          pvalue = 1 - f_cdf(fobs, dfb, dfe, info);
}  
// 분산분석표 --------------------------------------------------------------------------------------------------
function AnovaTableRBD() {
    var screenTable = document.getElementById("screenTable");
    var table = document.createElement('table');
    loc.appendChild(table);

    var i, j, temp, info, str;
    var row;
    var num = 0;
    var ncol = 6;
    var k = 0;

    var cell = new Array(ncol);
    table.style.fontSize = "13px";
    table.style.cellPadding = "10";

    row = table.insertRow(num);
    for (j = 0; j < ncol; j++) cell[j] = row.insertCell(j);
    cell[0].innerHTML = "<h3>" + svgStr[15][langNum] + "</h3>"; // "분산분석표";
    cell[0].style.textAlign = "center";
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.border = "1px solid black";
    //          row.style.height ="40px";
    cell[0].style.width = "130px";

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "center";
        cell[j].style.backgroundColor = "#eee";
        cell[j].style.border = "1px solid black";
        cell[j].style.width = "80px";
    }
    cell[0].innerHTML = svgStr[72][langNum]; // "요인";
    cell[1].innerHTML = svgStr[73][langNum]; // "제곱합";  
    cell[2].innerHTML = svgStr[74][langNum]; // "자유도";  
    cell[3].innerHTML = svgStr[75][langNum]; // "평균제곱";  
    cell[4].innerHTML = "F " + svgStr[69][langNum]; // "F관찰값";   
    cell[5].innerHTML = "p " + svgStr[69][langNum]; // "p-값 =";    

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[102][langNum]; // "처리";
    cell[1].innerHTML = f3(ssb).toString();
    cell[2].innerHTML = f0(dfb).toString();
    cell[3].innerHTML = f3(msb).toString();
    cell[4].innerHTML = f3(fobs).toString();
    if (pvalue < 0.0001) str = " < 0.0001";
    else str = f4(pvalue).toString();
    cell[5].innerHTML = str;

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStrU[134][langNum]; // block
    cell[1].innerHTML = f3(ssw).toString();
    cell[2].innerHTML = f0(dfw).toString();
    cell[3].innerHTML = f3(msw).toString();

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[77][langNum]; // "오차";
    cell[1].innerHTML = f3(sse).toString();
    cell[2].innerHTML = f0(dfe).toString();
    cell[3].innerHTML = f3(mse).toString();

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.border = "1px solid black";
        cell[j].style.textAlign = "right";
        cell[j].style.backgroundColor = "#eee";
    }
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[78][langNum]; // "전체";
    cell[1].innerHTML = f3(sst).toString();
    cell[2].innerHTML = f0(dft).toString();

    // 다음 표와의 공백을 위한 것
    row = table.insertRow(++num);
    row.style.height = "20px";

}
// RBD 그래프 함수 ----------------------------------------------------------------------------------
function drawGraphRBD(nkk, nblock) {
    chart.selectAll("*").remove();
    var i, j, k, m, p, tobs, temp, tlabel, df, info;
    var sx, sy, tx, ty, x1, x2, y1, y2;
    var radius = 4;

    // 점그래프 전체 데이터 최소 최대 계산
    temp    = (dmax - dmin) / 10; // (전체 최대 - 최소) / 10  : 그래프 양 끝쪽 buffer 
    gymin   = dmin - temp;
    gymax   = dmax + temp;
    gyrange = gymax - gymin;
    gxmin   = 0.5;
    gxmax   = nkk + 0.5;
    gxrange = gxmax - gxmin;

    // 그림 캔버스
    chart.append("rect")
        .style("fill", "white")
        .style("stroke", "black")
        .attr("x", margin.left)
        .attr("y", margin.top)
        .attr("width", graphWidth)
        .attr("height", graphHeight)
    // 전체 제목
    str = svgStr[5][langNum] + " by " + svgStrU[134][langNum];
    chart.append("text")
        .attr("x", margin.left + graphWidth/2)
        .attr("y", margin.top / 2 + 10)
        .style("font-size", "17px")
        .style("font-family", "sans-seirf")
        .style("stroke", "black")
        .style("text-anchor", "middle")
        .text(str) // line graph by block
    // X축 제목
    chart.append("text")
        .attr("x", margin.left + graphWidth/2)
        .attr("y", margin.top + graphHeight + margin.bottom / 2 + 10)
        .style("font-size", "14px")
        .style("font-family", "sans-seirf")
        .style("stroke", "black")
        .style("text-anchor", "middle")
        .text(svgStr[102][langNum]) // Treatment
    // Y축
    var yScale = d3.scaleLinear().domain([gymin, gymax]).range([graphHeight, 0]);
    chart.append("g")
        .attr("class", "axis")
        .attr("transform", "translate(" + margin.left + ", " + margin.top + ") ")
        .call(d3.axisLeft(yScale))

    // 범례
    for (i = 0; i < nblock; i++) {
       chart.append("text")
            .style("font-size", "12px")
            .style("font-family", "sans-seirf")
            .style("text-anchor", "start")
            .style("stroke", myColor[i+1])
            .attr("x", margin.left + graphWidth + 10)
            .attr("y", margin.top + (i+1) * 20)
            .text(block[i]);
    }
    // Treatment
    ty = margin.top + graphHeight + 15;
    for (j = 0; j < nkk; j++) {
        str = (j+1).toString();
        tx  = margin.left + graphWidth * (j+1-gxmin) / gxrange;
        chart.append("text")
            .style("font-size", "10px")
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "middle")
            .attr("x", tx)
            .attr("y", ty)
            .text(treat[j]);
    }

    // 블록별 line 그래프
    for (i = 0; i < nblock; i++) {
       sx = margin.left + graphWidth*(1-gxmin)/gxrange;
       sy = margin.top+graphHeight - graphHeight*(y[i][0]-gymin)/gyrange;        
       chart.append("circle")
            .attr("class", "circle")
            .style("fill", myColor[i+1])
            .attr("cx", sx)
            .attr("cy", sy)
            .attr("r", radius)
        // 점그리기 선그리기
        for (j = 1; j < nkk; j++) {
           tx = margin.left + graphWidth*(j+1-gxmin)/gxrange;
           ty = margin.top + graphHeight - graphHeight * (y[i][j] - gymin) / gyrange;
           chart.append("circle")
                .attr("class", "circle")
                .style("fill", myColor[i+1])
                .attr("cx", tx)
                .attr("cy", ty)
                .attr("r", radius)
           chart.append("line")
                .attr("x1", sx)
                .attr("y1", sy)
                .attr("x2", tx)
                .attr("y2", ty)
                .style("stroke", myColor[i+1])
                .style("stroke-width", "3px")
           sx = tx;
           sy = ty;
        } // endof j
    } // endof i

}

</script>
       
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table class="width:650px">
        <tr>
          <td>
            <input class="qrBtn" type="image" src="../../QR/eStatU900_TestANOVA_RBD.svg" onclick="window.open(addrStr[172])">
          </td>
          <td>
            <b>Practice 9.2.1</b> 
            The following is the result of an agronomist's survey of the yield of four varieties of wheat by using the 
            randomized block design of the three cultivated areas (block). Test whether the mean yields of the four wheats 
            are the same or not with 5% significance level.
            <p>
            <table style="width:400px"> 
              <tr> 
                <th style="width:100px"></th> <th>Area 1</th> <th>Area 2</th> <th>Area 3</th> </th>
              </tr>
              <tr> <td>Wheat Type A</td>  <td>50</td> <td>60</td> <td>56</td> </tr>
              <tr> <td>Wheat Type B</td>  <td>59</td> <td>52</td> <td>51</td> </tr>
              <tr> <td>Wheat Type C</td>  <td>55</td> <td>55</td> <td>52</td> </tr>
              <tr> <td>Wheat Type D</td>  <td>58</td> <td>58</td> <td>55</td> </tr>
            </table>
            <p>
            <div class="figText">[Ex] ⇨ eBook ⇨ PR090201_WheatAreaYield.csv</div>
          </td>
        </tr>
      </table>
    </div>
    <!------------------------------------------------------------------------------------------------->
    <p>

  <h4>9.2.3 Latin Square Design</h4>
    <p>
    <div class="mainTable">
      In the experiments of randomized block design for measuring the fuel mileage explained in the previous section, 
      there is one extraneous block variation which is the driver. If the researcher feels that there is an additional 
      variation such as road type, there are two identifiable sources of extraneous block variations, i.e., 
      two block variables. In this case, the researcher needs a design that will isolate and remove both sources 
      of block variables from residual. The Latin square design is such a design.
      <p>
      In the Latin square design, we assign one sources of extraneous variation to the columns of the square and 
      the second source of extraneous variation to the rows of the square. We then assign the treatments in such a way 
      that each treatment occurs one and only once in each row and each column. The number of rows, the number of columns, 
      and the number of treatments, therefore, are all equal.
      <p>
      Table 9.2.5 shows a 3 × 3 typical Latin squares with three rows, three columns and three treatments designated by capital letters A, B, C.
      <p>
      <div class="textLeft"> Table 9.2.5  Fuel mileage data by three drivers and three road types of three car types (A, B, C)</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:130px"></th> <th>Column 1 (Road 1)</th> <th>Column 2 (Road 2</th> <th>Column 3 (Road 3)</th>
         </tr>
         <tr> <td class="tdCenter">Row 1 (Driver 1)</td>  <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> </tr>
         <tr> <td class="tdCenter">Row 2 (Driver 2)</td>  <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">A</td> </tr>
         <tr> <td class="tdCenter">Row 3 (Driver 3)</td>  <td class="tdCenter">C</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> </tr>
      </table>
      <p>
      Table 9.2.6 shows a 4 × 4 typical Latin squares with four rows, four columns and four treatments designated by capital letters A, B, C, D.
      <p>
      <div class="textLeft"> Table 9.2.6  Fuel mileage data by four drivers and four road types of four car types (A, B, C, D)</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:130px"></th> <th>Column 1 (Road 1)</th> <th>Column 2 (Road 2</th> <th>Column 3 (Road 3)</th> <th>Column 4 (Road 4)</th>
         </tr>
         <tr> <td class="tdCenter">Row 1 (Driver 1)</td>  <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">D</td> </tr>
         <tr> <td class="tdCenter">Row 2 (Driver 2)</td>  <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">D</td> <td class="tdCenter">A</td> </tr>
         <tr> <td class="tdCenter">Row 3 (Driver 3)</td>  <td class="tdCenter">C</td> <td class="tdCenter">D</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> </tr>
         <tr> <td class="tdCenter">Row 4 (Driver 4)</td>  <td class="tdCenter">D</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> </tr>
      </table>
      <p>
      In the Latin square design, treatments can be assigned randomly in such a way that the car type occurs one and only once 
      in each row and each column. Therefore, there are many possible designs of 3 × 3 and 4 × 4 Latin square. 
      We get randomization in the Latin square by randomly selection a square of the desired dimension from all possible 
      squares of that dimension. One method of doing this is to randomly assign a different treatments to each cell 
      in each column, with the restriction that each treatment must appear one and only once in each row.
      <p>
      Small Latin squares provided only a small number of degrees of freedom for the error mean square. So a minimum size 
      of 5 × 5 is usually recommended.
      <p>
      The hypothesis of Latin square design with \(r\) treatments is as follows: 
      <p>
      Null Hypothesis        \(\qquad \qquad H  _{0} : \mu_{1} = \mu_{2} = \cdots = \mu_{r} \) <br>
      Alternative Hypothesis \(\quad \; H_{1} : \) At least one pair of \(\mu_i \) is not equal.
      <p>
      Statistical model of the \(r × r \) Latin square design with \(r\) treatments can be represented as follows:
      $$
        Y_{ijk} = \mu + \alpha_i + \beta_j + \gamma_k + \epsilon_{ijk}, \quad i=1,2, ... ,r, \; j=1,2, ... ,r, \; k=1,2, ... , r
      $$
      Here \(\mu_i = \mu + \alpha_i\). In this equation, \(\alpha_i\) is the effect of \(i^{th}\) level of the row block variable to the response variable and  
      \(\beta_j\) is the effect of \(j^{th}\) level of the column block variable to the response variable. 
      \(\gamma_k\) is the effect of \(k^{th}\) level of the response variable.
      <p> 
      Notation for row averages, column averages and treatment averages of \(r × r \) Latin squre data are as follows;
      <p>
      <div class="textLeft"> Table 9.2.7 Notation for row means, column means and treatment averages of  ×  Latin squre data</div>
      <p>
      <table style="width:600px"> 
         <tr> 
           <th style="width:130px"></th> <th>Column 1 </th> <th>Column 2 </th> <th>\(\cdots \)</th> <th>Column r</th> <th>Row Average</th>
         </tr>
         <tr> <td class="tdCenter">Row 1 </td>      <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter">\({\overline Y}_{ 1 \cdot \cdot} \)</td></tr>
         <tr> <td class="tdCenter">Row 2 </td>      <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter">\({\overline Y}_{ 2 \cdot \cdot} \)</td></tr>
         <tr> <td class="tdCenter">\(\cdots \)</td> <td class="tdCenter">\(\cdots \)</td> <td class="tdCenter">\(Y_{ijk}\)</td> <td class="tdCenter"></td> <td class="tdCenter">\(\cdots \)</td> <td class="tdCenter">\(\cdots \)</td></tr>
         <tr> <td class="tdCenter">Row r </td>      <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter"></td> <td class="tdCenter">\({\overline Y}_{ r \cdot \cdot} \)</td></tr>
         <tr> <td class="tdCenter">Column Average</td> 
              <td class="tdCenter">\({\overline Y}_{ \cdot 1 \cdot} \)</td>
              <td class="tdCenter">\({\overline Y}_{ \cdot 2 \cdot} \)</td> 
              <td class="tdCenter">\(\cdots\)</td>
              <td class="tdCenter">\({\overline Y}_{ \cdot r \cdot} \)</td>
              <td class="tdCenter">\({\overline Y}_{ \cdot \cdot \cdot} \)</td>
         </tr>
      </table>
      <p>
      <table style="width:600px"> 
         <tr> <td class="tdCenter">Treatment Average</td> 
              <td class="tdCenter">\({\overline Y}_{ \cdot \cdot 1} \)</td>
              <td class="tdCenter">\({\overline Y}_{ \cdot \cdot 2} \)</td> 
              <td class="tdCenter">\(\cdots\)</td>
              <td class="tdCenter">\({\overline Y}_{ \cdot \cdot r} \)</td>
         </tr>
      </table>
      <p>
      In the Latin square design, the variation resulting from the difference between levels of two block variables can be separated from the error term of the variation of the factor independently. In the Latin square design, the total variation is divided into as follows:
      $$
        Y_{ijk} - {\overline Y}_{\cdot \cdot \cdot} = (Y_{ijk} - {\overline Y}_{i \cdot \cdot} - {\overline Y}_{\cdot j \cdot} - {\overline Y}_{\cdot \cdot k} + 2 {\overline Y}_{\cdot \cdot \cdot}) + ({\overline Y}_{i \cdot \cdot} - {\overline Y}_{\cdot \cdot \cdot}) + ({\overline Y}_{\cdot j \cdot} - {\overline Y}_{\cdot \cdot \cdot}) + ({\overline Y}_{\cdot \cdot k} - {\overline Y}_{\cdot \cdot \cdot})
      $$    
      If you square both sides of the equation above and then combine for all \(i , j\) and \(k\), you can obtain 
      the following sums of squares: 
      <p>
      <b>Total sum of squares</b> : <br>
      <b>SST</b> = \(\sum_{i=1}^{r} \sum_{j=1}^{r} \sum_{k=1}^{r} ( Y_{ijk} - {\overline Y}_{\cdot \cdot \cdot} )^2 \) , 
         &nbsp;&nbsp; degrees of freedom ; \(r^3 - 1\) 
      <p>
      <b>Error sum of squares</b> : <br>
      <b>SSE</b> = \(\sum_{i=1}^{r} \sum_{j=1}^{r} \sum_{k=1}^{r} ( {Y}_{ijk} - {\overline Y}_{i \cdot \cdot} - {\overline Y}_{\cdot j \cdot}  - {\overline Y}_{\cdot \cdot k} + 2 {\overline Y}_{\cdot \cdot \cdot})^2 \) , 
         &nbsp;&nbsp; degrees of freedom ; \(r^2 -3r + 2\) 
      <p>
      <b>Row sum of squares</b> : <br>
      <b>SSTr</b> = \(\sum_{i=1}^{r} \sum_{j=1}^{r} \sum_{k=1}^{r} ( {\overline Y}_{i \cdot \cdot} - {\overline Y}_{\cdot \cdot \cdot} )^2 \)
         &nbsp;&nbsp; degrees of freedom ; \(r - 1\) 
      <p>
      <b>Column sum of squares</b> : <br>
      <b>SSB</b> = \(\sum_{i=1}^{r} \sum_{j=1}^{r} \sum_{k=1}^{r} ( {\overline Y}_{\cdot j \cdot} - {\overline Y}_{\cdot \cdot \cdot} )^2 \) 
         &nbsp;&nbsp; degrees of freedom ; \(r - 1\) 
      <p> 
      <b>Treatment sum of squares</b> : <br>
      <b>SSTr</b> = \(\sum_{i=1}^{r} \sum_{j=1}^{r} \sum_{k=1}^{r} ( {\overline Y}_{\cdot \cdot k} - {\overline Y}_{\cdot \cdot \cdot} )^2 \)
         &nbsp;&nbsp; degrees of freedom ; \(r - 1\) 
      <p>
      The following facts are always established in the Latin square design.  
    </div>      
    <p>
    <div class="mainTableYellow">
      <b>Division of the sum of squares and degrees of freedom
        <p>
         Sum of squares :    SST  = SSE + SSR + SSC + SSTr <br>  
         Degrees of freedom : \(r^3 -1 = (r^2 - 3r + 2)  + (r-1) + (r-1) + (r-1) \)
      </b>
    </div>
      
    <p>  
    <div class="mainTable">
      Table 9.2.8 shows the ANOVA table of the Latin squre design. In this ANOVA table, 
      <p>
             <div class="textLeft">Table 9.2.8  Analysis of Variance Table of the Latin square design</div>
           <p>
             <table style="width:600px"> 
                <tr> 
                  <th>Variation</th>
                  <th>Sum of Squares</th>
                  <th>Degree of freedom</th>
                  <th>Mean Squares</th>
                  <th>F value</th>
                </tr>
                <tr> 
                  <td class="tdCenter">Treatment</td>
                  <td class="tdCenter">SSTr</td>
                  <td class="tdCenter">\(r-1\)</td>
                  <td class="tdCenter">MSTr=\(\frac{SSTr}{r-1}\)</td>
                  <td class="tdCenter">\(F_0 = \frac{MSTr}{MSE}\)</td>
                </tr>
                <tr> 
                  <td class="tdCenter">Row</td>
                  <td class="tdCenter">SSR</td>
                  <td class="tdCenter">\(r-1\)</td>
                  <td class="tdCenter">MSR=\(\frac{SSB}{r-1}\)</td>
                  <td class="tdCenter"></td>
                </tr>
                <tr> 
                  <td class="tdCenter">Columnk</td>
                  <td class="tdCenter">SSC</td>
                  <td class="tdCenter">\(r-1\)</td>
                  <td class="tdCenter">MSC=\(\frac{SSB}{r-1}\)</td>
                  <td class="tdCenter"></td>
                </tr>
                <tr> 
                  <td class="tdCenter">Error</td>
                  <td class="tdCenter">SSE</td>
                  <td class="tdCenter">\(r^2 - 3r + 2\)</td>
                  <td class="tdCenter">MSE=\(\frac{SSE}{(r^2 - 3r + 2)}\)</td>
                  <td class="tdCenter"></td>
                </tr>
                <tr> 
                  <td class="tdCenter">Total</td>
                  <td class="tdCenter">SST</td>
                  <td class="tdCenter">\(r^3 -1\)</td>
                  <td class="tdCenter"></td>
                  <td class="tdCenter"></td>
                </tr>
             </table>
    </div>
    <p>
    <p>
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p>
      <b>Example 9.2.2</b>
      Table 9.2.9 is the fuel mileage data of four car types (A, B, C, D) measured by four drivers and four road types with Latin square design.
      <p>
        <div class="textLeft">Table 9.2.9  Fuel mileage data by four drivers and four road types of four car types (A, B, C, D)</div>
      <table style="width:700px"> 
         <tr> 
           <th style="width:120px"></th> <th>Column 1 (Road 1)</th> <th>Column 2 (Road 2)</th> <th>Column 3 (Road 3)</th> <th>Column 4 (Road 4)</th> </th>
         </tr>
         <tr> <td class="tdCenter">Row 1 (Driver 1)</td>  <td class="tdCenter">A (22)</td> <td class="tdCenter">B (16)</td> <td class="tdCenter">C (19)</td> <td class="tdCenter">D (21)</td> </tr>
         <tr> <td class="tdCenter">Row 2 (Driver 2)</td>  <td class="tdCenter">B (24)</td> <td class="tdCenter">C (16)</td> <td class="tdCenter">D (12)</td> <td class="tdCenter">A (15)</td> </tr>
         <tr> <td class="tdCenter">Row 3 (Driver 3)</td>  <td class="tdCenter">C (17)</td> <td class="tdCenter">D (21)</td> <td class="tdCenter">A (20)</td> <td class="tdCenter">B (15)</td> </tr>
         <tr> <td class="tdCenter">Row 4 (Driver 4)</td>  <td class="tdCenter">D (18)</td> <td class="tdCenter">A (18)</td> <td class="tdCenter">B (23)</td> <td class="tdCenter">C (22)</td> </tr>
      </table>
      <p>
      Use 『eStatU』 to do the analysis of variance whether the four car types have the same fuel mileage.
      <p>
      <b>Answer</b>
      <p>
        In 『eStatU』, click [Testing Hypothesis ANOVA – Latin Square Design], select the number of treatment 
        r = 4 and enter data as shown in &lt;Figure 9.2.10&gt;.
      <p>
      <!---   ************ html for ANOVA ************  ---->
      <p>
      <b>[<span data-msgid="Testing Hypothesis ANOVA"></span> - <span data-msgid="Latin"></span>]</b>
      <p>
         <input class="qrBtn" type="image" src="../../QR/eStatU900_TestANOVA_Latin.svg" onclick="window.open(addrStr[173])">
      <p>
      <button type="button" id="eraseL" style="width:100px;"><b>New Data</b></button>
      <p>
      <table style="width:700px;">
        <tr>
	  <td><b><span data-msgid="Hypothesis">Hypothesis</span></b></td>
	  <td><span class="fontmath">H<sub>o</sub> : &nbsp; &mu;<sub>1</sub> = &mu;<sub>2</sub> = ... = &mu;<sub>k</sub></span>
          </td>
        </tr>
        <tr>
          <td></td>
	  <td><span class="fontmath">
                H<sub>1</sub> : 
                <span data-msgid="At least one pair">At least one pair of population means is not equal</span>
              </span> 
          </td>
        </tr>
        <tr>
          <td><b><span data-msgid="Test Type">Test Type</span></b></td>
          <td><span class="fontmath" data-msgid="F-test">F-test</span> (ANOVA)</td>
        </tr>
        <tr>
          <td><b><span data-msgid="Sample Data">Sample Data</span></b></td>
          <td><span data-msgid="Treatment"></span> r = <input type="number" style="text-align:center;" size=1 min=3 max=6 value=4 id="nkkL" onchange="showValueAlpha(this.value)">
             (<span class="fontguide" id="tkk"></span>)      
          </td>
        </tr>
      </table>
      <table class="data">
	<tr>
          <td></td>
	  <td></td> <td><span data-msgid="Column"></span>1</td>
	  <td></td> <td><span data-msgid="Column"></span>2</td>
	  <td></td> <td><span data-msgid="Column"></span>3</td>
	  <td></td> <td><span data-msgid="Column"></span>4</td>
	  <td></td> <td><span data-msgid="Column"></span>5</td>
	  <td></td> <td><span data-msgid="Column"></span>6</td>
	  <td></td> <td><span data-msgid="Row"></span></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>1</td>
	  <td style="text-align: right;"><span id="t11">A</span></td> <td><input type="text" style="text-align:center;" size=3 value="22" id="data11"></td>
	  <td style="text-align: right;"><span id="t12">B</span></td> <td><input type="text" style="text-align:center;" size=3 value="16" id="data12"></td>
	  <td style="text-align: right;"><span id="t13">C</span></td> <td><input type="text" style="text-align:center;" size=3 value="19" id="data13"></td>
	  <td style="text-align: right;"><span id="t14">D</span></td> <td><input type="text" style="text-align:center;" size=3 value="21" id="data14"></td>
	  <td style="text-align: right;"><span id="t15"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data15"></td>
	  <td style="text-align: right;"><span id="t16"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data16"></td>
	  <td>&nbsp; x&#772;<sub>1⋅⋅</sub></td>   <td><input type="text" style="text-align:center;" size=3 id="rowbarL1"></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>2</td>
	  <td style="text-align: right;"><span id="t21">B</span></td> <td><input type="text" style="text-align:center;" size=3 value="24" id="data21"></td>
	  <td style="text-align: right;"><span id="t22">C</span></td> <td><input type="text" style="text-align:center;" size=3 value="16" id="data22"></td>
	  <td style="text-align: right;"><span id="t23">D</span></td> <td><input type="text" style="text-align:center;" size=3 value="12" id="data23"></td>
	  <td style="text-align: right;"><span id="t24">A</span></td> <td><input type="text" style="text-align:center;" size=3 value="15" id="data24"></td>
	  <td style="text-align: right;"><span id="t25"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data25"></td>
	  <td style="text-align: right;"><span id="t26"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data26"></td>
	  <td>&nbsp; x&#772;<sub>2⋅⋅</sub></td> <td><input type="text" style="text-align:center;" size=3 id="rowbarL2"></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>3</td>
	  <td style="text-align: right;"><span id="t31">C</span></td> <td><input type="text" style="text-align:center;" size=3 value="17" id="data31"></td>
	  <td style="text-align: right;"><span id="t32">D</span></td> <td><input type="text" style="text-align:center;" size=3 value="21" id="data32"></td>
	  <td style="text-align: right;"><span id="t33">A</span></td> <td><input type="text" style="text-align:center;" size=3 value="20" id="data33"></td>
	  <td style="text-align: right;"><span id="t34">B</span></td> <td><input type="text" style="text-align:center;" size=3 value="15" id="data34"></td>
	  <td style="text-align: right;"><span id="t35"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data35"></td>
	  <td style="text-align: right;"><span id="t36"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data36"></td>
	  <td>&nbsp; x&#772;<sub>3⋅⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="rowbarL3"></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>4</td>
	  <td style="text-align: right;"><span id="t41">D</span></td> <td><input type="text" style="text-align:center;" size=3 value="18" id="data41"></td>
	  <td style="text-align: right;"><span id="t42">A</span></td> <td><input type="text" style="text-align:center;" size=3 value="18" id="data42"></td>
	  <td style="text-align: right;"><span id="t43">B</span></td> <td><input type="text" style="text-align:center;" size=3 value="23" id="data43"></td>
	  <td style="text-align: right;"><span id="t44">C</span></td> <td><input type="text" style="text-align:center;" size=3 value="22" id="data44"></td>
	  <td style="text-align: right;"><span id="t45"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data45"></td>
	  <td style="text-align: right;"><span id="t46"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data46"></td>
	  <td>&nbsp; x&#772;<sub>4⋅⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="rowbarL4"></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>5</td>
	  <td style="text-align: right;"><span id="t51"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data51"></td>
	  <td style="text-align: right;"><span id="t52"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data52"></td>
	  <td style="text-align: right;"><span id="t53"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data53"></td>
	  <td style="text-align: right;"><span id="t54"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data54"></td>
	  <td style="text-align: right;"><span id="t55"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data55"></td>
	  <td style="text-align: right;"><span id="t56"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data56"></td>
	  <td>&nbsp; x&#772;<sub>5⋅⋅</sub></td> <td><input type="text" style="text-align:center;" size=3 id="rowbarL5"></td>
	</tr>
	<tr>
	  <td><span data-msgid="Row">Row</span>6</td>
	  <td style="text-align: right;"><span id="t61"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data61"></td>
	  <td style="text-align: right;"><span id="t62"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data62"></td>
	  <td style="text-align: right;"><span id="t63"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data63"></td>
	  <td style="text-align: right;"><span id="t64"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data64"></td>
	  <td style="text-align: right;"><span id="t65"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data65"></td>
	  <td style="text-align: right;"><span id="t66"></span></td> <td><input type="text" style="text-align:center;" size=3 id="data66"></td>
	  <td>&nbsp; x&#772;<sub>6⋅⋅</sub></td> <td><input type="text" style="text-align:center;" size=3 id="rowbarL6"></td>
	</tr>
	<tr>  
          <td><span data-msgid="Column"></span></td>
	  <td>&nbsp; x&#772;<sub>⋅1⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL1"></td>
	  <td>&nbsp; x&#772;<sub>⋅2⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL2"></td>
	  <td>&nbsp; x&#772;<sub>⋅3⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL3"></td>
	  <td>&nbsp; x&#772;<sub>⋅4⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL4"></td>
	  <td>&nbsp; x&#772;<sub>⋅5⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL5"></td>
	  <td>&nbsp; x&#772;<sub>⋅6⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="colbarL6"></td>
	</tr>
	<tr>  
	  <td><span data-msgid="Treatment"></span></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅1</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar1"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅2</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar2"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅3</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar3"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅4</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar4"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅5</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar5"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅6</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="trtbar6"></td>
	  <td>&nbsp; x&#772;<sub>⋅⋅⋅</sub> </td> <td><input type="text" style="text-align:center;" size=3 id="totbarL"></td>
	</tr>
      </table>   
           <div class="figText">&lt;Figure 9.2.10&gt; Data input for Latin square design in 『eStatU』</div>
      <p>
        Click [Execute] button to show Dot graph by car type in Latin square design as &lt;Figure 9.2.11&gt; and 
        ANOVA table as in &lt;Figure 9.2.12&gt;. The dot graph and result of the ANOVA is that there is no difference 
        in fuel mileage between the car types. 
      <p>
      <button type="button" id="executeL" >
        <span data-msgid="Execute">Execute</span>
      </button> 
      <p>
      <svg id="chartL" width="600" height="400" style="border-style:solid;"> </svg>  
      <p>
      <button type="button" id="saveGraphL" >
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      &nbsp;
      <button type="button" id="saveTableL"><span class="tooltiptext" data-msgid="Table Save">Table Save</span></button>
      <p>
          <div class="figText">&lt;Figure 9.2.11&gt; Dot graph by car type in Latin square design</div>
      <p>
      <div> 
        <div id="screenTableL">
          <div id="locL">
          </div>
        </div>
      </div>
      <p>
          <div class="figText">&lt;Figure 9.2.12&gt; ANOVA table of Latin square design</div>
      <p>
    </div>
    <p>
    <!---- script for Latin ---------------------------------------------------------->
<script>
      setLanguage('en');
      var chartL = d3.select("#chartL");
      var i, j, k, dfR, dfC, dfTr, dfeL, info, pvalueL;
      var sstL, ssR, ssC, ssTr, sseL, msR, msC, msTr, mseL, temp, str; 
      var dmaxL, dminL;
      var maxkL  = 6;
      var maxrow = 6;
      var maxcol = 6;
      var nrow, ncol, nkkL, ntotL;
      var yL = new Array(maxrow);
      for (j=0; j<maxcol; j++) yL[j] = new Array(maxcol); 
      var data = new Array(maxkL);
      var indx = new Array(maxkL);
      var nobs = new Array(maxkL);
      for (k=0; k<maxkL; k++) {
        data[k] = new Array(maxkL); 
        indx[k] = new Array(maxkL); 
      }
      var totbarL;
      var rowbarL = new Array(maxrow);
      var colbarL = new Array(maxcol);
      var trtbarL = new Array(maxkL);
      var treatL  = new Array(maxkL);
      var tchar  = ["A", "B", "C", "D", "E", "F"];
      for (j=0; j<maxkL; j++) treatL[j] = svgStr[102][langNum]  + " " + (j+1).toString(); // Treatment

      document.getElementById("rowbarL1").disabled = true;  
      document.getElementById("rowbarL2").disabled = true;  
      document.getElementById("rowbarL3").disabled = true;  
      document.getElementById("rowbarL4").disabled = true;  
      document.getElementById("rowbarL5").disabled = true;  
      document.getElementById("rowbarL6").disabled = true;  
      document.getElementById("colbarL1").disabled = true;  
      document.getElementById("colbarL2").disabled = true;  
      document.getElementById("colbarL3").disabled = true;  
      document.getElementById("colbarL4").disabled = true;  
      document.getElementById("colbarL5").disabled = true;  
      document.getElementById("colbarL6").disabled = true;  
      document.getElementById("trtbar1").disabled = true;  
      document.getElementById("trtbar2").disabled = true;  
      document.getElementById("trtbar3").disabled = true;  
      document.getElementById("trtbar4").disabled = true;  
      document.getElementById("trtbar5").disabled = true;  
      document.getElementById("trtbar6").disabled = true;  
      document.getElementById("totbarL").disabled  = true; 
      // 초기 nkkL = 4 
      nkkL  = 4;
      nrow = nkkL;
      ncol = nkkL;
      document.getElementById("tkk").innerHTML  = "A, B, C, D";  
      for (i=0; i<maxrow; i++) {
        for (j=0; j<maxcol; j++) {
          if (i >= nkkL || j >= nkkL) {
            str = "t"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).innerHTML = "";  
            str = "data"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).disabled = true;  
          }
        }
      }

      // erase Data and Graph
      d3.select("#eraseL").on("click",function() {
        chartL.selectAll("*").remove();
        document.getElementById("rowbarL1").value = ""; 
        document.getElementById("rowbarL2").value = ""; 
        document.getElementById("rowbarL3").value = ""; 
        document.getElementById("rowbarL4").value = ""; 
        document.getElementById("rowbarL5").value = ""; 
        document.getElementById("rowbarL6").value = ""; 
        document.getElementById("colbarL1").value = ""; 
        document.getElementById("colbarL2").value = ""; 
        document.getElementById("colbarL3").value = ""; 
        document.getElementById("colbarL4").value = ""; 
        document.getElementById("colbarL5").value = ""; 
        document.getElementById("colbarL6").value = ""; 
        document.getElementById("trtbar1").value = ""; 
        document.getElementById("trtbar2").value = ""; 
        document.getElementById("trtbar3").value = ""; 
        document.getElementById("trtbar4").value = ""; 
        document.getElementById("trtbar5").value = ""; 
        document.getElementById("trtbar6").value = ""; 
        document.getElementById("totbarL").disabled  = true; 
      })

      // Testing Hypothesis ===========================================================
      d3.select("#executeL").on("click",function() {
        chartL.selectAll("*").remove();
        nkkL  = parseFloat(document.getElementById("nkkL").value);
        nrow = nkkL;
        ncol = nkkL;      
        // check data, nrow and nkkL (treatment)
        for (i=0; i<nkkL; i++) {
          for (j=0; j<nkkL; j++) {
            str = "data"+(i+1).toString()+(j+1).toString();
            yL[i][j] = parseFloat(document.getElementById(str).value); 
            if ( isNaN(yL[i][j]) )  {  // wrong input 
              chartL.append("text").attr("class","mean").attr("x", 150).attr("y", 100)
                   .text("No input or wrong input of data!!   Try again.")
                   .style("stroke","red");
              return;
            }
          }
        }
        // Latin Square
        testingLatin();
        drawGraphLatin(nkkL);
        // 1원분산분석표 그리기
        AnovaTableLatin();
      })

      // svg Graph Save
      d3.select("#saveGraphL").on("click", function() {
        var svg = d3.select("#chartL");
        var width = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(svg.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

      // save Table
      d3.select("#saveTableL").on("click", function() {
        head = '<html><head><meta charset="UTF-8"></head><body>';
        tail = '</body></html>';
        saveAs(new Blob([head + d3.select("#screenTableL").html() + tail]), "eStatULog.html");
      });

// ANOVA Latin Square Design
function testingLatin() {
          // test statistics
          ntotL = nrow * ncol;
          dfR  = nrow - 1;
          dfC  = ncol - 1;
          dfTr = nkkL - 1;
          dfeL  = nkkL*nkkL - 3*nkkL + 2;
          dft  = nkkL * nkkL -1;
          // total row, col mean
          dmaxL   = -99999999;
          dminL   =  99999999;
          totbarL = 0;
          for (j=0; j<ncol; j++) colbarL[j] = 0;
          for (i=0; i<nrow; i++) {
            rowbarL[i] = 0;
            for (j=0; j<ncol; j++) {
              rowbarL[i] += yL[i][j];
              colbarL[j] += yL[i][j];
              if (yL[i][j] > dmaxL) dmaxL = yL[i][j];
              if (yL[i][j] < dminL) dminL = yL[i][j];
            }
            totbarL += rowbarL[i];
          }
          for (j=0; j<ncol; j++) {
            colbarL[j] /= nrow;
            str = "colbarL"+(j+1);
            document.getElementById(str).value = f3(colbarL[j]);
          }
          for (i=0; i<nrow; i++) {
            rowbarL[i] /= ncol;
            str = "rowbarL"+(i+1);
            document.getElementById(str).value = f3(rowbarL[i]);
          }
          totbarL = totbarL / ntotL;
          document.getElementById("totbarL").value = f3(totbarL);
          // total sum of squares
          sstL = 0;
          for (i=0; i<nrow; i++) {
            for (j=0; j<nkkL; j++) {
              temp = yL[i][j] - totbarL
              sstL += temp*temp;
            }
          }
          // row & col sum of squares
          ssR = 0;
          for (i=0; i<nrow; i++) {
            temp = rowbarL[i]-totbarL;
            ssR += nrow*temp*temp;
          }
          ssC = 0;
          for (j=0; j<ncol; j++) {
            temp = colbarL[j]-totbarL;
            ssC += nrow*temp*temp;
          }
          // treatment sum of squares
          for (k=0; k<nkkL; k++) {
            trtbarL[k] = 0;
            nobs[k]   = 0;
          }
          for (i=0; i<nrow; i++) {
            for (j=0; j<ncol; j++) {
              k = (i+j) % nkkL
              data[k][nobs[k]] = yL[i][j];
              indx[k][nobs[k]] = "R"+(i+1).toString()+"C"+(j+1).toString();
              trtbarL[k] += yL[i][j];
              nobs[k]++;
            }
          }
          for (k=0; k<nkkL; k++) {
            trtbarL[k] /= nkkL;
            str = "trtbar"+(k+1);
            document.getElementById(str).value = f3(trtbarL[k]);
          }
          ssTr = 0;
          for (k=0; k<nkkL; k++) {
            temp = trtbarL[k]-totbarL;
            ssTr += nkkL*temp*temp;
          }

          sseL = sstL - ssR - ssC - ssTr;
          // mean squares  
          msTr = ssTr / dfTr     
          msR  = ssR  / dfR;
          msC  = ssC  / dfC;
          mseL  = sseL  / dfeL;
          // pvalueL
          fobs = msTr / mseL;
          pvalueL = 1 - f_cdf(fobs, dfTr, dfeL, info);

}  
// 분산분석표 --------------------------------------------------------------------------------------------------
function AnovaTableLatin() {
    var screenTableL = document.getElementById("screenTableL");
    var table = document.createElement('table');
    locL.appendChild(table);

    var i, j, temp, info, str;
    var row;
    var num = 0;
    var ncol = 6;
    var k = 0;

    var cell = new Array(ncol);
    table.style.fontSize = "13px";
    table.style.cellPadding = "10";

    row = table.insertRow(num);
    for (j = 0; j < ncol; j++) cell[j] = row.insertCell(j);
    cell[0].innerHTML = "<h3>" + svgStr[15][langNum] + "</h3>"; // "분산분석표";
    cell[0].style.textAlign = "center";
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.border = "1px solid black";
    //          row.style.height ="40px";
    cell[0].style.width = "130px";

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "center";
        cell[j].style.backgroundColor = "#eee";
        cell[j].style.border = "1px solid black";
        cell[j].style.width = "80px";
    }
    cell[0].innerHTML = svgStr[72][langNum]; // "요인";
    cell[1].innerHTML = svgStr[73][langNum]; // "제곱합";  
    cell[2].innerHTML = svgStr[74][langNum]; // "자유도";  
    cell[3].innerHTML = svgStr[75][langNum]; // "평균제곱";  
    cell[4].innerHTML = "F " + svgStr[69][langNum]; // "F관찰값";   
    cell[5].innerHTML = "p " + svgStr[69][langNum]; // "p-값 =";    

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[102][langNum]; // "처리";
    cell[1].innerHTML = f3(ssTr).toString();
    cell[2].innerHTML = f0(dfTr).toString();
    cell[3].innerHTML = f3(msTr).toString();
    cell[4].innerHTML = f3(fobs).toString();
    if (pvalueL < 0.0001) str = " < 0.0001";
    else str = f4(pvalueL).toString();
    cell[5].innerHTML = str;

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStrU[32][langNum]; // Row var
    cell[1].innerHTML = f3(ssR).toString();
    cell[2].innerHTML = f0(dfR).toString();
    cell[3].innerHTML = f3(msR).toString();

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStrU[33][langNum]; // column var
    cell[1].innerHTML = f3(ssC).toString();
    cell[2].innerHTML = f0(dfC).toString();
    cell[3].innerHTML = f3(msC).toString();

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.textAlign = "right";
        cell[j].style.border = "1px solid black";
    }
    cell[0].style.backgroundColor = "#eee";
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[77][langNum]; // "오차";
    cell[1].innerHTML = f3(sseL).toString();
    cell[2].innerHTML = f0(dfeL).toString();
    cell[3].innerHTML = f3(mseL).toString();

    row = table.insertRow(++num);
    for (j = 0; j < ncol; j++) {
        cell[j] = row.insertCell(j);
        cell[j].style.border = "1px solid black";
        cell[j].style.textAlign = "right";
        cell[j].style.backgroundColor = "#eee";
    }
    cell[0].style.textAlign = "center";
    cell[0].innerHTML = svgStr[78][langNum]; // "전체";
    cell[1].innerHTML = f3(sstL).toString();
    cell[2].innerHTML = f0(dft).toString();

    // 다음 표와의 공백을 위한 것
    row = table.insertRow(++num);
    row.style.height = "20px";

}
// Latin 그래프 함수 ----------------------------------------------------------------------------------
function drawGraphLatin(nkkL) {
    chartL.selectAll("*").remove();
    var i, j, k, m, p, tobs, temp, tlabel, df, info;
    var sx, sy, tx, ty, x1, x2, y1, y2;
    var radius = 4;

    // 점그래프 전체 데이터 최소 최대 계산
    temp    = (dmaxL - dminL) / 10; // (전체 최대 - 최소) / 10  : 그래프 양 끝쪽 buffer 
    gymin   = dminL - temp;
    gymax   = dmaxL + temp;
    gyrange = gymax - gymin;
    gxmin   = 0.5;
    gxmax   = nkkL + 0.5;
    gxrange = gxmax - gxmin;

    // 그림 캔버스
    chartL.append("rect")
        .style("fill", "white")
        .style("stroke", "black")
        .attr("x", margin.left)
        .attr("y", margin.top)
        .attr("width", graphWidth)
        .attr("height", graphHeight)
    // 전체 제목
    str = svgStr[6][langNum] + " by " + svgStr[102][langNum];
    chartL.append("text")
        .attr("x", margin.left + graphWidth/2)
        .attr("y", margin.top / 2 + 10)
        .style("font-size", "17px")
        .style("font-family", "sans-seirf")
        .style("stroke", "black")
        .style("text-anchor", "middle")
        .text(str) // line graph by block
    // X축 제목
    chartL.append("text")
        .attr("x", margin.left + graphWidth/2)
        .attr("y", margin.top + graphHeight + margin.bottom / 2 + 10)
        .style("font-size", "14px")
        .style("font-family", "sans-seirf")
        .style("stroke", "black")
        .style("text-anchor", "middle")
        .text(svgStr[102][langNum]) // Treatment
    // Y축
    var yScale = d3.scaleLinear().domain([gymin, gymax]).range([graphHeight, 0]);
    chartL.append("g")
        .attr("class", "axis")
        .attr("transform", "translate(" + margin.left + ", " + margin.top + ") ")
        .call(d3.axisLeft(yScale))
    // 범례
    str = "---  " + svgStr[34][langNum];
    chartL.append("text")
         .style("font-size", "12px")
         .style("font-family", "sans-seirf")
         .style("text-anchor", "start")
         .style("stroke", "red")
         .attr("x", margin.left + graphWidth + 10)
         .attr("y", margin.top + 20)
         .text(str);
    // Treatment
    ty = margin.top + graphHeight + 15;
    for (k = 0; k < nkkL; k++) {
        str = (k+1).toString();
        tx  = margin.left + graphWidth * (k+1-gxmin) / gxrange;
        chartL.append("text")
            .style("font-size", "10px")
            .style("font-family", "sans-seirf")
            .style("stroke", myColor[k+1])
            .style("text-anchor", "middle")
            .attr("x", tx)
            .attr("y", ty)
            .text(treatL[k]);
    }
    // 각 treatment의 data 별로 점그래프
    for (k=0; k<nkkL; k++) {
      for (j=0; j<nkkL; j++) {
           tx = margin.left + graphWidth*(k+1-gxmin)/gxrange;
           ty = margin.top + graphHeight - graphHeight * (data[k][j] - gymin) / gyrange;
           chartL.append("circle")
                .attr("class", "circle")
                .style("fill", myColor[k+1])
                .attr("cx", tx)
                .attr("cy", ty)
                .attr("r", "3")
           chartL.append("text")
                .style("font-size", "8px")
                .style("font-family", "sans-seirf")
                .style("text-anchor", "start")
                .style("stroke", myColor[k+1])
                .attr("x", tx+5)
                .attr("y", ty+3)
                .text(indx[k][j]);
       } // endof j
    } // endo of k
    // 점그래프 - 평균 line 그래프
       sx = margin.left + graphWidth*(1-gxmin)/gxrange;
       sy = margin.top+graphHeight - graphHeight * (trtbarL[0] - gymin) / gyrange;        
       chartL.append("circle")
            .attr("class", "circle")
            .style("fill", "red")
            .attr("cx", sx)
            .attr("cy", sy)
            .attr("r", radius)
       // 점그리기 선그리기
       for (j = 1; j < nkkL; j++) {
           tx = margin.left + graphWidth*(j+1-gxmin)/gxrange;
           ty = margin.top + graphHeight - graphHeight * (trtbarL[j] - gymin) / gyrange;
           chartL.append("circle")
                .attr("class", "circle")
                .style("fill", "red")
                .attr("cx", tx)
                .attr("cy", ty)
                .attr("r", radius)
           chartL.append("line")
                .attr("x1", sx)
                .attr("y1", sy)
                .attr("x2", tx)
                .attr("y2", ty)
                .style("stroke", "red")
                .style("stroke-width", "3px")
           sx = tx;
           sy = ty;
       } // endof j
}
// Treatment character 
function showValueAlpha(newValue) {
      nkkL  = parseFloat(document.getElementById("nkkL").value);
      nrow = nkkL;
      ncol = nkkL;
      str  = "A";
      for (k=1; k<nkkL; k++) str = str + "," + tchar[k] ;
      document.getElementById("tkk").innerHTML = str; 

      for (i=0; i<maxrow; i++) {
          for (j=0; j<maxcol; j++) {
            str = "t"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).innerHTML = "";  
            str = "data"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).disabled = false  
          }
      }
      for (i=0; i<nrow; i++) {
          for (j=0; j<ncol; j++) {
            str = "t"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).innerHTML = tchar[(i+j) % nkkL];  
          }
      }
      for (i=0; i<maxrow; i++) {
        for (j=0; j<maxcol; j++) {
          if (i >= nkkL || j >= nkkL) {
            str = "t"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).innerHTML = "";  
            str = "data"+(i+1).toString()+(j+1).toString();
            document.getElementById(str).disabled = true;  
          }
        }
      }

} 

</script>
       
       
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table class="width:650px">
        <tr>
          <td>
              <input class="qrBtn" type="image" src="../../QR/eStatU900_TestANOVA_Latin.svg" onclick="window.open(addrStr[173])">
          </td>
          <td>
            <b>Practice 9.2.2</b> 
            To study the effect of packaging on the sales of a certain cereal, a researcher tries three different packaging methods (treatments) at four different times of the week (columns) in four different supermarket chains (rows). The variable of interest is daily salse. The following table shows the results of the study. Do these data show a significant difference in shoppers’ response to the different packaging methods? Let \(\alpha\) = 0.05.
            <p>
            <table style="width:600px"> 
              <tr> 
                <th style="width:130px">Time of week</th> <th>Column 1 (Day 1)</th> <th>Column 2 (Day 2</th> <th>Column 3 (Day 3)</th> <th>Column 4 (Day 4)</th>
              </tr>
              <tr> <td class="tdCenter">Row 1 (Store 1)</td>  <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">D</td> </tr>
              <tr> <td class="tdCenter">Row 2 (Store 2)</td>  <td class="tdCenter">B</td> <td class="tdCenter">C</td> <td class="tdCenter">D</td> <td class="tdCenter">A</td> </tr>
              <tr> <td class="tdCenter">Row 3 (Store 3)</td>  <td class="tdCenter">C</td> <td class="tdCenter">D</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> </tr>
              <tr> <td class="tdCenter">Row 4 (Store 4)</td>  <td class="tdCenter">D</td> <td class="tdCenter">A</td> <td class="tdCenter">B</td> <td class="tdCenter">C</td> </tr>
           </table>
          </td>
        </tr>
      </table>
    </div>
    <!------------------------------------------------------------------------------------------------->
    <p>


  <div class="mainTablePink">
    <h4>Multiple Choice Exercise</h4>
    <p style="color:blue">*** Choose one answer and click [Submit] button

    <h6 class="textL30M30">9.9 What is the name of variable which effects response variable in the experimental design? </h6>
    <form name="Q9">
      <label><input type="radio" name="item" value="1"> cause element</label><br>
      <label><input type="radio" name="item" value="2"> independent variable</label><br>
      <label><input type="radio" name="item" value="3"> dependent variable</label><br>
      <label><input type="radio" name="item" value="4"> factor</label><br>
      <p>
      <input type="button" value="Submit" onClick="radio(9,9,Q9)"> &nbsp;&nbsp;&nbsp;
      <input type="text" size=15 id="ansQ9">
    </form>

    <h6 class="textL30M30">9.10 In order to compare the fuel mileage of three types of cars, three drivers would like to drive cars, but fuel mileage may be affected by the driver. 
     What is the name of variable like drivers? </h6>
    <form name="Q10">
      <label><input type="radio" name="item" value="1"> block variable</label><br>
      <label><input type="radio" name="item" value="2"> independent variable</label><br>
      <label><input type="radio" name="item" value="3"> dependent variable</label><br>
      <label><input type="radio" name="item" value="4"> factor</label><br>
      <p>
      <input type="button" value="Submit" onClick="radio(9,10,Q10)"> &nbsp;&nbsp;&nbsp;
      <input type="text" size=15 id="ansQ10">
    </form>
    
    <h6 class="textL30M30">9.11 When we compare the fuel mileage of three types of cars, which experimental 
      design is used to reduce the effect of drivers? </h6>
    <form name="Q11">
      <label><input type="radio" name="item" value="1"> completely randomized design</label><br>
      <label><input type="radio" name="item" value="2"> latin square method</label><br>
      <label><input type="radio" name="item" value="3"> two-way ANOVA</label><br>
      <label><input type="radio" name="item" value="4"> randomized block design</label><br>
      <p>
      <input type="button" value="Submit" onClick="radio(9,11,Q11)"> &nbsp;&nbsp;&nbsp;
      <input type="text" size=15 id="ansQ11">
    </form>
  </div>

  <script>
    for (var i=9; i < 11+1; i++) document.getElementById(ansID[i]).disabled = true;
  </script>
  <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(92)">&#10094; &nbsp;&nbsp;<b>Previous</b></button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(96)"><b>Next</b>&nbsp;&nbsp; &#10095;</button>
  <p>

</div>

    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>

</body>
</html>

