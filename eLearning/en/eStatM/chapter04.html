<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <title>Chapter 4</title>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="../../css/ie10-viewport-bug-workaround.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="../../css/dashboard.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <style type="text/css">code{white-space: pre;}</style>
       <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
       <script src="../../js/prism.js"></script>
       <link rel="stylesheet" href="../../css/prism.css">
       <script src="../../js/jquery.min.js"></script>    
       <script type="text/javascript" id="MathJax-script" async
	       src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
       </script>
       <script>
	 $(document).ready(function() {
  	     toc = $("#sidebar > ul > li > ul");
  	     sections = toc.children();   // <li>
  	     for(var i=0; i<sections.length; i++) {
  		 if ($(sections[i]).children().length == 1) { continue; }
  		 var first = sections[i].firstElementChild;  // <a>
  		 var last = sections[i].lastElementChild;
  		 var li = $("<li>");
  		 var details = $("<details>");
  		 var summary = $("<summary>");
  		 $(summary).append(first)
  		 $(details).append(summary);
  		 $(details).append(last);
  		 $(li).append(details);	
  		 $(sections[i]).replaceWith(li);
  	     }
	 });
	 </script>
       <link rel="stylesheet" href="../../css/pandoc.css">
       <script src="../../js/eBook.js"></script>
       <script src="../../../eStat/js/language.js" ></script>   
       <script src="../../../eStat/lib/d3/d3.v4.min.js"></script>   
       <script src="../../../eStat/lib/d3/d3.layout.cloud.js"></script>
       <script src="../../../eStat/lib/DistributionsUtil.js" ></script>
       <script src="../../../eStat/js/eStatU.js"></script>
       <script src="../../../eStat/lib/FileSaver.min.js" ></script>
       <script src="../../../eStat/lib/convertSVG.js"></script>
</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <ul class="nav navbar-nav">
    <li><a class="navbar-brand" href="../../../eStat/index.html" target="_blank">eStat</a></li>
    <li><a class="navbar-brand" href="../../../eStatM/index.html" target="_blank">eStatM</a></li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <div id="sidebar" class="col-sm-3 col-md2 sidebar">
      <ul>
	<li><a href=""></a>
	  <ul>
            <li><a href="../eStatM/index.html">Table of Contents</a></li>
            <li><a href="../eStatM/chapter01.html">1. Statistics</a></li>
            <li><a href="../eStatM/chapter02.html">2. Visualization of Qualitative Data</a></li>
            <li><a href="../eStatM/chapter03.html">3. Visualization of Qunatitative Data</a></li>
            <li><a href="../eStatM/chapter04.html">4. Measure of Central Tendency and Dispersion</a></li>
	  </ul>
	</li>
      </ul>
    </div>
  </div>
</div>


<div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

  <!--***********************************************************************-->
  <h1>Chapter 4. Measure of Central Tendency and Dispersion</h1> 
  <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(143)">&#10094;&#10094; &nbsp;&nbsp;<b>Chapter 3</b></button>
  <p>
  <table>
    <tr>
      <td style="width:300px">
        <h1>&nbsp; üé≤ üéØ ‚öñ Œº œÉ œÅ</h1>
        <h4>
        <a href="#0401"><u>4.1 Measure of Central Tendency ‚Äì Mean and Median</u></a> <p>
        <a href="#0402"><u>4.2 Measure of Dispersion ‚Äì Standard Deviation</u></a> <p>
        <a href="#0403"><u>4.3 Covariance and Correlation Coefficient</u></a> <p>

        <a href="../eStatM/chapter04.pdf" target="_blank"><u>[Chapter 4 pdf]</u></a> 
        </h4>
      </td>
      <td style="width:350px">
        <h1></h1>
        <p>In the case of quantitative data, the central tendency and dispersion of 
           the data are measured and analyzed.
        <p>
           - Central tendency : mean / median <br>
           - Dispersion : variance / standard deviation <br>
        <p>
           Data for two quantitative variables are measured using a covariance and 
           a correlation coefficient.
      </td>
    </tr>
  </table>
      <br>
<!--
  <h6>
      <a href="https://youtu.be/FWZ2gsrYz-w" target="_blank"><u>[video]</u></a>
  </h6>
-->
  <p>

  <h3 id="0401">4.1 Measure of Central Tendency ‚Äì Mean and Median</h3>
  <p>
  <div class="mainTableYellow">
    <table>
      <tr>
        <td style="width:110px">
          <h4>‚≠ê Think</h4>
        </td>
        <td style="width:450px">
          <p>
            <b>The data obtained by taking a sample of 5 middle school students and surveying their weight are as follows:</b> 
          <p>
          <div class="textLeft">(Data 4.1) Weights of five middle school students (kg)</div>
          <table> 
            <tr> 
              <td>
                63  60  65  55  77
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <h4>üíé Explore</h4>
        </td>
        <td>
          <p>
          <b>1) What kind of graph is used to find a representative value of these data?<br>
             2) What would be a representative value for the weight of 5 students? 
          </b>
        </td>
      </tr>
    </table>
  </div>
  <p>

  <div class="mainTable">
      <p>
         The <b>average (or mean)</b> is a measure of central tendency of quantitative 
         data and is widely used as a representative value for the data. The mean is 
         the sum of all data and divided by the number of data, which implies the 
         center of gravity of the data. The mean is expressed as \(\mu\) (read mu), 
         and the mean of (Data 4.1) is obtained as follows:
      $$
         \text{Mean} =  \mu = \frac{63 + 60 + 65 + 55 + 77}{5} = \frac{320}{5} = 64
      $$
         When \(n\) number of data is expressed as \(x_1 , x_2 , ... , x_n \), 
         mean is expressed by the following formula.
      <p>
      $$
        \small \mu = \frac{1}{n} \sum_{i=1}^n x_i 
      $$
      <p>
         In general, the mean is very appropriate as a representative value of the data,
         but when there is a very large or a small value in the data, it is greatly 
         affected by this extreme value. In this case, a median can be used. 
         The <b>median</b> is the value in the middle when the data are sorted in order.
         In (Data 4.1), the number of data is 5 which is an odd number, and the 3rd 
         (\(\frac{n+1}{2}\)) number when data is sorted in ascending order is the median as follows: 
      <p>
          <div class="textLeft">Data 4.1) is sorted in ascending order.</div> 
          <div class="textLeft">\(\qquad\)55  60  63  65  77</div>
          <div class="textLeft">Median is the 3rd number in these sorted data which is 63.</div>
      <p>
         If the number of data is 6 which is an even number, how do we find the median? 
         In this case, the median of the data is calculated as the average of the 
         3rd (=\(\frac{n}{2}\) ) and 4th (=\(\frac{n+2}{2}\) ) of the sorted data.
      <p>
         Generally, a median is expressed as \(m\), and, if the number of data is \(n\) , 
         it is calculated as follows:
      <p>
         1) Data are sorted in ascending order.<br>
         2) Check whether the number of data  is an odd number or an even number. <br>
         3) If \(n\) is odd, \(m\) = \( (\frac{n+1}{2})^{th}\)  data in sorted data. <br>
            \(\quad \;\)If \(n\) is even, \(m\) = Average of (\(\frac{n}{2})^{th}\) data \((\frac{n+2}{2})^{th}\) data in sorted data.
      <p>
         In order to see the overall distribution of the weight data, a stem and leaf plot 
         or a histogram discussed in Chapter 3 can be considered, but a dot graph is more useful. 
         In a <b>dot graph</b>, after obtaining the minimum and maximum values of data, the position of 
         each data is calculated on the horizontal axis, and displayed as a dot.
      <p>
         &lt;Figure 4.1&gt; is a dot graph for (Data 4.1). In proportion to the minimum 
         value of 55 and the maximum value of 76, each data is displayed by a dot. 
         The green line is the mean  and the red line is the median. In this data, 
         the mean is located slightly to the right of the median because 77 of the data
         is located to the right of the other four data. That is, the mean is more sensitive
         to an extreme than the median.
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0401.png">
         <div class="textLeft">&lt;Figure 4.1&gt; Dot graph of weight data</div>
      <p>
         If there are lots of data, it is time-consuming and difficult to obtain the mean 
         and median manually as above. Let's find the representative value of the data
        using „ÄéeStatM„Äè software.
  </div>
  <p>

    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.1</h4>
        Using „ÄéeStatM„Äè, draw a dot graph for the weights of 5 students (Data 4.1) and find the mean and median.
      <p><b>Solution</b>
      <p>
         Enter students' weight data in 'Data input'. (You can also copy and paste
         the data from the e-book)
      <p>
         When data are entered, the number of data, minimum, maximum, mean, and median are calculated 
         immediately. If you click the [Execute] button, a dot graph appears as shown in 
         &lt;Figure 4.1&gt; and the mean and median values are displayed.
      <p>
      <!------ Dot graph html ----------------------------------------------------------------->
      <button type="button" id="eraseDot" style="width:140px;"><b>New Data</b></button>
      <p> 
      <table class="stat">
        <tr>
          <td> <b><span data-msgid="input data">Data Input</span></b> </td>
          <td colspan="6"> 
             <input type="text" size=80 id="data1"> 
          </td>
        </tr>
        <tr>
          <td> <span data-msgid="SortData">Sorted Data</span>  </td>
          <td colspan="6"> 
            <input type="text" size=80 id="datasort">
          </td>
        </tr>
        <tr>
          <td><span data-msgid="NumberData">Data Size</span></td>
          <td style="text-align: center;"><span class="fontmath">n</span></td>
          <td><input type="text" class="textarea" size=10 id="nn" style="text-align: right;"></td>
          <td></td>
          <td><span id="msgMin">Minimum</span></td>
          <td style="text-align: center;"><span class="fontmath">min</span></td>
          <td><input type="text" class="textarea" size=10 id="mini" style="text-align: right;"></td>
        </tr>
        <tr>
          <td><span data-msgid="Total">Sum</td>
          <td></td>
          <td><input type="text" class="textarea" size=10 id="xsum" style="text-align: right;"></td>
          <td></td>
          <td><span id="msgMax">Maximum</span></td>
          <td style="text-align: center;"><span class="fontmath">max</span></td>
          <td><input type="text" class="textarea" size=10 id="maxi" style="text-align: right;"></td>
        </tr>
        <tr>
        <tr>
          <td><span data-msgid="Mean">Mean</td>
          <td style="text-align: center;"><span class="fontmath">&mu;</span></td>
          <td><input type="text" class="textarea" size=10 id="xbar" style="text-align: right;"></td>
          <td></td>
          <td><span id="msgRange">Range</span></td>
          <td style="text-align: center;"><span class="fontmath">range</span></td>
          <td><input type="text" size=10 id="range" style="text-align: right;"></td>
        </tr>
        <tr>
          <td><span id="msgMed">Median</span></td>
          <td style="text-align: center;"><span class="fontmath">m</span></td>
          <td><input type="text" size=10 id="medi" style="text-align: right;"></td>
          <td></td>
          <td><span id="msgVariance">Variance</span></td>
          <td style="text-align: center;"><span class="fontmath">&sigma;<sup>2</sup></span></td>
          <td><input type="text" size=10 id="varS" style="text-align: right;"></td>
          <td></td>
        </tr>
        <tr>
          <td><span id="msgMode">Mode</span></td>
          <td style="text-align: center;"><span class="fontmath">mode</span></td>
          <td><input type="text" size=10 id="mode" style="text-align: right;"></td>
          <td></td>
          <td><span data-msgid="Std Deviation">Std. Deviation</span></td>
          <td style="text-align: center;"><span class="fontmath">&sigma;</span></td>
          <td><input type="text" size=10 id="stdS" style="text-align: right;"></td>
        </tr>
      </table>
      <p>
         <div class="textLeft">&lt;Figure 4.2&gt; Data input of weight data for a dot graph </div>
      <p>
      <button type="button" id="executeDot"> <span data-msgid="Execute">Execute</span>     </button>
      <p>
      <svg id="chartDot" width="750" height="540" style="border-style:solid;"> </svg> 
      <p> 
      <button type="button" id="saveGraphDot" >
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      <p>
         <div class="textLeft">&lt;Figure 4.3&gt; Simulation window to see a change in mean and median if you move a point</div>
      <p>
         Bottom graph of &lt;Figure 4.3&gt; is a simulation window.  
         In this simulation window, you can move a point with the mouse to see the changes in the 
         mean and median. For example, if you drag the rightmost point and move it to the right, 
         the mean changes but the median does not. That is, the median is not affected by the extreme points.
    </div>
    <p>
    <!-----script for Dot graph ----------------------------------------------------------------------->
  <script>
      setLanguage('en');
      var chartDot = d3.select("#chartDot")
      var svgWidth    = 750;
      var svgHeight   = 540;  
      var margin, graphWidth, graphHeight;
      margin      = {top: 20, bottom: 100, left: 20, right: 20};
      graphWidth  = svgWidth - margin.left - margin.right;
      graphHeight = svgHeight - margin.top - margin.bottom;

      var i, j, k, ith;
      var x1, x2, y1, y2, cx, cy, ty;
      var nint, step, buffer, nvalue, gxmin, gxmax, gxrange, xScaleDot, strMode, maxfreq; 
      var nn, xbar, medi, mini, maxi, range, varS, stdS, left, right, mode, nvalue;
      var nn3, xba3, medi3, mini3, maxi3, range3, stdS3;
      var rowmax = 100;
      var sdata      = new Array(rowmax);
      var sdotx      = new Array(rowmax); 
      var dataValue  = new Array(rowmax);
      var dvalueFreq = new Array(rowmax);
      var radius = 7;
      var fontsize = "1em";

      var generator, title;
      document.getElementById("msgMed").innerHTML   = svgStr[46][langNum]; 
      document.getElementById("msgMin").innerHTML   = svgStr[45][langNum]; 
      document.getElementById("msgMax").innerHTML   = svgStr[47][langNum]; 
      document.getElementById("msgRange").innerHTML = svgStr[112][langNum]; 
      document.getElementById("msgVariance").innerHTML = svgStr[117][langNum]; 
      document.getElementById("msgMode").innerHTML  = svgStr[120][langNum]; 

      document.getElementById("datasort").disabled = true;    
      document.getElementById("nn").disabled    = true;    
      document.getElementById("xsum").disabled  = true; 
      document.getElementById("xbar").disabled  = true; 
      document.getElementById("medi").disabled  = true;   
      document.getElementById("mode").disabled  = true;   
      document.getElementById("mini").disabled  = true;  
      document.getElementById("maxi").disabled  = true;  
      document.getElementById("range").disabled = true; 
      document.getElementById("varS").disabled  = true; 
      document.getElementById("stdS").disabled  = true; 
// basic statistics function ============================================
simplestat2 = function(dataid) {
        data = d3.select(dataid)
	         .node()
	         .value
	         .trim()
	         .split(new RegExp("[ ]*[, \t][ ]*"))   // ['8', '8', '9']
	         .map(parseFloat);                      // [8.0, 8.0, 9.0]
	if(isNaN(data[0])) data = [];
        n = data.length;
        sum = 0;
        sumsq = 0;
        data.forEach(function(d) {
          sum += d;
          sumsq += d*d;
        });
        xbar = sum / n;
        v = (sumsq - n*xbar*xbar) / (n);
        s = Math.sqrt(v)
        data.sort(function(a, b) { return a - b; });
        mini  = data[0];
        maxi  = data[n-1];
        range = maxi - mini;
        medi = medianCalc(n,data);
        var tdata = new Array(n);
        var ntemp; 
        if (n%2 == 1) { // odd
          ntemp = (n+1)/2;
          for (i=0; i<ntemp; i++) tdata[i] = data[i];
          q1 = medianCalc(ntemp,tdata)
          for (i=ntemp-1; i<n; i++) tdata[i-ntemp+1] = data[i];
          q3 = medianCalc(ntemp,tdata)
        }
        else {
          ntemp = n/2;
          for (i=0; i<ntemp; i++) tdata[i] = data[i];
          q1 = medianCalc(ntemp,tdata)
          for (i=ntemp; i<n; i++) tdata[i-ntemp] = data[i];
          q3 = medianCalc(ntemp,tdata)
        }
        iqr = q3 - q1;
        // mode
        nvalue = modeCalc(n, data, dataValue, dvalueFreq) ;
        maxfreq = dvalueFreq[0];
        for (i = 1; i < nvalue; i++) {
          if (dvalueFreq[i] > maxfreq) maxfreq = dvalueFreq[i];
        }
        strMode ="";
        if (maxfreq > 1) {
          for (i = 0; i < nvalue; i++) {
            if (dvalueFreq[i] == maxfreq) strMode += (dataValue[i]).toString() + " ";
          }
        }
        return {'n':n, 'xbar':xbar, 'xsum':sum, 'sumsq':sumsq, 'var':v, 'std':s, 'mini':mini, 'q1':q1, 'medi':medi, 'q3':q3, 'maxi':maxi, 'range':range, 'iqr':iqr, 'mode': strMode};
}

        // init example
        document.getElementById("data1").value = "63, 60, 65, 55, 77";
        data1 = [63, 60, 65, 55, 77];
        stat = simplestat2("#data1");  
        nn   = stat.n;
        document.getElementById("datasort").value = data;    
        document.getElementById("nn").value    = stat.n;    
        document.getElementById("xsum").value  = f2(stat.xsum);
        document.getElementById("xbar").value  = f2(stat.xbar);
        document.getElementById("medi").value  = f2(stat.medi);  
        document.getElementById("range").value = f2(stat.range);  
        document.getElementById("mini").value  = f2(stat.mini);  
        document.getElementById("medi").value  = f2(stat.medi);  
        document.getElementById("maxi").value  = f2(stat.maxi);  
        document.getElementById("varS").value  = f2(stat.var);  
        document.getElementById("stdS").value  = f2(stat.std); 
        document.getElementById("mode").value  = stat.mode;  

      // data input control =====================================
      d3.select("#data1").on("input", function() {
        stat = simplestat2("#data1");  
        nn   = stat.n;
        document.getElementById("datasort").value = data;    
        document.getElementById("nn").value    = stat.n;    
        document.getElementById("xsum").value  = f2(stat.xsum);
        document.getElementById("xbar").value  = f2(stat.xbar);
        document.getElementById("medi").value  = f2(stat.medi);  
        document.getElementById("range").value = f2(stat.range);  
        document.getElementById("mini").value  = f2(stat.mini);  
        document.getElementById("medi").value  = f2(stat.medi);  
        document.getElementById("maxi").value  = f2(stat.maxi);  
        document.getElementById("varS").value  = f2(stat.var);  
        document.getElementById("stdS").value  = f2(stat.std); 
        document.getElementById("mode").value  = stat.mode;  
      });

      updateData = function() {
        document.getElementById("data1").value = ''; 
      }

      // erase Dot Data and Graph
      d3.select("#eraseDot").on("click",function() {
        chartDot.selectAll("*").remove();
        document.getElementById("data1").value = "";
        document.getElementById("datasort").value = "";    
        document.getElementById("nn").value    = "";   
        document.getElementById("xsum").value  = ""; 
        document.getElementById("xbar").value  = ""; 
        document.getElementById("medi").value  = "";  
        document.getElementById("range").value = "";   
        document.getElementById("mini").value  = "";   
        document.getElementById("medi").value  = ""; 
        document.getElementById("maxi").value  = "";   
        document.getElementById("varS").value  = "";  
        document.getElementById("stdS").value  = ""; 
        document.getElementById("mode").value  = "";   

      })

      // Draw Dot Graph ======================================
      d3.select("#executeDot").on("click",function() {
//        chartDot.selectAll("*").remove();
        nn    = stat.n;  
        for (i=0; i<nn; i++) {
            if (isNaN(data[i]) ) { //Î¨∏Ïûê Îç∞Ïù¥ÌÑ∞ Ï≤¥ÌÅ¨
              chartDot.append("text").attr("class","mean").attr("x", 250).attr("y", margin.top + 40)
                   .text(alertMsg[48][langNum]).style("stroke","red").style("font-size","1em");
              return;
            }
        }
  
        xbar  = stat.xbar;
        range = stat.range;  
        mini  = stat.mini;  
        medi  = stat.medi;  
        maxi  = stat.maxi; 
        varS  = stat.var;
        stdS  = stat.std;
        left  = xbar - stdS;
        right = xbar + stdS;  
        gxmin = xbar - 4*stdS;
        gxmax = xbar + 4*stdS;
        gxrange = gxmax - gxmin;
        drawSimpleDotGrpah();

        // draw dot graph simulation
        x1 = margin.left + graphWidth/2;
        y1 = margin.top + graphHeight/2 + 55;
        chartDot.append("text").attr("x", x1).attr("y", y1).text("  ***  "+svgStrU[98][langNum]+"  *** ("+svgStrU[111][langNum]+")")
             .style("font-size","10pt").style("stroke","red").style("text-anchor","middle");
        // draw x axis for simulation
        ty = margin.top + 3*graphHeight/4 + 40; 
        xScaleDot = d3.scaleLinear().domain([gxmin,gxmax]).range([0,graphWidth])
        chartDot.append("g")
             .attr("transform","translate("+margin.left+","+ty+")")
             .call(d3.axisBottom(xScaleDot))                  
        // data transfer for simulation
        for (i=0; i<nn; i++) sdata[i] = data[i];
        cy = ty - 10; 
        for (i=0; i<nn; i++) {
          cx = margin.left + (sdata[i] - gxmin)*graphWidth/gxrange;
          sdotx[i] = cx;
          chartDot.append("circle")
               .attr("cx",cx).attr("cy",cy).attr("r",radius).attr("fill",myColor[i])
//             .on("click", clicked)
               .call(dragDot())
        }
        drawDotGrpahSimulation(sdata)
      })

      // svg Graph Save
      d3.select("#saveGraphDot").on("click", function() {
        var svg = d3.select("#chartDot");
        var width  = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(svg.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

// median calculation
function medianCalc(n, data) {
        if (n < 2) return;
        if (n%2 == 1) { // odd
          return data[(n+1)/2 -1];
        }
        else { // even
          return ( data[n/2 -1] + data[(n+2)/2 -1] ) / 2.;
        }
}
// basic stat for sdata 
function simplestat3(sdata) {
        var i, sum, sumsq, xbar, v, s, ntemp;
        var mini,q1,medi,q3, maxi,range, iqr;
        var tdata = new Array(nn);

        sum = 0;
        sumsq = 0;
        for (i=0; i<nn; i++) {
          sum += sdata[i];
          sumsq += sdata[i]*sdata[i];
        }
        xbar = sum / nn;
        v = (sumsq - nn*xbar*xbar) / (nn);
        s = Math.sqrt(v)

        sdata.sort(function(a, b) { return a - b; });
        sdotx.sort(function(a, b) { return a - b; });
        mini  = sdata[0];
        maxi  = sdata[nn-1];
        range = maxi - mini;
        medi = medianCalc(nn,sdata);
        if (nn%2 == 1) { // odd
          ntemp = (nn+1)/2;
          for (i=0; i<ntemp; i++) tdata[i] = sdata[i];
          q1 = medianCalc(ntemp,tdata)
          for (i=ntemp-1; i<nn; i++) tdata[i-ntemp+1] = sdata[i];
          q3 = medianCalc(ntemp,tdata)
        }
        else {
          ntemp = nn/2;
          for (i=0; i<ntemp; i++) tdata[i] = sdata[i];
          q1 = medianCalc(ntemp,tdata)
          for (i=ntemp; i<nn; i++) tdata[i-ntemp] = sdata[i];
        }
        iqr = q3 - q1;
        return {'n':nn, 'xbar':xbar,'xsum':sum, 'sumsq':sumsq, 'var':v, 'std':s, 'mini':mini, 'q1':q1, 'medi':medi, 'q3':q3, 'maxi':maxi, 'range':range, 'iqr':iqr};
}
  // Sorting in ascending and count each value frequency
  function modeCalc(dobs, dataA, dataValue, dvalueFreq) {
    var i, j, temp;
    var nvalue = 0;
    for (i = 0; i < dobs; i++) {
        dvalueFreq[i] = 0;
    }
    dataValue[nvalue] = dataA[0];
    dvalueFreq[nvalue] = 1;
    nvalue = 0;
    for (i = 1; i < dobs; i++) {
        if (dataA[i] == dataA[i - 1]) {
            dvalueFreq[nvalue]++;
        } else {
            nvalue++;
            dataValue[nvalue] = dataA[i];
            dvalueFreq[nvalue]++;
        }
    }
    nvalue++;
    return nvalue;
  }
// draw dot graph for input data
function drawSimpleDotGrpah() {
        var xavg, xmed;
        ty    = margin.top + graphHeight/4;
        var xScaleDot = d3.scaleLinear().domain([gxmin,gxmax]).range([0,graphWidth])
        chartDot.append("g")
             .attr("transform","translate("+margin.left+","+ty+")")
             .call(d3.axisBottom(xScaleDot))                  // ÎààÍ∏àÏùÑ ÌëúÏãúÌï† Ìï®Ïàò Ìò∏Ï∂ú

        // draw dot graph
        cy = ty - 10; 
        for (i=0; i<nn; i++) {
          cx = margin.left + (data[i] - gxmin)*graphWidth/gxrange;
          chartDot.append("circle").attr("cx",cx).attr("cy",cy).attr("r",radius)
               .attr("fill",myColor[i])
        }
        // draw xbar line 
        xavg = margin.left + (xbar-gxmin)*graphWidth/gxrange;
        xmed = margin.left + (medi-gxmin)*graphWidth/gxrange;
        y1 = ty + 25;
        y2 = y1 - 60;
        chartDot.append("line").attr("x1",xavg).attr("x2",xavg).attr("y1",y1).attr("y2",y2).style("stroke","green")
        chartDot.append("text").attr("x", xavg).attr("y", y1+15).text("\u03BC="+f2(xbar))
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle")
        chartDot.append("line").attr("x1",xmed).attr("x2",xmed).attr("y1",y1+25).attr("y2",y2).style("stroke","red")
        chartDot.append("text").attr("x", xmed).attr("y", y1+40).text("m="+f2(medi))
             .style("font-size",fontsize).style("stroke","red").style("text-anchor","middle")
        x1 = margin.left + (left-gxmin)*graphWidth/gxrange;
        x2 = margin.left + (right-gxmin)*graphWidth/gxrange;   
        chartDot.append("text").attr("x", x1).attr("y", y1+15).text("\u03BC-\u03C3")
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle")
        chartDot.append("text").attr("x", x2).attr("y", y1+15).text("\u03BC+\u03C3")
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle")
        chartDot.append("text").attr("x", x2+50).attr("y", y1+15).text("\u03C3="+f2(stdS))
             .style("font-size",fontsize).style("stroke","blue").style("text-anchor","middle")
        chartDot.append("line").attr("x1",x1).attr("x2",x2).attr("y1",y1).attr("y2",y1).style("stroke","green")
        chartDot.append("circle").attr("cx",x1).attr("cy",y1).attr("r",2).style("fill","green")
        chartDot.append("circle").attr("cx",xavg).attr("cy",y1).attr("r",2).style("fill","green")
        chartDot.append("circle").attr("cx",x2).attr("cy",y1).attr("r",2).style("fill","green")

}
// draw dot graph for simulation data
function drawDotGrpahSimulation(sdata) {
        chartDot.selectAll("text.simul").remove();
        chartDot.selectAll("line.simul").remove();
        chartDot.selectAll("circle.simul").remove();
        var xavg, xmed;
        stat3  = simplestat3(sdata);
        nn3    = stat3.n;
        xbar3  = stat3.xbar;
        medi3  = stat3.medi;  
        stdS3  = stat3.std; 
        left3  = xbar3 - stdS3;
        right3 = xbar3 + stdS3; 

        // draw xbar line 
        xavg = margin.left + (xbar3-gxmin)*graphWidth/gxrange;
        xmed = margin.left + (medi3-gxmin)*graphWidth/gxrange;
        ty = margin.top + 3*graphHeight/4 + 40; 
        y1 = ty + 25;
        y2 = y1 - 60;
        chartDot.append("line").attr("x1",xavg).attr("x2",xavg).attr("y1",y1).attr("y2",y2)
             .style("stroke","green").attr("class","simul")
        chartDot.append("text").attr("x", xavg).attr("y", y1+15).text("\u03BC="+f2(xbar3))
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle").attr("class","simul")
        chartDot.append("line").attr("x1",xmed).attr("x2",xmed).attr("y1",y1+25).attr("y2",y2)
             .style("stroke","red").attr("class","simul")
        chartDot.append("text").attr("x", xmed).attr("y", y1+40).text("m="+f2(medi3))
             .style("font-size",fontsize).style("stroke","red").style("text-anchor","middle")
        x1 = margin.left + (left3-gxmin)*graphWidth/gxrange;
        x2 = margin.left + (right3-gxmin)*graphWidth/gxrange;   
        chartDot.append("text").attr("x", x1).attr("y", y1+15).text("\u03BC-\u03C3").attr("class","simul")
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle")
        chartDot.append("text").attr("x", x2).attr("y", y1+15).text("\u03BC+\u03C3").attr("class","simul")
             .style("font-size",fontsize).style("stroke","green").style("text-anchor","middle")
        chartDot.append("text").attr("x", x2+50).attr("y", y1+15).text("\u03C3="+f2(stdS3)).attr("class","simul")
             .style("font-size",fontsize).style("stroke","blue").style("text-anchor","middle").attr("class","simul")
        chartDot.append("line").attr("x1",x1).attr("x2",x2).attr("y1",y1).attr("y2",y1).style("stroke","green").attr("class","simul")
        chartDot.append("circle").attr("cx",x1).attr("cy",y1).attr("r",2).style("fill","green").attr("class","simul")
        chartDot.append("circle").attr("cx",xavg).attr("cy",y1).attr("r",2).style("fill","green").attr("class","simul")
        chartDot.append("circle").attr("cx",x2).attr("cy",y1).attr("r",2).style("fill","green").attr("class","simul")
}
// mouse drag
function dragDot() {

   return d3.drag()
            .on("start", function(d) {
               d3.event.sourceEvent.stopPropagation();
	       d3.select(this)
	         .attr("r", radius*2)
               var x = d3.event.x;
               for (i=nn; i>0; i--) {
                  if ( Math.abs(x - sdotx[i-1]) < (radius) ) {ith =i-1; break;} 
               }
            })
            .on("drag", function(d) {
               var x = d3.event.x;
	       d3.select(this).attr("cx", x);

            })
            .on("end", function(d) {
               var x = d3.event.x;
               if (x < margin.left) {
                 x = margin.left;
               }
               if (x > margin.left + graphWidth) {
                 x = margin.left + graphWidth;
               }
	       d3.select(this)
                 .attr("cx", x)
                 .attr("r", radius*2)
                 .transition()
                 .attr("r", radius)
               sdata[ith] = gxmin + gxrange*(x-margin.left)/graphWidth
               sdotx[ith] = x;
	       drawDotGrpahSimulation(sdata)
            });
}
// mouse clicked
function clicked(d, i) {
    if (d3.event.defaultPrevented) return; // dragged
    d3.select(this).transition()
        .attr("fill", "black")
        .attr("r", radius * 2)
      .transition()
        .attr("r", radius)
        .attr("fill", "red");
}

  </script>



    <p>
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.2</h4>
      <p>
         Using „ÄéeStatM„Äè, let's find the mean and median of the daily minimum temperature 
         ([Practice 3.2]) in Seoul in February (Data 3.2).
      <p> 
          <div class="textLeft">(Data 3.2) Daily minimum temperature in February 2021 in Seoul (unit: degree in Celcius) </div>
          <table> 
            <tr> 
              <td>
                -2.3 -8.2 -9.4 -7.4 -4.4   4.3  -2.6   5.4  -6.1 -1.5 
                 1.3  0.6  1.0  6.4 -5.2  -7.0 -10.4 -10.6  -7.1  5.5 <br>
                 4.7  0.4 -3.1 -3.0  0.7   0.5   4.3   3.2 
              </td>
            </tr>
          </table>
      <p><b>Solution</b>
      <table style="width:650px">
        <tr>
          <td>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
            <p>If you select ‚ÄòDot Graph ‚Äì Mean/Standard Deviation‚Äô from the „ÄéeStatM„Äè menu 
               using the QR on the left, the data input window as shown in 
               &lt;Figure 4.4&gt; appears.
          </td>
        </tr>
      </table>
      <p>
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0404.png">
         <div class="textLeft">&lt;Figure 4.4&gt; Temperature data input for a dot graph</div>
      <p>
         When the daily minimum temperature data are entered in 'Data input' (you can copy 
         and paste the data from the e-book), as shown in &lt;Figure 4.4&gt;, 
         it shows immediately that the number of data is 28, mean ‚Äì1.79, median ‚Äì1.90, 
         minimum -10.6, maximum 6.4 degrees.
      <p>
         If you click the [Execute] button, a dot graph as shown in &lt;Figure 4.5&gt;
         appears and the mean (\(\mu\)) and median (\(\m\)) are displayed. Below this 
         dot graph, a simulation window appears where you can change a point with the mouse and observe the changes in the mean a
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0405.png">
         <div class="textLeft">&lt;Figure 4.5&gt; Dot graph of daily minimum temperature and its simulation window</div>
     <p>
        Looking at this dot graph, it can be seen that there is almost no difference
        between the mean and the median due to the absence of extreme value.
     </div>
    <!------------------------------------------------------------------------------------------------->
    <p>

    <!-------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table style="width:650px">
        <tr>
          <td>
            <h4>‚è± Exercise 4.1</h4> <p>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
          <p>
            The following is data on the length of bicycle-only roads by 25 administrative 
            districts in Seoul as of 2019 ([Exercise 3.1]). Use „ÄéeStatM„Äè to draw a dot graph, 
            and to find and analyze the representative values of data.
            <p>
            <div class="textLeft">(Data 3.3) Length of bicycle-only roads by 25 administrative districts in Seoul as of 2019 (unit: km) </div>
            <table> 
              <tr> 
                <td>
                  24 15 23 20 30 24  7  8  7 12 28 27 19 35 41 
                  42 11  8 37 13 20 29 53 93 42
                </td>
              </tr>
            </table>
         </td>
        </tr>
      </table>
    </div>
    <p>

    <!-------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table style="width:650px">
        <tr>
          <td>
            <h4>‚è± Exercise 4.2</h4> <p>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
          <p>
            The following is data on the maximum wind speed of typhoons that passed 
            through Korea in 2020 ([Exercise 3.2]). Use „ÄéeStatM„Äè to draw a dot graph, 
            and to find and analyze the representative values of data.
            <p>
            <div class="textLeft">(Data 3.4) Maximum wind speed of typhoons that passed through Korea in 2020 (unit: m/sec)</div>
            <table> 
              <tr> 
                <td>
                  40 22 21 29 19 22 24 45 49 55 24 27 29 35 19 
                  24 35 40 56 24 21 43 18 <br>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
    <p>
    <!-------------------------------------------------------------------------->
 
  <h4> A. Calculation of mean using frequency table</h4>
  <p>
  <div class="mainTableYellow">
    <table>
      <tr>
        <td style="width:110px">
          <h4>‚≠ê Think</h4>
        </td>
        <td style="width:450px">
          <p>
          <b>Assume that a frequency table of the academic achievement test scores of 
             a middle school class is given as follows:
          </b>
          <p>
          <div class="textLeft">[Table 4.1] Frequency table of the academic achievement test scores of a middle school</div>
          <table> 
            <tr> <th class="thGrey">Class</th> <th class="thGrey">Number of data</th>   </tr>
            <tr> <td class="tdCenter">60&le; ~ &lt;70</td> <td class="tdCenter"> 2</td> </tr>
            <tr> <td class="tdCenter">70 ~ 80</td>       <td class="tdCenter">5</td> </tr>
            <tr> <td class="tdCenter">80 ~ 90</td>       <td class="tdCenter">10</td> </tr>
            <tr> <td class="tdCenter">90 ~ 100</td>      <td class="tdCenter"> 3</td> </tr>
            <tr> <th class="thGrey">Total</th> <th class="thGrey">20</th>   </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <h4>üíé Explore</h4>
        </td>
        <td>
          <p>
          <b>How do we find the mean using this frequency table?
          </b>
        </td>
      </tr>
    </table>
  </div>
  <p>
  <div class="mainTable">
      <p>
         When a frequency table is given rather than the raw data, the mean can be obtained 
         approximately as follows using the middle values of each class interval.
      <p>
         First, find the middle value of each class interval. Then, it is assumed that 
         each class has the middle value as many as the frequency, and the mean is obtained 
         using this approximated data.
      <p>
          <div class="textLeft">[Table 4.2] Approximated data using the middle value of each class interval in the academic achievement test scores </div>
          <table> 
            <tr> <th class="thGrey">Weight (kg)</th> <th class="thGrey">Middle value</th> <th class="thGrey">Frequency</th> <th class="thGrey">Approximated data</th>  </tr>
            <tr> <td class="tdCenter">60&le; ~ &lt;70</td> <td class="tdCenter">65</td> <td class="tdCenter"> 2</td> <td>65 65</td>                          </tr>
            <tr> <td class="tdCenter">70 ~ 80</td>       <td class="tdCenter">75</td> <td class="tdCenter"> 5</td> <td>75 75 75 75 75</td>                 </tr>
            <tr> <td class="tdCenter">80 ~ 90</td>       <td class="tdCenter">85</td> <td class="tdCenter">10</td> <td>85 85 85 85 85 85 85 85 85 85 </td> </tr>
            <tr> <td class="tdCenter">90 ~ 100</td>      <td class="tdCenter">95</td> <td class="tdCenter"> 3</td> <td>95 95 95</td>                       </tr>
            <tr> <th class="thGrey">Total</th> <th class="thGrey"></th> <th class="thGrey">20</th> <th class="thGrey"></th>  </tr>
          </table>

      <p>Mean is calculated as follows:
      $$ \small
         \begin{align}
         \text{Mean} &= \frac{65+65+75+75+75+75+75+85+85+85+85+85+85+85+85+85+85+95+95+95}{20} \\
                     &= \frac{65 \times 2 + 75 \times 5 + 85 \times 10  + 95 \times 3} {20} \\
                     &= \frac{1640}{20} = 82
         \end{align}
      $$
  </div>
  <p>

  <!------------- html for Freq Polygon ----------------------------------------------->
  <div class="mainTableGrey">
      <p>
         Using ‚ÄòFrequency Distribution Polygon - Relative Frequency Comparison‚Äô of „ÄéeStatM„Äè, 
         the approximate mean of the frequency table can be obtained as shown in 
         &lt;Figure 4.6&gt;. After entering the left value of the class interval and
         ‚ÄòFrequency 1‚Äô, click the [Execute] button.
      <p>
      <button type="button" id="eraseRelFreq" style="width:140px;"><b>New Data</b></button>
      <p>
      <table>
        <tr>
          <td colspan="2" style="text-align: right;"><b><span data-msgid="Main Title">Main Title</span></b>&nbsp;</td>
          <td colspan="3"><input type="text" size=63 id="mtitleRelFreq"></td>
        </tr>
	<tr>
          <td>&nbsp;</td>
          <td style="text-align: right;"><b><span data-msgid="y title">y title</span></b>&nbsp;</td>
          <td><input type="text" size=10 id="ytitleRelFreq"></td>
          <td style="text-align: right;"><b><span data-msgid="x title">x title</span></b>&nbsp;</td>
          <td><input type="text" size=10 id="xtitleRelFreq"></td>
 	</tr>
      </table>  
      <table class="data">
      <tbody>
	<tr>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td colspan="2"><b><span data-msgid="Histogram">Histogram</span> <span data-msgid="oneColor">Color</span></b></td>
          <td style="text-align: center;"><input type="color" id="data02" onclick="changeColor()" style="width:80%"></td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
          <td style="text-align: center;"><input type="color" id="data04" onclick="changeColor()" style="width:80%"></td>
          <td>&nbsp;</td>
          <td style="text-align: center;"><input type="color" id="data05" onclick="changeColor()" style="width:80%"></td>
 	</tr>
	<tr>
          <td>&nbsp;</td>
	  <td colspan="3" style="text-align: center;"><b><span data-msgid="Category">Category</span></b></td>
          <td>&nbsp;</td>
	  <td style="text-align: center;"><input type="text" size="9" id="freq1"></td>
          <td>&nbsp;</td>
	  <td style="text-align: center;"><input type="text" size="9" id="freq2"></td>
          <td>&nbsp;</td>
	  <td style="text-align: center;"><b><span data-msgid="RelativeFreq"></span>Rel Freq1</b></td>
          <td>&nbsp;</td>
	  <td style="text-align: center;"><b><span data-msgid="RelativeFreq"></span>Rel Freq2</b></td>
	</tr>
	<tr>
          <td> 1</td>
	  <td><input type="text" size="5" id="data10" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;&nbsp;</td>
          <td><input type="text" size="5" id="data11" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data12" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data13" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data14" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data15" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 2</td>
	  <td><input type="text" size="5" id="data20" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data21" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data22" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data23" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data24" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data25" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 3</td>
	  <td><input type="text" size="5" id="data30" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data31" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data32" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data33" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data34" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data35" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 4</td>
	  <td><input type="text" size="5" id="data40" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data41" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data42" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data43" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data44" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data45" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 5</td>
	  <td><input type="text" size="5" id="data50" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data51" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data52" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data53" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data54" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data55" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 6</td>
	  <td><input type="text" size="5" id="data60" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data61" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data62" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data63" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data64" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data65" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 7</td>
	  <td><input type="text" size="5" id="data70" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data71" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data72" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data73" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data74" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data75" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 8</td>
	  <td><input type="text" size="5" id="data80" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data81" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data82" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data83" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data84" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data85" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> 9</td>
	  <td><input type="text" size="5" id="data90" style="text-align: right;"></td>
          <td>&nbsp; &le; &nbsp; ~ &nbsp; &lt;</td>
          <td><input type="text" size="5" id="data91" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data92" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data93" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data94" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data95" style="text-align: right;"></td>
	</tr>
	<tr>
          <td> </td>
          <td> </td>
          <td> </td>
	  <td style="text-align: right;"><span data-msgid="Total">Sum</span> </td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data102" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data103" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data104" style="text-align: right;"></td>
          <td>&nbsp;</td>
	  <td><input type="text" size="9" id="data105" style="text-align: right;"></td>
	</tr>
        <tr>
          <td> </td>
          <td> </td>
          <td> </td>
	  <td style="text-align: right;"><span data-msgid="Mean">Mean</span> </td>
          <td> </td>
	  <td><input type="text" size="9" id="data112" style="text-align: right;"></td>
          <td> </td>
	  <td><input type="text" size="9" id="data113" style="text-align: right;"></td>
        </tr>
        <tr>
          <td> </td>
          <td> </td>
          <td> </td>
	  <td style="text-align: right;"><span data-msgid="Variance">Variance</span> </td>
          <td> </td>
	  <td><input type="text" size="9" id="data122" style="text-align: right;"></td>
          <td> </td>
	  <td><input type="text" size="9" id="data123" style="text-align: right;"></td>
        </tr>
        <tr>
          <td> </td>
          <td> </td>
          <td> </td>
	  <td style="text-align: right;"><span data-msgid="Std Deviation">Std. Deviation</span> </td>
          <td> </td>
	  <td><input type="text" size="9" id="data132" style="text-align: right;"></td>
          <td> </td>
	  <td><input type="text" size="9" id="data133" style="text-align: right;"></td>
          <td> </td>
        </tr>
      </tbody>
      </table>
      <div class="textLeft">&lt;Figure 4.6&gt; Mean calculation using a frequency table </div>
      <p>
      <button type="button" id="executeRelFreq"  style="width:140px;"><span data-msgid="Execute">Execute</span></button> 
      <p>
      <svg id="chartRel" width="750" height="540" style="border-style:solid;"> </svg>
      <p>
      <button type="button" id="saveGraphRel"  style="width:140px;">
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      <p>
    </div>
    <!---- Relative Frequencey script -------------------------------------------------------------->
    <script>
      var chartRel = d3.select("#chartRel")
      marginRel      = {top: 80, bottom: 80, left: 90, right: 90};
      graphWidthRel  = svgWidth - marginRel.left - marginRel.right;
      graphHeightRel = svgHeight - marginRel.top - marginRel.bottom;

      var colr = ["#FF0000","#FF8000","#FFFF00","#00FF00","#00FFFF","#0080FF","#0000FF","#8000FF","#FF00FF","#0000FF"];
      var rowMax = 100;
      var dint  = new Array(rowMax);
      var catg1 = new Array(rowMax);
      var catg2 = new Array(rowMax);
      var catgm = new Array(rowMax);
      var freq1 = new Array(rowMax);
      var freq2 = new Array(rowMax);
      var perc1 = new Array(rowMax);
      var perc2 = new Array(rowMax);
      var ncolr = new Array(10);
      var maxcol = 4;
      var nrow = new Array(maxcol);
      var i, j, k, ith;
      var x1, x2, y1, y2, cx, cy, tx, ty;
      var nobs, sum1, sum2, mean1, mean2, vari1, vari2, stdv1, stdv2, start, xstep, temp;
      var nvalueH, gxminH, gxmaxH, gyminH, gymaxH, xgap, xwidth, Histogram;
      var mTitleRelFreq, yTitleRelFreq, xTitleRelFreq;
      var freq1Name, freq2Name;

      document.getElementById("data11").disabled = true;
      document.getElementById("data21").disabled = true;
      document.getElementById("data31").disabled = true;
      document.getElementById("data41").disabled = true;
      document.getElementById("data51").disabled = true;
      document.getElementById("data61").disabled = true;
      document.getElementById("data71").disabled = true;
      document.getElementById("data81").disabled = true;
      document.getElementById("data91").disabled = true;
      document.getElementById("data14").disabled = true;
      document.getElementById("data24").disabled = true;
      document.getElementById("data34").disabled = true;
      document.getElementById("data44").disabled = true;
      document.getElementById("data54").disabled = true;
      document.getElementById("data64").disabled = true;
      document.getElementById("data74").disabled = true;
      document.getElementById("data84").disabled = true;
      document.getElementById("data94").disabled = true;
      document.getElementById("data15").disabled = true;
      document.getElementById("data25").disabled = true;
      document.getElementById("data35").disabled = true;
      document.getElementById("data45").disabled = true;
      document.getElementById("data55").disabled = true;
      document.getElementById("data65").disabled = true;
      document.getElementById("data75").disabled = true;
      document.getElementById("data85").disabled = true;
      document.getElementById("data95").disabled = true;
      document.getElementById("data102").disabled = true;
      document.getElementById("data103").disabled = true;
      document.getElementById("data104").disabled = true;
      document.getElementById("data105").disabled = true;
      document.getElementById("data112").disabled = true;
      document.getElementById("data113").disabled = true;
      document.getElementById("data122").disabled = true;
      document.getElementById("data123").disabled = true;
      document.getElementById("data132").disabled = true;
      document.getElementById("data133").disabled = true;

      // init Example of Rel Freq 
        document.getElementById("mtitleRelFreq").value = "Test scores of a middle school";
        document.getElementById("ytitleRelFreq").value = svgStr[30][langNum];
        document.getElementById("xtitleRelFreq").value = "Test score";
        document.getElementById("data02").value = colr[2]; // Yellow
        document.getElementById("data04").value = colr[0]; // red
        document.getElementById("data05").value = colr[6]; // blue
        document.getElementById("freq1").value  = "Frequency 1";
        document.getElementById("freq2").value  = "Frequency 2";
        document.getElementById("data10").value = "60";
        document.getElementById("data20").value = "70";
        document.getElementById("data30").value = "80";
        document.getElementById("data40").value = "90";
        document.getElementById("data12").value = "2";
        document.getElementById("data22").value = "5";
        document.getElementById("data32").value = "10";
        document.getElementById("data42").value = "3";

      // erase Hist data input =====================================
      d3.select("#eraseRelFreq").on("click", function() {
        eraseRelFreq()
      });

      // Draw Relative Histogram ======================================
      d3.select("#executeRelFreq").on("click",function() {
        initializeRelFreq();
        if ( wrongInput ) return;
        drawHistogramRel(nvalueH, dint, perc1, perc2);
      })

      // svg Graph Save
      d3.select("#saveGraphRel").on("click", function() {
        var svg = d3.select("#chartRel");
        var width  = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(svg.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

  // Erase data 
  function eraseRelFreq() {
        chartRel.selectAll("*").remove();
        // title
        document.getElementById("mtitleRelFreq").value = "";
        document.getElementById("ytitleRelFreq").value = "";
        document.getElementById("xtitleRelFreq").value = "";
        // color
        document.getElementById("data02").value = colr[2]; 
        document.getElementById("data04").value = colr[0];
        document.getElementById("data05").value = colr[6]; 
        document.getElementById("data02").value = colr[2]; // Yellow
        document.getElementById("data04").value = colr[0]; // red
        document.getElementById("data05").value = colr[6]; // blue
        document.getElementById("ytitleRelFreq").value = svgStr[30][langNum];
        document.getElementById("freq1").value  = svgStr[16][langNum]+ " 1";
        document.getElementById("freq2").value  = svgStr[16][langNum]+ " 2";
        // category
        document.getElementById("data10").value = "";
        document.getElementById("data20").value = "";
        document.getElementById("data30").value = "";
        document.getElementById("data40").value = "";
        document.getElementById("data50").value = "";
        document.getElementById("data60").value = "";
        document.getElementById("data70").value = "";
        document.getElementById("data80").value = "";
        document.getElementById("data90").value = "";
        document.getElementById("data11").value = "";
        document.getElementById("data21").value = "";
        document.getElementById("data31").value = "";
        document.getElementById("data41").value = "";
        document.getElementById("data51").value = "";
        document.getElementById("data61").value = "";
        document.getElementById("data71").value = "";
        document.getElementById("data81").value = "";
        document.getElementById("data91").value = "";
        // freq data
        document.getElementById("data12").value  = "";
        document.getElementById("data22").value  = "";
        document.getElementById("data32").value  = "";
        document.getElementById("data42").value  = "";
        document.getElementById("data52").value  = "";
        document.getElementById("data62").value  = "";
        document.getElementById("data72").value  = "";
        document.getElementById("data82").value  = "";
        document.getElementById("data92").value  = "";
        document.getElementById("data102").value = "";
        document.getElementById("data112").value = "";
        document.getElementById("data122").value = "";
        document.getElementById("data132").value = "";
        document.getElementById("data13").value  = "";
        document.getElementById("data23").value  = "";
        document.getElementById("data33").value  = "";
        document.getElementById("data43").value  = "";
        document.getElementById("data53").value  = "";
        document.getElementById("data63").value  = "";
        document.getElementById("data73").value  = "";
        document.getElementById("data83").value  = "";
        document.getElementById("data93").value  = "";
        document.getElementById("data103").value = "";
        document.getElementById("data113").value = "";
        document.getElementById("data123").value = "";
        document.getElementById("data133").value = "";
        // clean up relative frequency
        document.getElementById("data14").value = ""; 
        document.getElementById("data24").value = ""; 
        document.getElementById("data34").value = ""; 
        document.getElementById("data44").value = ""; 
        document.getElementById("data54").value = ""; 
        document.getElementById("data64").value = ""; 
        document.getElementById("data74").value = ""; 
        document.getElementById("data84").value = ""; 
        document.getElementById("data94").value = ""; 
        document.getElementById("data104").value = "";
        document.getElementById("data15").value = ""; 
        document.getElementById("data25").value = ""; 
        document.getElementById("data35").value = ""; 
        document.getElementById("data45").value = ""; 
        document.getElementById("data55").value = ""; 
        document.getElementById("data65").value = ""; 
        document.getElementById("data75").value = ""; 
        document.getElementById("data85").value = ""; 
        document.getElementById("data95").value = ""; 
        document.getElementById("data105").value = "";
  }
  // intitalize histogram
  function initializeRelFreq() {
        chartRel.selectAll("*").remove();
        // title
        mTitleRelFreq = d3.select("#mtitleRelFreq").node().value;
        yTitleRelFreq = d3.select("#ytitleRelFreq").node().value;
        xTitleRelFreq = d3.select("#xtitleRelFreq").node().value;
        if (yTitleRelFreq == "") yTitleRelFreq = svgStr[30][langNum];
        // color
        ncolr[2] = document.getElementById("data02").value; 
        ncolr[0] = document.getElementById("data04").value;
        ncolr[6] = document.getElementById("data05").value; 

        // category
        catg1[0] = d3.select("#data10").node().value;
        catg1[1] = d3.select("#data20").node().value;
        catg1[2] = d3.select("#data30").node().value;
        catg1[3] = d3.select("#data40").node().value;
        catg1[4] = d3.select("#data50").node().value;
        catg1[5] = d3.select("#data60").node().value;
        catg1[6] = d3.select("#data70").node().value;
        catg1[7] = d3.select("#data80").node().value;
        catg1[8] = d3.select("#data90").node().value;
        // freq data
        freq1Name= document.getElementById("freq1").value; 
        freq2Name= document.getElementById("freq2").value; 
        freq1[1] = parseFloat(d3.select("#data12").node().value);
        freq1[2] = parseFloat(d3.select("#data22").node().value);
        freq1[3] = parseFloat(d3.select("#data32").node().value);
        freq1[4] = parseFloat(d3.select("#data42").node().value);
        freq1[5] = parseFloat(d3.select("#data52").node().value);
        freq1[6] = parseFloat(d3.select("#data62").node().value);
        freq1[7] = parseFloat(d3.select("#data72").node().value);
        freq1[8] = parseFloat(d3.select("#data82").node().value);
        freq1[9] = parseFloat(d3.select("#data92").node().value);
        freq2[1] = parseFloat(d3.select("#data13").node().value);
        freq2[2] = parseFloat(d3.select("#data23").node().value);
        freq2[3] = parseFloat(d3.select("#data33").node().value);
        freq2[4] = parseFloat(d3.select("#data43").node().value);
        freq2[5] = parseFloat(d3.select("#data53").node().value);
        freq2[6] = parseFloat(d3.select("#data63").node().value);
        freq2[7] = parseFloat(d3.select("#data73").node().value);
        freq2[8] = parseFloat(d3.select("#data83").node().value);
        freq2[9] = parseFloat(d3.select("#data93").node().value);
        // clean up relative frequency
        document.getElementById("data14").value = ""; 
        document.getElementById("data24").value = ""; 
        document.getElementById("data34").value = ""; 
        document.getElementById("data44").value = ""; 
        document.getElementById("data54").value = ""; 
        document.getElementById("data64").value = ""; 
        document.getElementById("data74").value = ""; 
        document.getElementById("data84").value = ""; 
        document.getElementById("data94").value = ""; 
        document.getElementById("data15").value = ""; 
        document.getElementById("data25").value = ""; 
        document.getElementById("data35").value = ""; 
        document.getElementById("data45").value = ""; 
        document.getElementById("data55").value = ""; 
        document.getElementById("data65").value = ""; 
        document.getElementById("data75").value = ""; 
        document.getElementById("data85").value = ""; 
        document.getElementById("data95").value = ""; 
        // get new color
        colr[2] = d3.select("#data02").node().value;
        colr[0] = d3.select("#data04").node().value;
        colr[6] = d3.select("#data05").node().value;

        // ÏûÖÎ†•Ìïú ÌñâÏùò Ïàò Ïπ¥Ïö¥Ìä∏
        nrow[0] = 0;
        for (i=0; i<rowMax; i++) {
          if ( isNaN(catg1[i]) || catg1[i] == "" ) break;
          else nrow[0]++;
        }
        // freq1 ÌñâÏùò Ïàò Ïπ¥Ïö¥Ìä∏
        nrow[2] = 0;
        for (i=1; i<rowMax; i++) {
          if ( isNaN(freq1[i]) || freq1[i] == "" ) break;
          else nrow[2]++;
        }
        // freq2 ÌñâÏùò Ïàò Ïπ¥Ïö¥Ìä∏
        nrow[3] = 0;
        for (i=1; i<rowMax; i++) {
          if ( isNaN(freq2[i]) || freq2[i] == "" ) break;
          else nrow[3]++;
        }
        nvalueH = nrow[0];  
        // ÏûÖÎ†•ÌñâÏù¥ ÌïòÎÇò Ïù¥ÏÉÅÏù∏ÏßÄ Ï≤¥ÌÅ¨
        tx = marginRel.left+100;
        ty = marginRel.top;
        if (nvalueH < 2 ) {
          chartRel.append("text").attr("class","mea1n").attr("x", tx).attr("y", ty)
               .text(alertMsg[46][langNum]).style("stroke","red").style("font-size", "1em")
          wrongInput = true;
          return;
        }
        // catgÍ≥º freq1 ÏûÖÎ†•ÌñâÏùò ÏàòÍ∞Ä Îã§Î•∏ÏßÄ Ï≤¥ÌÅ¨ 
        if (nvalueH != nrow[2]) {
          chartRel.append("text").attr("class","mea1n").attr("x", tx).attr("y", ty)
               .text(alertMsg[51][langNum]).style("stroke","red").style("font-size", "1em")
          wrongInput = true;
          return;
        }
        // catgÏôÄ freq2 ÏûÖÎ†•ÌñâÏùò ÏàòÍ∞Ä Îã§Î•∏ÏßÄ Ï≤¥ÌÅ¨ 
        if (nrow[3] > 0) {
          if (nvalueH != nrow[3] ) {
            chartRel.append("text").attr("class","mea1n").attr("x", tx).attr("y", ty)
                 .text(alertMsg[51][langNum]).style("stroke","red").style("font-size", "1em")
            wrongInput = true;
            return;
          }
        }
        // catg1, freq2Ïóê Î¨∏Ïûê ÎπàÏπ∏ ÏûàÎÇò Ï≤¥ÌÅ¨
        for (i=0; i<nvalueH; i++) {
            if (isNaN(catg1[i]) || isNaN(freq1[i+1]) ) {
              chartRel.append("text").attr("class","mean").attr("x", tx).attr("y", ty)
                   .text(alertMsg[52][langNum]).style("stroke","red").style("font-size", "1em")
              wrongInput = true;
              return;
            }
        }
        // freq2Ïóê Î¨∏Ïûê ÎπàÏπ∏ ÏûàÎÇò Ï≤¥ÌÅ¨
        if (nrow[3] > 0) {  
          for (i=0; i<nvalueH; i++) {
            if ( isNaN(freq2[i+1]) ) {
              chartRel.append("text").attr("class","mean").attr("x", tx).attr("y", ty)
                   .text(alertMsg[52][langNum]).style("stroke","red").style("font-size", "1em")
              wrongInput = true;
              return;
            }
          }
        }
        // catg1Ïùò interval sizeÍ∞Ä Í∞ôÏùÄÏßÄ 
        xstep = parseFloat(catg1[1]) - parseFloat(catg1[0]);
        if (nrow[0] > 2) {
          for (i=2; i<nvalueH; i++) {
            temp = parseFloat(catg1[i]) - parseFloat(catg1[i-1]);
            if (temp != xstep ) {
              chartRel.append("text").attr("class","mean").attr("x", tx).attr("y", ty)
                   .text(alertMsg[53][langNum]).style("stroke","red").style("font-size", "1em")
              wrongInput = true;
              return;
            }
          }
        }
        wrongInput = false;
        // Right Interval Calculation
        xstep = parseFloat(catg1[1]) - parseFloat(catg1[0]);
        dint[0] = parseFloat(catg1[0]);
        for (i = 0; i < nvalueH; i++) {
          catg2[i]   = parseFloat(catg1[i]) + xstep; 
          catgm[i]   = (parseFloat(catg1[i]) + parseFloat(catg2[i])) / 2;
          dint[i+1]  = catg2[i];
        } 
        if( catg1[0] != "" ) document.getElementById("data11").value = f2(catg2[0]);
        if( catg1[1] != "" ) document.getElementById("data21").value = f2(catg2[1]);
        if( catg1[2] != "" ) document.getElementById("data31").value = f2(catg2[2]);
        if( catg1[3] != "" ) document.getElementById("data41").value = f2(catg2[3]);
        if( catg1[4] != "" ) document.getElementById("data51").value = f2(catg2[4]);
        if( catg1[5] != "" ) document.getElementById("data61").value = f2(catg2[5]);
        if( catg1[6] != "" ) document.getElementById("data71").value = f2(catg2[6]);
        if( catg1[7] != "" ) document.getElementById("data81").value = f2(catg2[7]);
        if( catg1[8] != "" ) document.getElementById("data91").value = f2(catg2[8]);
        // Mean, Std Dev, Relative Frequency Calculation
        sum1 = 0;
        sum2 = 0;
        mean1 = 0;
        mean2 = 0;      
        for (i = 0; i < nvalueH; i++) {
            sum1  += freq1[i+1];
            mean1 += catgm[i] * freq1[i+1];
            if (nrow[3] > 0) {
              sum2  += freq2[i+1];
              mean2 += catgm[i] * freq2[i+1]; 
            }
        }
        mean1 = mean1 / sum1;
        if (nrow[3] > 0) mean2 = mean2 / sum2;
        vari1 = 0;
        vari2 = 0;      
        for (i = 0; i < nvalueH; i++) {
            vari1 += (catgm[i] - mean1) * (catgm[i] - mean1) * freq1[i+1];
            if (nrow[3] > 0) {
              vari2 += (catgm[i] - mean2) * (catgm[i] - mean2) * freq2[i+1]; 
            }
        }
        vari1 = vari1 /sum1;
        stdv1 = Math.sqrt(vari1);
        if (nrow[3] > 0) {
          vari2 = vari2 / sum2;
          stdv2 = Math.sqrt(vari2);
        }
        for (i = 0; i < nvalueH; i++) {
            perc1[i+1] = freq1[i+1] / sum1;
            if (nrow[3] > 0) perc2[i+1] = freq2[i+1] / sum2;
        } 
        if( !isNaN(perc1[1]) ) document.getElementById("data14").value = f3(perc1[1]);
        if( !isNaN(perc2[1]) ) document.getElementById("data15").value = f3(perc2[1]);
        if( !isNaN(perc1[2]) ) document.getElementById("data24").value = f3(perc1[2]);
        if( !isNaN(perc2[2]) ) document.getElementById("data25").value = f3(perc2[2]);
        if( !isNaN(perc1[3]) ) document.getElementById("data34").value = f3(perc1[3]);
        if( !isNaN(perc2[3]) ) document.getElementById("data35").value = f3(perc2[3]);
        if( !isNaN(perc1[4]) ) document.getElementById("data44").value = f3(perc1[4]);
        if( !isNaN(perc2[4]) ) document.getElementById("data45").value = f3(perc2[4]);
        if( !isNaN(perc1[5]) ) document.getElementById("data54").value = f3(perc1[5]);
        if( !isNaN(perc2[5]) ) document.getElementById("data55").value = f3(perc2[5]);
        if( !isNaN(perc1[6]) ) document.getElementById("data64").value = f3(perc1[6]);
        if( !isNaN(perc2[6]) ) document.getElementById("data65").value = f3(perc2[6]);
        if( !isNaN(perc1[7]) ) document.getElementById("data74").value = f3(perc1[7]);
        if( !isNaN(perc2[7]) ) document.getElementById("data75").value = f3(perc2[7]);
        if( !isNaN(perc1[8]) ) document.getElementById("data84").value = f3(perc1[8]);
        if( !isNaN(perc2[8]) ) document.getElementById("data85").value = f3(perc2[8]);
        if( !isNaN(perc1[9]) ) document.getElementById("data94").value = f3(perc1[9]);
        if( !isNaN(perc2[9]) ) document.getElementById("data95").value = f3(perc2[9]);
        // write total
        document.getElementById("data102").value = sum1;
        document.getElementById("data104").value = f3(1);
        document.getElementById("data112").value = f2(mean1);
        document.getElementById("data122").value = f2(vari1);
        document.getElementById("data132").value = f2(stdv1);
        if (nrow[3] > 0) {
          document.getElementById("data103").value = sum2;
          document.getElementById("data105").value = f3(1);
          document.getElementById("data113").value = f2(mean2);
          document.getElementById("data123").value = f2(vari2);
          document.getElementById("data133").value = f2(stdv2);
        }
  }

  // ÌûàÏä§ÌÜ†Í∑∏Îû® Í∑∏Î¶¨Í∏∞ Ìï®Ïàò -----------------------------------------------------------------------------------------------
  function drawHistogramRel(nvalueH, dataValueH, dvalueFreq1, dvalueFreq2) {
    var i, j, k, str, cx, cy;
    var label, tempx, tempy, tempw, temph, xgap, xwidth, xstep, color1, colr2;
    var nvaluH, gxminH, gxmaxH, gxrangeH, gyminH, gymaxH, gyrangeH, freqmax;

    // ÌûàÏä§ÌÜ†Í∑∏Îû® bins, Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ ÏµúÏÜå ÏµúÎåÄ Í≥ÑÏÇ∞
    gxminH   = dataValueH[0];
    gxmaxH   = dataValueH[nvalueH];
    gxrangeH = gxmaxH - gxminH;
    xgap     = graphWidthRel / (nvalueH + 2); // Ï¢åÏö∞Í∞≠
    xwidth   = graphWidthRel - 2 * xgap; // Ï¢åÏö∞ Í∞≠ÏùÑ Î∫Ä Ïã§Ï†ú x ÎÑàÎπÑ
    xstep    = dataValueH[1] - dataValueH[0]; // Assume equal interval length
    // ÌûàÏä§ÌÜ†Í∑∏Îû® Í∑∏Î¶¨Í∏∞
    freqmax = 0;
    for (j = 0; j <= nvalueH; j++) {
        if (dvalueFreq1[j] > freqmax) freqmax = dvalueFreq1[j];
        if (nrow[3] > 0) {
          if (dvalueFreq2[j] > freqmax) freqmax = dvalueFreq2[j];
        }
    }
    gyminH = 0;
    gymaxH = freqmax * 1.2;  // YÏ∂ï Î≤ÑÌçº
    gyrangeH = gymaxH - gyminH;

    // Ï†ÑÏ≤¥ Ï†úÎ™©
    drawTitleRel(mTitleRelFreq, yTitleRelFreq, xTitleRelFreq);
    // ÏïÑÎûò Ï∂ïÍ∑∏Î¶¨Í∏∞
    drawHistRelAxis(nvalueH, dataValueH, gxminH, gxmaxH, gyminH, gymaxH, graphWidthRel, graphHeightRel);   
    // ÌûàÏä§ÌÜ†Í∑∏Îû® freq1[]
    tempw = xwidth * xstep / gxrangeH; // ÎßâÎåÄ ÎÑàÎπÑ
    for (i = 1; i <= nvalueH; i++) {
            tempx = marginRel.left + xgap + xwidth * (dataValueH[i - 1] - gxminH) / gxrangeH;
            tempy = marginRel.top + graphHeightRel - graphHeightRel * (dvalueFreq1[i] - gyminH) / gyrangeH;
            temph = graphHeightRel * (dvalueFreq1[i] - gyminH) / gyrangeH;
            chartRel.append("rect")
                .style("fill", colr[2])
                .attr("class", "bar")
                .style("stroke", "lightgrey")
                .style("stroke-width", "1px")
                .attr("x", tempx)
                .attr("width", tempw)
                .attr("height", 0)
                .attr("y", marginRel.top + graphHeightRel)
                .transition() // Ïï†ÎãàÎß§Ïù¥ÏÖò Ìö®Í≥º ÏßÄÏ†ï
                .delay(function(d, i) {
                    return i * 250;
                }) // 0.5Ï¥àÎßàÎã§ Í∑∏Î¶¨ÎèÑÎ°ù ÎåÄÍ∏∞ÏãúÍ∞Ñ ÏÑ§Ï†ï
                .duration(1000) // 2Ï¥àÎèôÏïà Ïï†ÎãàÎß§Ïù¥ÏÖòÏù¥ ÏßÑÌñâÎêòÎèÑÎ°ù ÏÑ§Ï†ï
                .attr("y", tempy)
                .attr("height", temph)
    } // endof i
    color1 = colr[0];
    showHistLineRel(nvalueH, xstep, dataValueH, dvalueFreq1, gxminH, gxmaxH, gyminH, gymaxH, xgap, xwidth, color1);

    if (nrow[3] > 0) {
      color2 = colr[6];
      // Î†àÏù¥Î∏î
      cx = marginRel.left + graphWidthRel + 10;
      cy = marginRel.top + 30;
      chartRel.append("circle").attr("class", "histline").style("fill", color1)
             .attr("cx", cx).attr("cy", cy).attr("r", 3)
      chartRel.append("text").attr("x", cx+10).attr("y", cy+7)
           .style("font-size", "0.8em").style("font-family", "sans-seirf").style("stroke", color1).style("text-anchor", "begin")
           .text(freq1Name)
      cy += 30;
      chartRel.append("circle").attr("class", "histline").style("fill", color2)
             .attr("cx", cx).attr("cy", cy).attr("r", 3)
      chartRel.append("text").attr("x", cx+10).attr("y", cy+7)
           .style("font-size", "0.8em").style("font-family", "sans-seirf").style("stroke", color2).style("text-anchor", "begin")
           .text(freq2Name)
      // freq2 ÏÉÅÎåÄÎèÑÏàòÎã§Í∞ÅÌòï
      showHistLineRel(nvalueH, xstep, dataValueH, dvalueFreq2, gxminH, gxmaxH, gyminH, gymaxH, xgap, xwidth, color2);
    }
  }
  // ÌûàÏä§ÌÜ†Í∑∏Îû® yÏ∂ï, xÏ∂ï Í∑∏Î¶¨Í∏∞
  function drawHistRelAxis(nvalueH, dataValueH, gxminH, gxmaxH, gyminH, gymaxH, graphWidthRel, graphHeightRel) {
    var i, j, k;
    var tx, ty, x1, x2, y1, y2, z1, z2;
    var gxrangeH = gxmaxH - gxminH;
    var xgap     = graphWidthRel / (nvalueH + 2); // Ï¢åÏö∞Í∞≠
    var xwidth   = graphWidthRel - 2 * xgap; // Ï¢åÏö∞ Í∞≠ÏùÑ Î∫Ä Ïã§Ï†ú x ÎÑàÎπÑ
    var ygrid    = new Array(rowMax);

    // YÏ∂ï Í∑∏Î¶¨Í∏∞
    var yScale = d3.scaleLinear().domain([gyminH, gymaxH]).range([graphHeightRel, 0]);
    ygrid = yScale.ticks();
    tx = marginRel.left;
    ty = marginRel.top;
    chartRel.append("g")
         .attr("class", "axis")
         .attr("transform", "translate(" + tx + ", " + ty + ") ")
         .call(d3.axisLeft(yScale))
    chartRel.append("line")
         .attr("x1", marginRel.left + graphWidthRel)
         .attr("x2", marginRel.left + graphWidthRel)
         .attr("y1", marginRel.top)
         .attr("y2", marginRel.top + graphHeightRel)
         .style("stroke", "black")
    // YÏ∂ï Í∑∏Î¶¨Îìú
    for (i = 1; i < ygrid.length; i++) {
      ty = marginRel.top + yScale(ygrid[i]);
      chartRel.append("line")
           .attr("x1", marginRel.left)
           .attr("x2", marginRel.left + graphWidthRel)
           .attr("y1", ty)
           .attr("y2", ty)
           .style("stroke", "lightgrey")
    }
    // ÌûàÏä§ÌÜ†Í∑∏Îû®Ïùò xÏ∂ï ÏÑ†
    tx = marginRel.left;
    ty = marginRel.top;
    chartRel.append("line")
         .attr("x1", tx)
         .attr("x2", marginRel.left + graphWidthRel)
         .attr("y1", ty)
         .attr("y2", ty)
         .style("stroke", "black")
    ty = marginRel.top + graphHeightRel;
    chartRel.append("line")
         .attr("x1", tx)
         .attr("x2", marginRel.left + graphWidthRel)
         .attr("y1", ty)
         .attr("y2", ty)
         .style("stroke", "black")
    // ÌûàÏä§ÌÜ†Í∑∏Îû®Ïùò xÏ∂ï ÏïÑÎûò tick, value Í∞íÏÑ†
    y1 = marginRel.top + graphHeightRel;
    y2 = y1 + 5;
    for (i = 0; i <= nvalueH; i++) {
        x1 = marginRel.left + xgap + xwidth * (dataValueH[i] - gxminH) / gxrangeH;
        x2 = x1;
        chartRel.append("line")
            .attr("x1", x1)
            .attr("x2", x2)
            .attr("y1", y1)
            .attr("y2", y2)
            .style("stroke", "black")
        // x Í∑∏Î¶¨Îìú
        chartRel.append("line")
            .attr("x1", x1)
            .attr("x2", x2)
            .attr("y1", y1)
            .attr("y2", marginRel.top)
            .style("stroke", "lightgrey")
        chartRel.append("text")
            .attr("class", "myaxis")
            .style("text-anchor", "middle")
            .style("font-family", "sans-serif")
            .style("font-size", "0.7em")
            .style("font-family", "sans-serif")
            .style("stroke", "#0055FF")
            .attr("x", x1)
            .attr("y", y2 + 15)
            .text(f2(dataValueH[i]))
    }
  }

  // Í∑∏ÎûòÌîÑ Ï†úÎ™© Ïì∞Í∏∞ Ìï®Ïàò
  function drawTitleRel(mTitle, yTitle, xTitle) {
    // Ï£ºÏ†úÎ™©
    chartRel.append("text")
        .attr("x", marginRel.left + graphWidthRel/2)
        .attr("y", marginRel.top / 2 + 10)
        .style("font-size", "1.8em")
        .style("font-family", "sans-seirf")
        .style("stroke", "black")
        .style("text-anchor", "middle")
        .text(mTitle)
    // XÏ∂ï Ï†úÎ™©
    chartRel.append("text")
            .style("font-size", "1em")
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "middle")
            .attr("x", marginRel.left + graphWidthRel / 2)
            .attr("y", marginRel.top + graphHeightRel + marginRel.bottom * 0.6)
            .text(xTitle)
     // YÏ∂ï Ï†úÎ™©
     var tx = marginRel.left / 2 - 30;
     var ty = marginRel.top + 15;
     chartRel.append("text")
            .style("font-size", "1em")
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "end")
            .attr("x", tx)
            .attr("y", ty)
            .text(yTitle)
            .attr("transform", "rotate(-90 30 100)")
  }


  // ÌûàÏä§ÌÜ†Í∑∏Îû® ÎèÑÏàòÎ∂ÑÌè¨Îã§Í∞ÅÌòï ÌëúÏãú Ìï®Ïàò
  function showHistLineRel(nvalueH, xstep, dataValueH, freq, gxminH, gxmaxH, gyminH, gymaxH, xgap, xwidth, colStr) {
    var i, k;
    var gxrangeH = gxmaxH - gxminH;
    var gyrangeH = gymaxH - gyminH;
        // left gap part
        x1 = marginRel.left + xgap + xwidth * (dataValueH[0] - xstep / 2 - gxminH) / gxrangeH;
        y1 = marginRel.top  + graphHeightRel;
        x2 = marginRel.left + xgap + xwidth * (dataValueH[0] + xstep / 2 - gxminH) / gxrangeH;
        y2 = marginRel.top  + graphHeightRel - graphHeightRel * (freq[1] - gyminH) / gyrangeH;
        chartRel.append("circle")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("cx", x1)
             .attr("cy", y1)
             .attr("r", 3)
        chartRel.append("line")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("x1", x1)
             .attr("x2", x2)
             .attr("y1", y1)
             .attr("y2", y2)
        str = f3(freq[1]);
        chartRel.append("circle")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("cx", x2)
             .attr("cy", y2)
             .attr("r", 3)
             .append("title")
             .text(str)
    // main polygon
    for (i = 1; i < nvalueH; i++) {
        x1 = x2;
        y1 = y2;
        x2 = marginRel.left + xgap + xwidth * (dataValueH[i] + xstep / 2 - gxminH) / gxrangeH;
        y2 = marginRel.top  + graphHeightRel - graphHeightRel * (freq[i + 1] - gyminH) / gyrangeH;
        str = f3(freq[i+1]);
        chartRel.append("line")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("x1", x1)
             .attr("x2", x2)
             .attr("y1", y1)
             .attr("y2", y2)
        chartRel.append("circle")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("cx", x2)
             .attr("cy", y2)
             .attr("r", 3)
             .append("title")
             .text(str)
    }
        // right gap part
        x1 = x2;
        y1 = y2;
        x2 = marginRel.left + xgap + xwidth * (dataValueH[nvalueH] + xstep / 2 - gxminH) / gxrangeH;
        y2 = marginRel.top  + graphHeightRel;
        chartRel.append("line")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("x1", x1)
             .attr("x2", x2)
             .attr("y1", y1)
             .attr("y2", y2)
        chartRel.append("circle")
             .attr("class", "histline")
             .style("stroke", colStr)
             .style("stroke-width", "2px")
             .attr("cx", x2)
             .attr("cy", y2)
             .attr("r", 3)
  }

    // Change Color
    function changeColor(){
      colr[2] = d3.select("#data02").node().value;
      colr[0] = d3.select("#data04").node().value;
      colr[6] = d3.select("#data05").node().value;
    }


    </script>


<!--------------------------------------------------------------------------------------->
  <h3 id="0402">4.2 Measure of Dispersion ‚Äì Standard Deviation</h3>
  <p>
  <div class="mainTableYellow">
    <table>
      <tr>
        <td style="width:110px">
          <h4>‚≠ê Think</h4>
        </td>
        <td style="width:450px">
          <p>
          <b>The quiz scores (out of 10) of five middle school students are as follows: </b>
          <p>
            <div class="textLeft">(Data 4.2) The quiz scores (out of 10) of five middle school students</div>
            <table> 
              <tr> 
                <td>
                  6  8  7  4  10
                </td>
              </tr>
            </table>
        </td>
      </tr>
      <tr>
        <td>
          <h4>üíé Explore</h4>
        </td>
        <td>
          <p>
          <b>Is there a way to measure how scattered these data are?</b>
        </td>
      </tr>
    </table>
  </div>
  <p>

  <div class="mainTable">
      <p>
         The degree to which data are scattered is called a <b>dispersion</b>. A simple measure 
         of the dispersion is a <b>range</b> which is the maximum minus the minimum.
      $$
         \text{Range} = \text{Maximum - Minimum}</b>
      $$
         In (Data 4.2), the maximum value is 10 and the minimum value is 4, so the range is 22.
      $$
         \text{Range} = \text{77 - 55 = 22}</b>
      $$      
      <p>
         Since the range is too sensitive to extreme values, a variance or a standard deviation
         is generally used to measure the dispersion. The <b>variance</b> is obtained by 
         squaring the distance between each data value and the mean, and dividing it by 
         the number of data. Therefore, when the data are scattered far from the mean, 
         the variance is large, and when the data are clustered around the mean, 
         the variance is small. The variance is expressed as \(\sigma^2\) (read as sigma squared).
      <p>
         The mean of the data in (Data 4.2)  is as follows:
      $$
          \text{Mean} \quad \mu ~=~ \frac{6+8+7++4+10}{5} ~=~ \frac{35}{5} ~=~ 7
      $$
      <p>
         The variance is calculated by squaring the distances from the mean to each data 
         value to find the sum, and then finding the mean. That is, it is the average of 
         squared distances.
      $$
        \begin{align}
          \text{Variance} \quad \sigma^{2} &~=~ \frac{ (6-7)^2 + (8-7)^2 + (7-7)^2 + (4-7)^2 + (10-7)^2} {5} \\
                                       &~=~ \frac{20}{5} ~=~ 4
        \end{align}
      $$
        When \(n\) number of data is expressed as \(x_1 , x_2 , ... , x_n\) and the mean
        is expressed as \(\mu\), the variance can be expressed by the following formula.
      $$
        \begin{align}
          \text{Variance} \quad \sigma^{2} ~=~ { {1 \over n} {\sum _{i=1} ^{n} (x_{i} - \mu )^{2}}  } ~~~~	(n:~ÏûêÎ£åÏàò)  \\
        \end{align}
      $$
      <p>
         The <b>standard deviation</b> is defined as the square root of the variance 
         and denoted by \(\sigma\). The variance is not easy to interpret practically 
         because it is the average of the squared distances, but the standard deviation
         is the square root of the variance, so it can be interpreted as a measure 
         of the average distance between each data value and the mean.
      $$
          \text{Standard deviation} \quad \sigma ~=~ \sqrt{\sigma^2}  \\
      $$
         The standard deviation of (Data 4.2) is  \(\sigma\) = \(\sqrt{\sigma^2}\) = \(\sqrt{4}\) = 2 Ïù¥Îã§.
  </div>
  <p>

    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.3</h4>
        Using „ÄéeStatM„Äè, draw a dot graph for the quiz scores of 5 sample students  (Data 4.2) and find the mean and standard deviation.
      <p><b>Solution</b>
      <table style="width:650px">
        <tr>
          <td>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
            <p>Using the QR on the left, select ‚ÄòDot Graph ‚Äì Mean / Standard Deviation‚Äô 
               from the „ÄéeStatM„Äè menu. Then a window like &lt;Figure 4.7&gt; appears.
            <p>Enter students' quiz scores in 'Data input'. (You can also copy and 
               paste the material from the e-book)
          </td>
        </tr>
      </table>
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0407.png">
         <div class="textLeft">&lt;Figure 4.7&gt; Quiz data input for a dot graph </div>
      <p>
         When the data are entered, the number of data, minimum, maximum, mean, median,
         variance and standard deviation are calculated. If you click the [Execute] button, 
         a dot graph as shown in &lt;Figure 4.8&gt; appears and the mean, median, 
         standard deviation, and a line of mean \(\pm\) standard deviation are displayed.
      <p>
         Using the simulation window below the figure, you can check the change 
         in the standard deviation by moving a data point with the mouse. 
         The standard deviation is also affected by an extreme point.
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0408.png">
         <div class="textLeft">&lt;Figure 4.8&gt; Dot graph with a line of mean \(\pm\) standard deviation</div>
    </div>
    <!------------------------------------------------------------------------------------------------->
    <p>
    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.4</h4>
        Using „ÄéeStatM„Äè, let's draw a dot graph for the daily minimum temperature ([Practice 3.2]) in Seoul in February (Data 3.2) and find the mean and standard deviation.
      <p><b>Solution</b>
      <table style="width:650px">
        <tr>
          <td>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
            <p>If you select ‚ÄòDot Graph ‚Äì Mean / Standard Deviation‚Äô from the „ÄéeStatM„Äè menu
               that appears using the QR on the left, the data input window as shown in 
               &lt;Figure 4.9&gt; appears.
          </td>
        </tr>
      </table>
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0409.png">
         <div class="textLeft">&lt;Figure 4.9&gt; Temperature data input for a dot graph</div>
      <p>
         When data are entered, the number of data, minimum, maximum, mean, median, variance 
         and standard deviation are calculated. If you click the [Execute] button, a dot graph
         as shown in &lt;Figure 4.10&gt; appears and the mean, median, standard deviation, 
         and a line of mean \(\pm\) standard deviation are displayed.
      <p>
         Using the simulation window below the figure, you can check the change in the 
         standard deviation by moving a point with the mouse. The standard deviation 
         is also affected by an extreme point.
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0410.png">
         <div class="textLeft">&lt;Figure 4.10&gt; Dot graph of daily minimum temperature and a simulation window</div>
    </div>
    <!------------------------------------------------------------------------------------------------->
    <p>

    <!-------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table style="width:650px">
        <tr>
          <td>
            <h4>‚è± Exercise 4.3</h4> <p>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
            <p>
              The following is data on the length of bicycle-only roads by 25 administrative districts in Seoul as of 2019 ([Exercise 3.1]). Use „ÄéeStatM„Äè to draw a dot graph and to find and analyze the mean and standard deviation of the data.
            <p>
            <div class="textLeft">(Data 3.3) Length of bicycle-only roads by 25 administrative districts in Seoul as of 2019. (unit km) </div>
            <table> 
              <tr> 
                <td>
                  24 15 23 20 30 24  7  8  7 12 28 27 19 35 41 <br>
                  42 11  8 37 13 20 29 53 93 42
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
    <p>

    <!-------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table style="width:650px">
        <tr>
          <td>
            <h4>‚è± Exercise 4.4</h4> <p>
            <input class="qrBtn" type="image" src="../../QR/eStatM_10DotGraph.svg" onclick="window.open(addrStr[146])">     
          </td>
          <td>
            <p>
              The following is data on the maximum wind speed of typhoons that passed through Korea in 2020 ([Exercise 3.2]). Use „ÄéeStatM„Äè to draw a dot graph and find and analyze the mean and standard deviation of data.
            <p>
            <div class="textLeft">(Data 3.4) Maximum wind speed of typhoons that passed through Korea in 2020 (unit m/sec) </div>
            <table> 
              <tr> 
                <td>
                  40 22 21 29 19 22 24 45 49 55 24 27 29 35 19 <br>
                  24 35 40 56 24 21 43 18 <br>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
    <p>
    <!-------------------------------------------------------------------------->

  <h3>A. Calculation of standard deviation using frequency table</h3>
  <p>
  <div class="mainTableYellow">
    <table>
      <tr>
        <td style="width:110px">
          <h4>‚≠ê Think</h4>
        </td>
        <td style="width:450px">
          <p>
            <b>Assume that the frequency table of the academic achievement test scores of a middle school class is given as follows: </b>
          <p>
          <div class="textLeft">[Table 4.3] Frequency table of the academic achievement test scores of a middle school</div>
          <table> 
            <tr> <th class="thGrey">Class</th> <th class="thGrey">Number of data</th>   </tr>
            <tr> <td class="tdCenter">60&le; ~ &lt;70</td> <td class="tdCenter"> 2</td> </tr>
            <tr> <td class="tdCenter">70 ~ 80</td>       <td class="tdCenter">10</td> </tr>
            <tr> <td class="tdCenter">80 ~ 90</td>       <td class="tdCenter">15</td> </tr>
            <tr> <td class="tdCenter">90 ~ 100</td>      <td class="tdCenter"> 3</td> </tr>
            <tr> <th class="thGrey">Total</th> <th class="thGrey">30</th>   </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <h4>üíé Explore</h4>
        </td>
        <td>
          <p>
          <b>How to find the standard deviation of the data in this frequency table?
          </b>
        </td>
      </tr>
    </table>
  </div>
  <p>
  <div class="mainTable">
      <p>
         In the previous section, when a frequency table was given rather than the raw data, 
         the mean was approximated using the middle value of each class interval. 
         The standard deviation is calculated in a similar way.
      <p>
         First, find the middle value of each class. Then, it is assumed that each class 
         has the middle value as many as the frequency, and the average is obtained 
         using this approximate data.
      <p>
          <div class="textLeft">[Table 4.4] Approximated data using the middle value of each class interval in the academic achievement test scores </div>
          <table> 
            <tr> <th class="thGrey">Weight (kg)</th> <th class="thGrey">Middle value</th> <th class="thGrey">Frequency</th> <th class="thGrey">Approximated data</th>  </tr>
            <tr> <td class="tdCenter">60&le; ~ &lt;70</td> <td class="tdCenter">65</td> <td class="tdCenter"> 3</td> <td>65 65</td>                          </tr>
            <tr> <td class="tdCenter">70 ~ 80</td>       <td class="tdCenter">75</td> <td class="tdCenter"> 7</td> <td>75 75 75 75 75</td>                 </tr>
            <tr> <td class="tdCenter">80 ~ 90</td>       <td class="tdCenter">85</td> <td class="tdCenter">11</td> <td>85 85 85 85 85 85 85 85 85 85 </td> </tr>
            <tr> <td class="tdCenter">90 ~ 100</td>      <td class="tdCenter">95</td> <td class="tdCenter"> 5</td> <td>95 95 95</td>                       </tr>
            <tr> <th class="thGrey">Total</th> <th class="thGrey"></th> <th class="thGrey">30</th> <th class="thGrey"></th>  </tr>
          </table>
      <p>
         Mean is calculated as follows:
      $$
        \text{Mean} ~=~ \frac{65 \times 2 + 75 \times 5 + 85 \times 10 + 95 \times 3} {20} ~=~ \frac{1640}{20} ~=~ 82
      $$
      <p>The variance and standard deviation are calculated in a similar way.
      $$ \small
        \begin{align}
        &\text{Variance} \qquad \qquad \sigma^2 ~=~ \frac{(65-82)^2 \times 2 + (75-82)^2 \times 5 + (85-82)^2 \times 10 + (95-82)^2 \times 3} {20} \\
        &\qquad\qquad\qquad\qquad \;\;   ~=~ \frac{1420}{20} ~=~ 71 \\
        &\text{Standard deviation} \qquad  \sigma ~=~ \sqrt{\sigma^2} ~=~ \sqrt{71} ~=~ 8.43
        \end{align} 
      $$
      <p>
         Using ‚ÄòFrequency Distribution Polygon - Relative Frequency Comparison‚Äô of „ÄéeStatM„Äè,
         the approximate mean and standard deviation of the frequency table can be obtained 
         as shown in &lt;Figure 4.6&gt;. After entering the left value of the class interval
         and ‚ÄòFrequency 1‚Äô, click the [Execute] button.
      <p>
         <img class="imgFig600600" src="../FigureM/Fig0411.png">
         <div class="textLeft">&lt;Figure 4.11&gt; Standard deviation calculation using a frequency table </div>
  </div>
  <p>

<!--------------------------------------------------------------------------------------->
  <h3 id="0403">4.3 Covariance and Correlation Coefficient</h3>
  <p>
  <div class="mainTableYellow">
    <table>
      <tr>
        <td style="width:110px">
          <h4>‚≠ê Think</h4>
        </td>
        <td style="width:450px">
          <p>
          <b>The height and weight of 7 male middle school students were investigated as follows: </b>
          <p>
            <div class="textLeft">(Data 4.3) Height and weight of 7 male middle school students</div>
            <table> 
              <tr> <td></td> <th class="thGrey">1</td> <th class="thGrey">2</td> <th class="thGrey">3</td> <th class="thGrey">4</td> <th class="thGrey">5</td> <th class="thGrey">6</td> <th class="thGrey">7</td> </tr>
              <tr> <th class="thGrey">Height</td> <td class="tdCenter">162</td> <td class="tdCenter">164</td> <td class="tdCenter">170</td> <td class="tdCenter">158</td> <td class="tdCenter">175</td> <td class="tdCenter">168</td> <td class="tdCenter">172</td> </tr>
              <tr> <th class="thGrey">Weight</td> <td class="tdCenter">54</td> <td class="tdCenter">60</td> <td class="tdCenter">64</td> <td class="tdCenter">52</td> <td class="tdCenter">65</td> <td class="tdCenter">60</td> <td class="tdCenter">67</td> </tr>
            </table>
        </td>
      </tr>
      <tr>
        <td>
          <h4>üíé Explore</h4>
        </td>
        <td>
          <p>
            <b>Is there a measure to determine the correlation between two quantitative variables? </b>
        </td>
      </tr>
    </table>
  </div>
  <p>

  <div class="mainTable">
      <p>
         Just as the variance is used as a measure of dispersion in one quantitative variable, 
          the following covariance is used in two quantitative variables. When \(n\) number 
          of x and y data are expressed as \( (x_1 , y_1 ), (x_2 , y_2 ), ... , (x_n , y_n ) \),
          and the mean is expressed as \( (\mu_x , \mu_y )\), the <b>covariance</b>
          \(\sigma_{xy}\) can be expressed by the following formula.
      $$
          \text{Covariance} \quad \sigma_{xy} ~ =~ \frac{1}{n} \sum _{i=1} ^{n} (x_{i} - \mu_x ) (y_{i} - u_y )  \qquad (n:\text{ number of data} )
      $$
      <p>
         Covariance implies the total average of the values obtained by multiplying the 
         x-axis distance and the y-axis distance between each data point and the mean point
         of data. Therefore, if there are many points on the upper right and lower left of
         the mean point, the covariance has a positive value, indicating a positive correlation. 
         If there are many points on the upper left and lower right of the mean point, 
         the covariance has a negative value, indicating a negative correlation. However, 
         since covariance can increase in value depending on the unit of data, the following 
         <b>correlation coefficient</b> denoted as \(\rho\) is used as a measure of correlation.
      $$
          \text{Correlation coefficient} \quad \rho ~ =~ \frac{\sigma_{xy}}{\sigma_x \sigma_y} 
      $$
      <p>
         The correlation coefficient is a variation of the covariance and can only have 
         values between -1 and +1. When the correlation coefficient is close to +1, 
         the two variables are said to have a strong positive correlation, and when the 
         correlation coefficient is close to -1, it is said to have a strong negative correlation. 
         When the correlation coefficient is close to 0, there is no correlation between 
         the two variables.
  </div>
  <p>

    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.5</h4>
        Using „ÄéeStatM„Äè, calculate the covariance and correlation coefficient of the height and weight of 7 students. . 
      <p><b>Solution</b>
      <p>
         Enter students' height in 'Enter X data' and their weight in 'Enter Y data'. 
         (You can also copy and paste the material from the e-book)
      <p>
         After the data input, click the [Execute] button. Then the number of data, mean,
         variance, standard deviation, covariance and correlation coefficient are calculated 
         as in &lt;Figue 4.12&gt; and a scatter plot is displayed. 
      <p>
         As shown in &lt;Figure 4.12&gt;, the covariance of height and weight in (Data 4.3)
         is 27 and the correlation coefficient is 0.94, indicating a strong positive correlation.
      <p>
      <!---------- scatter plot html ---------------------------------------------------------> 
      <button type="button" id="eraseScatter" style="width:140px;"><b>New Data</b></button>
      <table class="data">
        <tr>
          <td style="text-align: right;"><b><span data-msgid="Main Title">Main Title</span></b>&nbsp;</td>
          <td colspan="3"><input type="text" size=65 id="mtitleScatter"></td>
        </tr>
	<tr>
          <td style="text-align: right;"><b><span data-msgid="y title">y title</span></b>&nbsp;</td>
          <td><input type="text" size=20 id="ytitleScatter"></td>
          <td style="text-align: right;"><b><span data-msgid="x title">x title</span></b>&nbsp;</td>
          <td><input type="text" size=20 id="xtitleScatter"></td>
 	</tr>
	<tr>
	  <td style="text-align: right;"><b>X <span data-msgid="input data"> data</span></b></td>
	  <td colspan="3"><input type="text" size=85 id="datax"></td>
	</tr>
	<tr>
	  <td style="text-align: right;"><b>Y <span data-msgid="input data"> data</span></b></td>
	  <td colspan="3"><input type="text" size=85 id="datay"></td>
	</tr>
      </table>
      <table>
	<tr>
	  <td><span data-msgid="NumberData">Number of Data</span></td>         
	  <td style="text-align: center;"><span class="fontmath">n<sub>x</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="nn41" style="text-align: right;" ></td>
	  <td> </td>
	  <td style="text-align: center;"><span class="fontmath">n<sub>y</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="nn42" style="text-align: right;" ></td>        
	</tr>
	<tr>
	  <td><span data-msgid="Mean">Mean</span></td>
	  <td style="text-align: center;"><span class="fontmath">&mu;<sub>x</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="xbar41" style="text-align: right;" ></td>
	  <td> </td>
	  <td style="text-align: center;"><span class="fontmath">&mu;<sub>y</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="xbar42" style="text-align: right;" ></td>
	</tr>
	<tr>
          <td><span id="msgVariance">Variance</span></td>
	  <td style="text-align: center;"><span class="fontmath">&sigma;<sub>x</sub><sup>2</sup></span></td>
	  <td><input type="text" class="textarea" size=6 id="var41" style="text-align: right;" ></td>
	  <td> </td>
	  <td style="text-align: center;"><span class="fontmath">&sigma;<sub>y</sub><sup>2</sup></span></td>
	  <td><input type="text" class="textarea" size=6 id="var42" style="text-align: right;" ></td>
	  <td> </td>
          <td><span id="msgCovariance">Covariance</span></td>
	  <td style="text-align: center;"><span class="fontmath">&sigma;<sub>xy</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="var43" style="text-align: right;" ></td>
	</tr>
	<tr>
          <td><span data-msgid="Std Deviation">Std. Deviation</span></td>
	  <td style="text-align: center;"><span class="fontmath">&sigma;<sub>x</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="std41" style="text-align: right;"></td>
	  <td> </td>
	  <td style="text-align: center;"><span class="fontmath">&sigma;<sub>y</sub></span></td>
	  <td><input type="text" class="textarea" size=6 id="std42" style="text-align: right;" ></td>
	  <td> </td>
          <td><span id="msgCorr">Correlation</span></td>
	  <td style="text-align: center;"><span class="fontmath">&rho;</span></td>
	  <td><input type="text" class="textarea" size=6 id="std43" style="text-align: right;" ></td>
	</tr>
      </table>
      <div class="textLeft">&lt;Figure 4.12&gt; Height and weight data input and calculation of covariance and correlation coefficient</div>
      <p>
      <button type="button" id="executeScatter" >
        <span data-msgid="Execute">Execute</span>
      </button>
      <p>
      <svg id="chartScatter" width="750" height="540" style="border-style:solid;"> </svg> 
      <p>
      <button type="button" id="saveGraphScatter" >
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <label>
        <input type="checkbox" id="regressScatter"> 
        <span data-msgid="Regression Line">Regression Line </span>
      </label> 
      <p>
         <div class="textLeft">&lt;Figure 4.13&gt; Scatter plot using height and weight data</div>
      <p>
         If you check the ‚Äòregression line‚Äô under the scatterplot, a regression line that 
         explains the relationship between height and weight is drawn.
    </div>
    <!------------------------------------------------------------------------------------------------->
    <p>
    <!------script for Scatter Plot --------------------------------------------------------------->
  <script>
      var chartScatter = d3.select("#chartScatter"); 
      var i;
      var marginScatter = {top: 80, bottom: 80, left: 80, right: 80};
      var buffer      = 40;
      var graphWidthScatter  = svgWidth - marginScatter.left - marginScatter.right;
      var graphHeightScatter = svgHeight - marginScatter.top - marginScatter.bottom;
      var checkTitle  = true;
      var mtitleScatter, ytitleScatter, xtitleScatter, xobs, yobs, tobs;
      var fontsize = "1em";
      var statScatter = new Array(30);
      var statx    = new Array(30);
      var staty    = new Array(30);
      var rowmax   = 200;
      var xdata    = new Array(rowmax);
      var ydata    = new Array(rowmax);
      document.getElementById("nn41").disabled    = true;    
      document.getElementById("nn42").disabled    = true;    
      document.getElementById("xbar41").disabled  = true;    
      document.getElementById("xbar42").disabled  = true;    
      document.getElementById("var41").disabled   = true;       
      document.getElementById("var42").disabled   = true;       
      document.getElementById("var43").disabled   = true;       
      document.getElementById("std41").disabled   = true;       
      document.getElementById("std42").disabled   = true;       
      document.getElementById("std43").disabled   = true;       
      document.getElementById("msgVariance").innerHTML = svgStr[117][langNum]; 
      document.getElementById("msgCovariance").innerHTML = svgStr[121][langNum]; 
      document.getElementById("msgCorr").innerHTML = svgStr[60][langNum]; 

      // init example
      document.getElementById("mtitleScatter").value = "Height and weight of 7 middle school students";
      document.getElementById("ytitleScatter").value = "Weight";
      document.getElementById("xtitleScatter").value = "Height";
      document.getElementById("datax").value = "162,164,170,158,175,168,172";
      document.getElementById("datay").value = "54,60,64,52,65,60,67";
      xdata = [162,164,170,158,175,168,172];
      ydata = [54,60,64,52,65,60,67];
      xobs  = xdata.length;
      yobs  = ydata.length; 

      // input data control ===================================================
      d3.select("#datax").on("input", function() {
        statx = simplestat("#datax");  
        xdata = data;  
        xobs  = statx.n;
      });

      d3.select("#datay").on("input", function() {
        staty = simplestat("#datay");  
        ydata = data; 
        yobs  = staty.n;
      });

      updateData = function() {
        document.getElementById("datax").value = '';
        document.getElementById("datay").value = '';    
      }

      // erase scatter plot
      d3.select("#eraseScatter").on("click", function(){  
        chartScatter.selectAll("*").remove();
        // title
        document.getElementById("mtitleScatter").value = "";
        document.getElementById("ytitleScatter").value = "";
        document.getElementById("xtitleScatter").value = "";
        // data
        document.getElementById("datax").value = '';
        document.getElementById("datay").value = '';    
        // stat
        document.getElementById("nn41").value    = "";    
        document.getElementById("nn42").value    = "";    
        document.getElementById("xbar41").value  = "";    
        document.getElementById("xbar42").value  = "";    
        document.getElementById("var41").value   = "";       
        document.getElementById("var42").value   = "";       
        document.getElementById("var43").value   = "";       
        document.getElementById("std41").value   = "";       
        document.getElementById("std42").value   = "";       
        document.getElementById("std43").value   = "";       
      })
      // execute scatter plot
      d3.select("#executeScatter").on("click", function(){  
          chartScatter.selectAll("*").remove();  // Ï†ÑÌôîÎ©¥ Ï†úÍ±∞
          document.getElementById("regressScatter").checked = false;
          // ÏûÖÎ†•ÌñâÏù¥ Í∞ôÏùÄÏßÄ Ï≤¥ÌÅ¨
          if (xobs != yobs ) {
            chartScatter.append("text").attr("class","mean").attr("x", 250).attr("y", marginScatter.top + 40)
               .text(alertMsg[54][langNum]).style("stroke","red").style("font-size","1em");
            return;
          }
          tobs = xobs;
          // ÏûÖÎ†• ÎèÑÏàòÏóê Ïà´Ïûê Î¨∏Ïûê ÎπàÏπ∏ ÏûàÎÇò Ï≤¥ÌÅ¨
          for (i=0; i<tobs; i++) {
            if (isNaN(xdata[i]) || isNaN(ydata[i]) ) {
              chartScatter.append("text").attr("class","mean").attr("x", 250).attr("y", marginScatter.top + 40)
                 .text(alertMsg[48][langNum]).style("stroke","red").style("font-size","1em");
              return;
            }
          }
          // title
          mtitleScatter = d3.select("#mtitleScatter").node().value;
          ytitleScatter = d3.select("#ytitleScatter").node().value;
          xtitleScatter = d3.select("#xtitleScatter").node().value;
          // ÌÜµÍ≥ÑÎüâ
          basicScatterStat(tobs, xdata, ydata, statScatter);
          document.getElementById("nn41").value   = tobs;    
          document.getElementById("nn42").value   = tobs;    
          document.getElementById("xbar41").value = f2(statScatter[1]);
          document.getElementById("xbar42").value = f2(statScatter[11]);
          document.getElementById("var41").value  = f2(statScatter[17]); 
          document.getElementById("var42").value  = f2(statScatter[18]);    
          document.getElementById("var43").value  = f2(statScatter[19]);    
          document.getElementById("std41").value  = f2(statScatter[2]); 
          document.getElementById("std42").value  = f2(statScatter[12]);    
          document.getElementById("std43").value  = f2(statScatter[9]);    
          showScatterPlot(tobs, xdata, ydata, statScatter[5], statScatter[6], statScatter[15], statScatter[16], graphWidthScatter, graphHeightScatter, checkTitle);
      })

      // ÌöåÍ∑ÄÏÑ† Í∑∏Î¶¨Í∏∞
      d3.select("#regressScatter").on("click",function() {
          if(this.checked) {
            showRegressionScatter(statScatter[7], statScatter[8], statScatter[9], statScatter[10], statScatter[5], statScatter[6], statScatter[15], statScatter[16], checkTitle);
          } else {
	    removeRegressionScatter();
          }
      })
      // svg Graph Save
      d3.select("#saveGraphScatter").on("click", function() {
        var svg = d3.select("#chartScatter");
        var width = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(chartScatter.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

// Two variable Basic Statistics
function basicScatterStat(nobs, xdata, ydata, stat) {
        var tempx, tempy;
        var xsum = 0;
        var ysum = 0;
        for (i=0; i<nobs; i++) {
          xsum += xdata[i];
          ysum += ydata[i];
        }
        var xavg = xsum / nobs;
        var yavg = ysum / nobs;
        var sxx = 0;
        var sxy = 0;
        var syy = 0;
        for (i=0; i<nobs; i++) {
          tempx = xdata[i] - xavg;
          tempy = ydata[i] - yavg;
          sxx += tempx*tempx;
          syy += tempy*tempy;
          sxy += tempx*tempy; 
        }
        var xvar = sxx / nobs;
        var xstd = Math.sqrt(xvar);
        var yvar = syy / nobs;
        var ystd = Math.sqrt(yvar);
        var beta    = sxy / sxx;
        var alpha   = yavg - beta*xavg;
        var cov     = sxy / nobs;
        var corr    = sxy / Math.sqrt(sxx * syy);
        var rsquare = corr * corr;
        var xmin = xdata[0];
        var xmax = xdata[0];
        var ymin = ydata[0];
        var ymax = ydata[0];
        for (i=1; i<nobs; i++) {
          if (xmin > xdata[i]) xmin = xdata[i];
          if (xmax < xdata[i]) xmax = xdata[i];
          if (ymin > ydata[i]) ymin = ydata[i];
          if (ymax < ydata[i]) ymax = ydata[i];
        } 
        // Í∑∏ÎûòÌîÑ ÌôîÎ©¥ Ï†ïÏùò 
        var xgap    = (xmax - xmin) / 5;
        var ygap    = (ymax - ymin) / 5;
        var gxmin   = xmin - xgap;
        var gxmax   = xmax + xgap;
        var gymin   = ymin - ygap;
        var gymax   = ymax + ygap;
        var gxrange = gxmax - gxmin;
        var gyrange = gymax - gymin;
        // save statistic
        stat[0]  = nobs;
        stat[1]  = xavg;    stat[11] = yavg;
        stat[2]  = xstd;    stat[12] = ystd;
        stat[3]  = xmin;    stat[13] = ymin;
        stat[4]  = xmax;    stat[14] = ymax;
        stat[5]  = gxmin;   stat[15] = gymin
        stat[6]  = gxmax;   stat[16] = gymax;
        stat[7]  = alpha;   stat[17] = xvar;
        stat[8]  = beta;    stat[18] = yvar;
        stat[9]  = corr;    stat[19] = cov;
        stat[10] = rsquare;    
}
// ÏÇ∞Ï†êÎèÑ Í∑∏Î¶¨Í∏∞ Ìï®Ïàò -------------------------------------------------------------
function showScatterPlot(nobs, xdata, ydata, gxmin, gxmax, gymin, gymax, graphWidthScatter, graphHeightScatter, checkTitle) {
     var gxrange = gxmax - gxmin;
     var gyrange = gymax - gymin;
     var xgrid    = new Array(nobs);
     var ygrid    = new Array(nobs);

     var i, tx, ty;
         // Ï£ºÏ†úÎ™©
         chartScatter.append("text")
            .attr("x", marginScatter.left + graphWidthScatter/2)
            .attr("y", marginScatter.top / 2 + 10)
            .style("font-size", "1.8em")
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "middle")
            .text(mtitleScatter)
         // XÏ∂ï Ï†úÎ™©
         chartScatter.append("text")
            .style("font-size", fontsize)
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "middle")
            .attr("x", marginScatter.left + graphWidthScatter / 2)
            .attr("y", marginScatter.top + graphHeightScatter + marginScatter.bottom / 2 + 15)
            .text(xtitleScatter)
         // YÏ∂ï Ï†úÎ™©
         tx = marginScatter.left / 2 - 30;
         ty = marginScatter.top + 15;
         chartScatter.append("text")
            .style("font-size", fontsize)
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "end")
            .attr("x", tx)
            .attr("y", ty)
            .text(ytitleScatter)
            .attr("transform", "rotate(-90 30 100)")

        // xÏ∂ï Í∑∏Î¶¨Í∏∞
        var xScaleScatter = d3.scaleLinear().domain([gxmin,gxmax]).range([0,graphWidthScatter])
        xgrid = xScaleScatter.ticks();
        // xÏ∂ï Í∑∏Î¶¨Îìú
        for (i = 1; i < xgrid.length; i++) {
          tx = marginScatter.left + xScaleScatter(xgrid[i]);
          chartScatter.append("line")
           .attr("x1", tx)
           .attr("x2", tx)
           .attr("y1", marginScatter.top)
           .attr("y2", marginScatter.top + graphHeightScatter)
           .style("stroke", "lightgrey")
        }
        ty = marginScatter.top + graphHeightScatter;
        chartScatter.append("g")
             .attr("transform","translate("+marginScatter.left+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisBottom(xScaleScatter)) 
        chartScatter.append("g")
             .attr("transform","translate("+marginScatter.left+","+marginScatter.top+")")
	     .attr("class", "main axis date")
             .call(d3.axisTop(xScaleScatter)) 
        // yÏ∂ï Í∑∏Î¶¨Í∏∞
        var yScale = d3.scaleLinear().domain([gymin,gymax]).range([graphHeightScatter, 0])
        ygrid = yScale.ticks();
        // YÏ∂ï Í∑∏Î¶¨Îìú
        for (i = 1; i < ygrid.length; i++) {
          ty = marginScatter.top + yScale(ygrid[i]);
          chartScatter.append("line")
           .attr("x1", marginScatter.left)
           .attr("x2", marginScatter.left + graphWidthScatter)
           .attr("y1", ty)
           .attr("y2", ty)
           .style("stroke", "lightgrey")
        }
        ty = marginScatter.top;
        chartScatter.append("g")
             .attr("transform","translate("+marginScatter.left+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisLeft(yScale)) 
        var tx = marginScatter.left + graphWidthScatter;
        chartScatter.append("g")
             .attr("transform","translate("+tx+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisRight(yScale)) 
        // ÏÇ∞Ï†êÎèÑ Ï†ê Í∑∏Î¶¨Í∏∞
        chartScatter.selectAll("circle")
             .data(xdata)
             .enter()
             .append("circle")
             .attr("cx", function(d,i){ return marginScatter.left + graphWidthScatter*Math.random() })
             .attr("cy", marginScatter.top + 20)
             .transition()                           // Ïï†ÎãàÎß§Ïù¥ÏÖò Ìö®Í≥º ÏßÄÏ†ï
             .delay(function(d,i) {return i*50;})   // 0.5Ï¥àÎßàÎã§ Í∑∏Î¶¨ÎèÑÎ°ù ÎåÄÍ∏∞ÏãúÍ∞Ñ ÏÑ§Ï†ï
             .duration(500) 
             .attr("cx", function(d,i){ return marginScatter.left+graphWidthScatter*(d-gxmin)/gxrange;})
             .attr("cy", function(d,i){ return marginScatter.top+graphHeightScatter-graphHeightScatter*(ydata[i]-gymin)/gyrange;})         
             .attr("r", 5)
             .attr("class","circle")
             .style("fill",function(d,i){return myColor[i] })
}

// ÌöåÍ∑ÄÏÑ† Í∑∏Î¶¨Í∏∞ Ìï®Ïàò
function showRegressionScatter(alpha, beta, corr, rsquare, gxmin, gxmax, gymin, gymax, checkTitle) {
        var gxrange = gxmax - gxmin;
        var gyrange = gymax - gymin;
        var x1  = marginScatter.left + graphWidthScatter*(statScatter[3]-gxmin)/gxrange;
        var y1  = marginScatter.top  + graphHeightScatter - graphHeightScatter*((alpha+beta*statScatter[3])-gymin)/gyrange;
        var x2  = marginScatter.left + graphWidthScatter*(statScatter[4]-gxmin)/gxrange;
        var y2  = marginScatter.top  + graphHeightScatter - graphHeightScatter*((alpha+beta*statScatter[4])-gymin)/gyrange;
        chartScatter.append("line").attr("class","reglabel2")
                .attr("x1",x1)
                .attr("y1",y1)
                .attr("x2",x2)
                .attr("y2",y2)
                .style("stroke","green") 
     if(checkTitle) {   
        chartScatter.append("text").attr("class","reglabel2")
                .attr("x", marginScatter.left + 20)
                .attr("y", marginScatter.top +  20)
                .text(svgStrU[31][langNum]+" :  y = ("+f2(alpha)+") + ("+f2(beta)+ ") x")
      
        chartScatter.append("text").attr("class","reglabel2").attr("x", marginScatter.left + 80).attr("y", marginScatter.top +  40)
                .text("œÅ = "+f2(corr))
     }
}
// Remove Regression Line of Scatter Plot
function removeRegressionScatter() {
	 chartScatter.selectAll("line.reglabel2").remove();
         chartScatter.selectAll("text.reglabel2").remove();
}
  </script>

    <p>
    <!-------------------------------------------------------------------------->
    <div class="mainTablePink">
      <table style="width:650px">
        <tr>
          <td>
            <h4>‚è± Exercise 4.5</h4> <p>
            <input class="qrBtn" type="image" src="../../QR/eStatM_30ScatterPlotH.svg" onclick="window.open(addrStr[157])">     
          </td>
          <td>
            <p>
              The following data are weekly study hours and test scores of 10 middle school students. Find the covariance and correlation coefficient using „ÄéeStatM„Äè and analyze what kind of correlation is.
            <p>
            <div class="textLeft">(Data 4.4) Weekly study hours and test score of 10 students</div>
            <table> 
              <tr> <th class="thGrey"></th> <th class="thGrey">1</th> <th class="thGrey">2</th> <th class="thGrey">3</th> <th class="thGrey">4</th> <th class="thGrey">5</th> <th class="thGrey">6</th> <th class="thGrey">7</th> <th class="thGrey">8</th> <th class="thGrey">9</th> <th class="thGrey">10</th> </tr>
              <tr> <th class="thGrey">Study hours</th> <td class="tdCenter">10</td> <td class="tdCenter">25</td> <td class="tdCenter">15</td> <td class="tdCenter">16</td> <td class="tdCenter">20</td> <td class="tdCenter">5</td> <td class="tdCenter">18</td> <td class="tdCenter">21</td> <td class="tdCenter">12</td> <td class="tdCenter">20</td> </tr>
              <tr> <th class="thGrey">Test score</th> <td class="tdCenter">75</td> <td class="tdCenter">95</td> <td class="tdCenter">82</td> <td class="tdCenter">85</td> <td class="tdCenter">97</td> <td class="tdCenter">65</td> <td class="tdCenter">87</td> <td class="tdCenter">88</td> <td class="tdCenter">76</td> <td class="tdCenter">90</td> </tr>
            </table>
          </td>
        </tr>
      </table>
    </div>
    <p>
    <!-------------------------------------------------------------------------->

  <div class="mainTable">
      <p>By using „ÄéeStatM„Äè, you can examine examples of data for various correlation coefficients.
  </div>
  <p>

    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.6</h4>
        Let's simulate various correlation coefficients using „ÄéeStatM„Äè. 
      <p><b>Solution</b>
      <p>
         Change the 'Correlation Coefficient' under the initial scatter plot to the desired value and click the [Execute] button to display a scatter plot for the corresponding correlation coefficient. 
      <p>
         If ‚ÄòRegression Line‚Äô is checked, a regression line representing the points appears.
      <p>
      <!---  Correlation simulation html -------------->
      <table style="width:600px">
        <tr>
          <td style="width:150px">
            <button type="button" id="redrawCorr" >
              <b><span data-msgid="Execute">Execute</span></b>
            </button>
          </td>
          <td style="width:200px"> <span data-msgid="Correlation Coefficient">Correlation Coefficient</span> </td>
          <td style="width:100px"><input type="text" class="textarea" value="0.8" size=4 id="initCorr" style="text-align: center;"></td>
          <td style="width:20px">-1</td>
          <td style="width:100px"><input style="width:150px" type="range" min="0" max="200" value="180" step="10" id="rangeCorr" onchange="showValue(this.value)"></td>
          <td style="width:20px">1</td>
          </td>
        </tr>
      </table>
      <p>
      <svg id="chartCorr" width="750" height="540" style="border-style:solid;"> </svg> 
      <p>
      <button type="button" id="saveGraphU" >
	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <label>
        <input type="checkbox" id="regressCorr">
        <span data-msgid="Regression Line">Regression Line </span>
      </label> 
      <p>
         <div class="textLeft">&lt;Figure 4.14&gt; Simulation window for a correlation coefficient</div>
    </div>
    <p>
    <!---script for Corr Simulation------------------------------------------------------------------------------->
    <script type="text/javascript">
      function showValue(newValue) {
        var newV = (newValue - 100)/100;
        document.getElementById("initCorr").value=newV;  
      }
    </script>

    <script>
      var chartCorr   = d3.select("#chartCorr"); 
      var rr;
      var marginCorr  = {top: 80, bottom: 40, left: 80, right: 80};
      var buffer      = 40;
      var graphWidthCorr  = svgWidth - marginCorr.left - marginCorr.right;
      var graphHeightCorr = svgHeight - marginCorr.top - marginCorr.bottom;

      var statCorr  = new Array(30);
      var tobs      = 200;
      var xdataCorr = new Array(tobs);
      var ydataCorr = new Array(tobs);
      var generator = d3.randomNormal(0,1) 
      var checkTitle = true;

      d3.select("#redrawCorr").on("click", function(){  
          chartCorr.selectAll("*").remove();  // Ï†ÑÌôîÎ©¥ Ï†úÍ±∞
          document.getElementById("regressCorr").checked = false;
          for (i=0; i<tobs; i++) {
            xdataCorr[i] = 0;
            ydataCorr[i] = 0;
          }
	  rr = parseFloat(d3.select("#initCorr").node().value);  // ÏãúÏûëÍ∞í 
          if (rr > 1 ) rr = 0.999;
          if (rr < -1) rr = -0.999;
          // slider control
          document.getElementById("rangeCorr").value  = 100*(1+rr);
          for (i=0; i<tobs; i++) {
            xdataCorr[i] = generator();
            ydataCorr[i] = rr*xdataCorr[i] + Math.sqrt(1-rr*rr)*generator();
          }
          basicScatterStat(tobs, xdataCorr, ydataCorr, statCorr);
          statCorr[5]  = -4; // gxmin
          statCorr[6]  = 4;  // gxmax
          statCorr[15] = -4; // gymin
          statCorr[16] = 4;  // gymax
          showCorrelation(tobs, xdataCorr, ydataCorr, statCorr[5], statCorr[6], statCorr[15], statCorr[16], graphWidthCorr, graphHeightCorr, checkTitle);
      })

      // ÌöåÍ∑ÄÏÑ† Í∑∏Î¶¨Í∏∞
      d3.select("#regressCorr").on("click",function() {
          if(this.checked) {
            showCorrRegression(statCorr[7], statCorr[8], statCorr[9], statCorr[10], statCorr[5], statCorr[6], statCorr[15], statCorr[16], checkTitle);
          } else {
	    removeCorrRegression();
          }
      })
      // svg Graph Save
      d3.select("#saveGraphU").on("click", function() {
        var svg = d3.select("#chart");
        var width = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(chartCorr.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

// ÏÇ∞Ï†êÎèÑ Í∑∏Î¶¨Í∏∞ Ìï®Ïàò -------------------------------------------------------------
function showCorrelation(nobs, xdata, ydata, gxmin, gxmax, gymin, gymax, graphWidthCorr, graphHeightCorr, checkTitle) {
     var gxrange = gxmax - gxmin;
     var gyrange = gymax - gymin;
     var xgrid   = new Array(nobs);
     var ygrid   = new Array(nobs);

     var i, tx, ty;
         // Ï£ºÏ†úÎ™©
         chartCorr.append("text")
            .attr("x", marginCorr.left + graphWidthCorr/2)
            .attr("y", marginCorr.top / 2 + 10)
            .style("font-size", "1.8em")
            .style("font-family", "sans-seirf")
            .style("stroke", "black")
            .style("text-anchor", "middle")
            .text("Correlation Simulation")
        // xÏ∂ï Í∑∏Î¶¨Í∏∞
        var xScaleCorr = d3.scaleLinear().domain([gxmin,gxmax]).range([0,graphWidthCorr])
        xgrid = xScaleCorr.ticks();
        // xÏ∂ï Í∑∏Î¶¨Îìú
        for (i = 1; i < xgrid.length; i++) {
          tx = marginCorr.left + xScaleCorr(xgrid[i]);
          chartCorr.append("line")
           .attr("x1", tx)
           .attr("x2", tx)
           .attr("y1", marginCorr.top)
           .attr("y2", marginCorr.top + graphHeightCorr)
           .style("stroke", "lightgrey")
        }
        ty = marginCorr.top + graphHeightCorr;
        chartCorr.append("g")
             .attr("transform","translate("+marginCorr.left+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisBottom(xScaleCorr)) 
        chartCorr.append("g")
             .attr("transform","translate("+marginCorr.left+","+marginCorr.top+")")
	     .attr("class", "main axis date")
             .call(d3.axisTop(xScaleCorr)) 
        // yÏ∂ï Í∑∏Î¶¨Í∏∞
        var yScale = d3.scaleLinear().domain([gymin,gymax]).range([graphHeightCorr, 0])
        ygrid = yScale.ticks();
        // YÏ∂ï Í∑∏Î¶¨Îìú
        for (i = 1; i < ygrid.length; i++) {
          ty = marginCorr.top + yScale(ygrid[i]);
          chartCorr.append("line")
           .attr("x1", marginCorr.left)
           .attr("x2", marginCorr.left + graphWidthCorr)
           .attr("y1", ty)
           .attr("y2", ty)
           .style("stroke", "lightgrey")
        }
        ty = marginCorr.top;
        chartCorr.append("g")
             .attr("transform","translate("+marginCorr.left+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisLeft(yScale)) 
        var tx = marginCorr.left + graphWidthCorr;
        chartCorr.append("g")
             .attr("transform","translate("+tx+","+ty+")")
	     .attr("class", "main axis date")
             .call(d3.axisRight(yScale)) 
        // ÏÇ∞Ï†êÎèÑ Ï†ê Í∑∏Î¶¨Í∏∞
        chartCorr.selectAll("circle")
             .data(xdata)
             .enter()
             .append("circle")
             .attr("cx", function(d,i){ return marginCorr.left + graphWidthCorr*Math.random() })
             .attr("cy", marginCorr.top + 20)
             .transition()                           // Ïï†ÎãàÎß§Ïù¥ÏÖò Ìö®Í≥º ÏßÄÏ†ï
             .delay(function(d,i) {return i*50;})   // 0.5Ï¥àÎßàÎã§ Í∑∏Î¶¨ÎèÑÎ°ù ÎåÄÍ∏∞ÏãúÍ∞Ñ ÏÑ§Ï†ï
             .duration(500) 
             .attr("cx", function(d,i){ return marginCorr.left+graphWidthCorr*(d-gxmin)/gxrange;})
             .attr("cy", function(d,i){ return marginCorr.top+graphHeightCorr-graphHeightCorr*(ydata[i]-gymin)/gyrange;})         
             .attr("r", 5)
             .attr("class","circle")
             .style("fill",function(d,i){return myColor[i] })
}

// ÌöåÍ∑ÄÏÑ† Í∑∏Î¶¨Í∏∞ Ìï®Ïàò
function showCorrRegression(alpha, beta, corr, rsquare, gxmin, gxmax, gymin, gymax, checkTitle) {
        var gxrange = gxmax - gxmin;
        var gyrange = gymax - gymin;
        var x1  = marginCorr.left + graphWidthCorr*(statCorr[3]-gxmin)/gxrange;
        var y1  = marginCorr.top  + graphHeightCorr - graphHeightCorr*((alpha+beta*statCorr[3])-gymin)/gyrange;
        var x2  = marginCorr.left + graphWidthCorr*(statCorr[4]-gxmin)/gxrange;
        var y2  = marginCorr.top  + graphHeightCorr - graphHeightCorr*((alpha+beta*statCorr[4])-gymin)/gyrange;
        chartCorr.append("line").attr("class","reglabel2")
                .attr("x1",x1)
                .attr("y1",y1)
                .attr("x2",x2)
                .attr("y2",y2)
                .style("stroke","green") 
     if(checkTitle) {   
        chartCorr.append("text").attr("class","reglabel2")
                .attr("x", marginCorr.left + 20)
                .attr("y", marginCorr.top +  20)
                .text(svgStrU[31][langNum]+" :  y = ("+f2(alpha)+") + ("+f2(beta)+ ") x")
      
        chartCorr.append("text").attr("class","reglabel2").attr("x", marginCorr.left + 80).attr("y", marginCorr.top +  40)
                .text("œÅ = "+f2(corr))
     }
}
// Remove Regression Line of Simulation
function removeCorrRegression() {
	 chartCorr.selectAll("line.reglabel2").remove();
         chartCorr.selectAll("text.reglabel2").remove();
}


  </script>


  <div class="mainTable">
      <p>If the correlation is strong, a straight line that can explain the relationship 
         between the variables is obtained, which is called a regression line. 
         A detailed explanation of the regression line is covered in university level of statistics.
  </div>
  <p>

    <!------------------------------------------------------------------------------------------------->
    <div class="mainTableGrey">
      <p><h4>üé≤ Practice 4.7</h4>
        Using „ÄéeStatM„Äè, make a point on the plane and observe the correlation coefficient and regression line while moving.
      <p><b>Solution</b>
      <p>
         If you place a dot on this blank screen with the mouse, the regression line and 
         correlation coefficient appear as shown in &lt;Figure 4.15&gt;. You can observe 
         the change of the regression line and the correlation coefficient by moving 
         the point after clicking it with the mouse.
      <p>
      <!-----html for regression simulation ----------------------------------------------------------------------------->
      <button type="button" id="erase" >
        <span data-msgid="Erase All">Erase All</span>
      </button> 
      <p>
      <svg id="chartReg" width="750" height="540" style="border-style:solid;"> </svg>
      <p>
      <button type="button" id="saveGraphReg" >
 	<span class="tooltiptext" data-msgid="Graph Save">Graph Save</span>
      </button>
      &nbsp;&nbsp;   
      <input type="radio" name="addtype" id="add_on"  value="on" checked />
        <label><span data-msgid="Add Point">Add Point</span></label>&nbsp;   
      <input type="radio" name="addtype" id="add_off" value="off" />
        <label><span data-msgid="Erase Point">Erase Point</span></label>   
      <p>
         <div class="textLeft">&lt;Figure 4.15&gt; Simulation window of a correlation coefficient and a regression line</div>
    </div>
    <p>
    <!-------script for Regression Simulation -------------------------------------------------------------------------------->
    <script>
      var chartReg = d3.select("#chartReg"); 
      var marginReg = {top: 100, bottom: 70, left: 70, right: 100};
      var buffer      = 40;
      var graphWidthReg  = svgWidth - marginReg.left - marginReg.right;
      var graphHeightReg = svgHeight - marginReg.top - marginReg.bottom;

      // ÌöåÍ∑Ä ÏãúÎÆ¨Î†àÏù¥ÏÖò Î≥ÄÏàòÎì§
      var width  = svgWidth;
      var height = svgHeight;
      var xlim = [0, 10];
      var ylim = [0, 10];
      var xScaleReg = d3.scaleLinear()
                     .domain(xlim)
                     .range([marginReg.left, width - marginReg.right]);
      var yscale = d3.scaleLinear()
                     .domain(ylim)
                     .range([height - marginReg.bottom, marginReg.top]);
      var xaxis  = d3.axisBottom(xScaleReg)
                     .ticks(5);
      var yaxis  = d3.axisLeft(yscale)
                     .ticks(5);
      var line = chartReg.append("line");
              
      var removePoint = function() {
           if(document.getElementById("add_off").checked) {	    
             this.remove();
	     updateRegressionLine();
           }
         }

      var drag = d3.drag()
            .on("start", function(d) {
           	d3.event.sourceEvent.stopPropagation();
	        d3.select(this)
	          .style("fill", "#bf616a")
	          .attr("r", 10);
            })
            .on("drag", function(d) {
               var x = d3.event.x;
	       var y = d3.event.y;
	       d3.select(this)
	         .attr("cx", x)
	         .attr("cy", y);
	    updateRegressionLine();
            })
           .on("end", function(d) {
	       d3.select(this)
	         .style("fill", "black")
	        .attr("r", 5);
            });


      // ÌöåÍ∑ÄÏÑ† ÏãúÎÆ¨Î†àÏù¥ÏÖò -------------------------------------------------------------
      var sub1  = svgStrU[52][langNum];
      var sub2  = svgStrU[53][langNum];
      var ty    = marginReg.top/3;
      chartReg.append("text").attr("class","titleS").attr("x",marginReg.left).attr("y",ty).text(sub1);
      chartReg.append("text").attr("class","titleS").attr("x",marginReg.left).attr("y",ty+20).text(sub2);

      showScatterPlot3(graphWidthReg, graphHeightReg); // ÌôîÎ©¥

      ncount = 0;
      chartReg.on("click", function() {
      if(d3.event.defaultPrevented) return;
    
      var pos = d3.mouse(this);
      if(document.getElementById("add_on" ).checked) {
                if ( pos[0] > marginReg.left && pos[0] < marginReg.left+graphWidthReg 
                     && pos[1] > marginReg.top && pos[1] < marginReg.top+graphHeightReg) {
            	  addPoint(pos[0], pos[1]);
                  ncount++;
                  updateRegressionLine();
                }
          }
      });

      // ÌöåÍ∑Ä ÏãúÎÆ¨Î†àÏù¥ÏÖò ÌôîÎ©¥ ÏßÄÏö∞Í∏∞
      d3.select("#erase").on("click",function() {
         chartReg.selectAll("circle").remove();
         chartReg.selectAll("text.reglabel3").remove(); 
         chartReg.selectAll("line.regline").remove();  
         updateRegressionLine();
         ncount = 0;
      })

      // svg Graph Save
      d3.select("#saveGraphReg").on("click", function() {
        var svg = d3.select("#chartReg");
        var width = svgWidth;
        var height = svgHeight;
        var svgString = getSVGString(chartReg.node());
        svgString2Image(svgString, width, height, 'png', save);
        function save(dataBlob, filesize) {
          saveAs(dataBlob, 'eStatGraphU.png');
        }
      });

function showScatterPlot3(graphWidthReg, graphHeightReg) {
        var gxmin = 0;
        var gxmax = 10;
        var gymin = 0;
        var gymax = 10;
        var gxrange = gxmax - gxmin;
        var gyrange = gymax - gymin;
        // xÏ∂ï Í∑∏Î¶¨Í∏∞
        var xScaleReg = d3.scaleLinear().domain([gxmin,gxmax]).range([0,graphWidthReg])
        var ty = marginReg.top + graphHeightReg;
        chartReg.append("g")
           .attr("transform","translate("+marginReg.left+","+ty+")")
           .attr("class", "main axis date")
           .call(d3.axisBottom(xScaleReg)) 
        chartReg.append("g")
           .attr("transform","translate("+marginReg.left+","+marginReg.top+")")
	   .attr("class", "main axis date")
           .call(d3.axisTop(xScaleReg)) 
        // yÏ∂ï Í∑∏Î¶¨Í∏∞
        var yScale = d3.scaleLinear().domain([gymin,gymax]).range([graphHeightReg, 0])
        var ty = marginReg.top;
        chartReg.append("g")
           .attr("transform","translate("+marginReg.left+","+ty+")")
           .attr("class", "main axis date")
           .call(d3.axisLeft(yScale)) 
        var tx = marginReg.left + graphWidthReg;
        chartReg.append("g")
           .attr("transform","translate("+tx+","+ty+")")
	   .attr("class", "main axis date")
           .call(d3.axisRight(yScale)) 
}
function addPoint(x, y) {
    chartReg.append("circle")
	.attr("cx", x)
	.attr("cy", y)
	.attr("r", 5)
	.style("cursor", "pointer")
        .style("fill","#0055FF")
	.on("mouseenter", function() {
	    d3.select(this)
		.style("fill", "#bf616a");
	})
	.on("mouseleave", function() {
	    d3.select(this)
		    .style("fill", "#0055FF");
	})
	.on("click", removePoint)
	.on("touch", removePoint)
	.call(drag);
}
function lsfit(points) {
    var n = points.length;
    var sx = 0;
    var sy = 0;
    var sxx = 0;
    var syy = 0;
    var sxy = 0;
    for(var i=0; i<n; ++i) {
	var x = xScaleReg.invert(points[i].cx.baseVal.value);
	var y = yscale.invert(points[i].cy.baseVal.value);
	sx = sx + x;
	sy = sy + y;
	sxx = sxx + x*x;
	sxy = sxy + x*y;
	syy = syy + y*y;
    }
    b1 = (sxy - sx*sy/n)/(sxx - sx*sx/n);
    b0 = sy/n - b1 * sx/n;
    var sst = syy - sy*sy/n;
    var sse = 0;
    for(var i=0; i<n; ++i) {
	var x = xScaleReg.invert(points[i].cx.baseVal.value);
	var y = yscale.invert(points[i].cy.baseVal.value);
	var e = y - (b0 + b1*x);
	sse = sse + e*e;
    }

    r = (sxy - sx*sy/n) / Math.sqrt((sxx-sx*sx/n)*(syy-sy*sy/n))
    return {a : b0, b : b1, xbar : sx/n, ybar : sy/n, rsq: 1 - sse/sst, r: r};
}
function updateRegressionLine() {
    var x1, x2, y1, y2;
    var coef = lsfit(chartReg.selectAll("circle").nodes());
    if(isNaN(coef.a) || isNaN(coef.b) || isNaN(coef.xbar) || isNaN(coef.ybar)) {
	 chartReg.selectAll("line.regline").remove();
    } else {
        chartReg.selectAll("line.regline").remove();
         x1 = marginReg.left;
        y1 = yscale(coef.a + xScaleReg.invert(marginReg.left)*coef.b);
        x2 = marginReg.left + graphWidthReg;
        y2 = yscale(coef.a + xScaleReg.invert(marginReg.left+graphWidthReg)*coef.b);
        if (y1 < marginReg.top) {
          y1 = marginReg.top;
          x1 = xScaleReg( (yscale.invert(marginReg.top)-coef.a) / coef.b);
        }
        if (y1 > marginReg.top + graphHeightReg) {
          y1 = marginReg.top + graphHeightReg;
          x1 = xScaleReg( (yscale.invert(marginReg.top+graphHeightReg)-coef.a) / coef.b);
        }      
        if (y2 < marginReg.top) {
          y2 = marginReg.top;
          x2 = xScaleReg( (yscale.invert(marginReg.top)-coef.a) / coef.b);
        }
        if (y2 > marginReg.top + graphHeightReg) {
          y2 = marginReg.top + graphHeightReg;
          x2 = xScaleReg( (yscale.invert(marginReg.top+graphHeightReg)-coef.a) / coef.b);
        } 
        chartReg.append("line") 
           .attr("class","regline")    
	   .attr("x1", x1)
	   .attr("y1", y1)
	   .attr("x2", x2)
	   .attr("y2", y2)
	   .style("stroke", "royalblue");
    }
    // ÌöåÍ∑ÄÏÑ†, ÏÉÅÍ¥ÄÍ≥ÑÏàò, Í≤∞Ï†ïÍ≥ÑÏàò
    var y1 = marginReg.top + graphHeightReg +  marginReg.bottom/2 + 10;
    chartReg.selectAll("text.reglabel3").remove();     
    chartReg.append("text").attr("class","reglabel3")
        .attr("x", marginReg.left + 20)
        .attr("y", y1)
        .text("y = ("+f2(coef.a)+") + ("+f2(coef.b)+ ") x")         
    chartReg.append("text").attr("class","reglabel3")
        .attr("x", marginReg.left + graphHeightReg/2)
        .attr("y", y1)
        .text("r = "+f2(coef.r))
    chartReg.append("text").attr("class","reglabel3")
        .attr("x", marginReg.left + graphHeightReg/2 + 70)
        .attr("y", y1)
        .text("r\u00B2 = "+f2(coef.rsq))
 }function clearAll() {
    chartReg.selectAll("circle").remove();
    chartReg.selectAll("text.reglabel3").remove(); 
    chartReg.selectAll("line.regline").remove();    
    updateRegressionLine();
 }
  </script>

  <p>
  <div class="mainTablePink">
    <h4> Exercise </h4>
    <p style="color:blue">*** Select an answer and click [SUBMIT] button.

  <h6 class="textL30M30">4.1 Which of the following data has a mean of 28 and a median of 30?  </h6>
  <form name="Q1">
    <label><input type="radio" name="item" value="1"> 12, 20, 30, 40</label><br>
    <label><input type="radio" name="item" value="2"> 12, 30, 30, 40</label><br>
    <label><input type="radio" name="item" value="3"> 12, 40, 30, 40</label><br>
    <label><input type="radio" name="item" value="4"> 12, 40, 20, 40 </label><br>
    <p>
    <input type="button" value="SUBMIT" onClick="radio(24,1,Q1)"> &nbsp;&nbsp;&nbsp;
    <input type="text" size=25 id="ansQ1">
  </form>

  <h6 class="textL30M30">4.2 Six statistical scores are 70, 60, 80, 90, 90, 70. What is the median of these scores?</h6>
  <form name="Q2">
    <label><input type="radio" name="item" value="1"> 70</label><br>
    <label><input type="radio" name="item" value="2"> 75</label><br>
    <label><input type="radio" name="item" value="3"> 80</label><br>
    <label><input type="radio" name="item" value="4"> 90</label><br>
    <p>
    <input type="button" value="SUBMIT" onClick="radio(24,2,Q2)"> &nbsp;&nbsp;&nbsp;
    <input type="text" size=25 id="ansQ2">
  </form>

  <h6 class="textL30M30">4.3 Which of the following properties of the mean is incorrect?  </h6>
  <form name="Q3">
    <label><input type="radio" name="item" value="1"> The mean is greatly affected by an extreme value.</label><br>
    <label><input type="radio" name="item" value="2"> The sum of deviations from the mean is not zero.</label><br>
    <label><input type="radio" name="item" value="3"> The sum of squares of deviations about the mean is not greater than the sum of squares of deviations of any other number.</label><br>
    <label><input type="radio" name="item" value="4"> It is the mean that minimizes the sum of squares of deviations.</label><br>
    <p>
    <input type="button" value="SUBMIT" onClick="radio(24,3,Q3)"> &nbsp;&nbsp;&nbsp;
    <input type="text" size=25 id="ansQ3">
  </form>

  <h6 class="textL30M30">4.4 What is the variance of the following numbers? </h6>
      <h6> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8, 10, 11, 12, 14 </h6>
  <form name="Q4">
    <label><input type="radio" name="item" value="1"> 11</label><br>
    <label><input type="radio" name="item" value="2"> 8</label><br>
    <label><input type="radio" name="item" value="3"> 4</label><br>
    <label><input type="radio" name="item" value="4"> 2</label><br>
    <p>
    <input type="button" value="SUBMIT" onClick="radio(24,4,Q4)"> &nbsp;&nbsp;&nbsp;
    <input type="text" size=25 id="ansQ4">
  </form>

  <h6 class="textL30M30">4.5 The X and Y data are as follows:</h6>
      <h6> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X: 1, 2, 3, 4, 5, 6 </h6>
      <h6> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Y: 2, 4, 6, 8, 10, 12 </h6>
      <h6> What is their correlation coefficient between X and Y? </h6>
  <form name="Q5">
    <label><input type="radio" name="item" value="1"> 0</label><br>
    <label><input type="radio" name="item" value="2"> 0.5</label><br>
    <label><input type="radio" name="item" value="3"> 1</label><br>
    <label><input type="radio" name="item" value="4"> -1</label><br>
    <p>
    <input type="button" value="SUBMIT" onClick="radio(24,5,Q5)"> &nbsp;&nbsp;&nbsp;
    <input type="text" size=25 id="ansQ5">
  </form>

  </div>

  <script>
    for (var i=0; i < ans[24][0]; i++) document.getElementById(ansID[i+1]).disabled = true;
  </script>
  <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <button type="button" style="width:160px" onclick="moveSection(143)">&#10094;&#10094; &nbsp;&nbsp;<b>Chapter 3</b></button>
</div>
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="https://maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>

</body>
</html>

